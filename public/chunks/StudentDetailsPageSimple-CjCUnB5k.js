import{j as e}from"../assets/index-CoKafZFz.js";import{r as d,a as Ct,R as ve,h as cr,i as Bn,c as Wn,b as Hn,N as Vn}from"./vendor-C9PcmKF2.js";import{U as Ve,G as dr,c as Et,d as fe,M as X,B as Re,o as gt,r as ds,O as us,h as ms,X as pt,a2 as Is,a7 as Ps,f as Ne,A as fs,as as Yt,e as ne,x as et,k as Un,a1 as tt,T as xs,P as je,g as Ae,a as Je,a8 as Gn,b as ur,C as zn,u as Kn,at as Yn,au as qn,ao as Xn,p as Zn,av as Qn,ak as Jn,n as ea,J as ta,aw as As,ax as sa,a3 as ra,ae as Rs}from"./ui-DsxFGtGk.js";import{a as Q}from"./cascade-deletion-BvQll6O-.js";import{T as na}from"./TeacherNameDisplay-D8jtGwln.js";import{useStudent as aa,useTheoryLessons as la,useStudentTheoryLessons as oa,useAvailableTheoryLessons as ia,useTheoryLessonEnrollment as ca}from"./apiCache-CjZ3mddR.js";import{c as Y,C as J}from"./Card-1BAWwzNR.js";import{c as da}from"./utils-x1PSU_OZ.js";import"./query-BdHdBeoH.js";import"./theoryEnrollmentService-CyV7tbhP.js";const ks={personal:{label:"×¤×¨×˜×™× ××™×©×™×™×",icon:Ve},academic:{label:"××™×“×¢ ××§×“××™",icon:dr},schedule:{label:"×œ×•×— ×–×× ×™×",icon:Et},attendance:{label:"× ×•×›×—×•×ª",icon:fe},orchestra:{label:"×ª×–××•×¨×•×ª",icon:X},theory:{label:"×ª××•×¨×™×”",icon:Re},bagrut:{label:"×‘×’×¨×•×ª",icon:gt},documents:{label:"××¡××›×™×",icon:ds}},ua=({activeTab:t,onTabChange:s,tabs:r=[]})=>!r||r.length===0?null:e.jsxs("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm w-full overflow-hidden student-tab-navigation",children:[e.jsx("div",{className:"hidden md:flex w-full overflow-x-auto desktop-tab-nav",children:e.jsx("nav",{className:"flex gap-8 px-6 relative min-w-full","aria-label":"Tabs",children:r.map((n,a)=>{const l=ks[n.id],i=l?.icon||Ve,o=t===n.id;return e.jsxs("button",{onClick:()=>s(n.id),className:`
                  group inline-flex items-center gap-3 py-4 px-2 border-b-2 font-medium text-sm transition-all duration-300 relative tab-button
                  ${o?"border-primary-500 text-primary-600 bg-primary-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"}
                `,"aria-current":o?"page":void 0,style:{minHeight:"44px"},children:[e.jsx(i,{className:`w-5 h-5 transition-all duration-300 ${o?"text-primary-500 scale-110":"text-gray-400 group-hover:text-gray-500 group-hover:scale-105"}`}),e.jsx("span",{className:"whitespace-nowrap",children:l?.label||n.label}),o&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-primary-400 to-primary-600 rounded-full animate-scale-in"})]},n.id)})})}),e.jsxs("div",{className:"md:hidden w-full overflow-hidden mobile-tab-nav",children:[e.jsx("div",{className:"overflow-x-auto scrollbar-hide w-full",children:e.jsx("nav",{className:"flex gap-3 px-4 py-3 min-w-max","aria-label":"Tabs",style:{width:"max-content"},children:r.map((n,a)=>{const l=ks[n.id],i=l?.icon||Ve,o=t===n.id;return e.jsxs("button",{onClick:()=>s(n.id),className:`
                    flex flex-col items-center gap-1 px-4 py-3 rounded-xl font-medium text-xs transition-all duration-300 whitespace-nowrap transform tab-button
                    ${o?"bg-primary-100 text-primary-700 border-2 border-primary-200 scale-105 shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102 border-2 border-transparent"}
                  `,"aria-current":o?"page":void 0,style:{minWidth:"80px",minHeight:"44px"},children:[e.jsx(i,{className:`w-5 h-5 transition-all duration-300 ${o?"text-primary-600":"text-gray-500"}`}),e.jsx("span",{className:"leading-tight",children:l?.label||n.label})]},n.id)})})}),e.jsx("div",{className:"flex justify-center py-1",children:e.jsx("div",{className:"w-8 h-1 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-full bg-primary-400 rounded-full transition-all duration-300",style:{width:`${r?.length>0?(r.findIndex(n=>n.id===t)+1)/r.length*100:0}%`}})})})]})]});function mr({isLoading:t,children:s,skeleton:r,minHeight:n="200px"}){const[a,l]=d.useState(!1);return d.useEffect(()=>{let i;return t?i=setTimeout(()=>l(!0),150):l(!1),()=>clearTimeout(i)},[t]),t&&a?e.jsx("div",{style:{minHeight:n},children:r||e.jsx(ma,{})}):t?e.jsx("div",{style:{minHeight:n},className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:"×˜×•×¢×Ÿ..."})}):e.jsx(e.Fragment,{children:s})}function ma(){return e.jsx("div",{className:"space-y-4 p-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},t))})}const mt={StudentHeader:()=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start gap-6 animate-pulse",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-7 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})]})]})]})}),TabContent:()=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-6 animate-pulse",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"})]})]},t))}),TheoryLessons:()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between animate-pulse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-64"})]}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-40"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-20"})]})]}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-20"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-40"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]})]})]},t))})]}),OrchestraList:()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})})]},t))}),DocumentsList:()=>e.jsx("div",{className:"space-y-4 p-4 animate-pulse",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white border rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"})]})]},t))}),Schedule:()=>e.jsxs("div",{className:"p-4 space-y-4 animate-pulse",children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded"}),Array.from({length:7}).map((t,s)=>e.jsx("div",{className:"h-6 bg-gray-200 rounded"},s))]}),Array.from({length:10}).map((t,s)=>e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),Array.from({length:7}).map((r,n)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded opacity-50"},n))]},s))]}),AttendanceChart:()=>e.jsxs("div",{className:"bg-white p-6 rounded-lg border space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"}),e.jsx("div",{className:"flex justify-center gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]},t))})]}),PersonalInfo:()=>e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:6}).map((t,s)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},s))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-28 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:4}).map((t,s)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},s))})]})]})},fa=({student:t,studentId:s,isLoading:r,onStudentUpdate:n})=>{const a=t?.personalInfo||{},[l,i]=d.useState(!1),[o,x]=d.useState(!1),[m,f]=d.useState({fullName:a.fullName||"",phone:a.phone||"",age:a.age||"",address:a.address||"",parentName:a.parentName||"",parentPhone:a.parentPhone||"",parentEmail:a.parentEmail||"",studentEmail:a.studentEmail||""});d.useEffect(()=>{f({fullName:a.fullName||"",phone:a.phone||"",age:a.age||"",address:a.address||"",parentName:a.parentName||"",parentPhone:a.parentPhone||"",parentEmail:a.parentEmail||"",studentEmail:a.studentEmail||""})},[a]);const h=async()=>{try{x(!0);const c=await Q.students.updateStudent(s,{personalInfo:m});n&&n(c),i(!1)}catch(c){console.error("Error saving student personal info:",c);let y="×©×’×™××” ×‘×©××™×¨×ª ×”× ×ª×•× ×™×";c.message.includes("Authentication failed")?y="×¤×’ ×ª×•×§×£ ×”×¤× ×™×™×”. ×× × ×”×ª×—×‘×¨ ××—×“×©.":c.message.includes("validation")?y="×©×’×™××” ×‘× ×ª×•× ×™× ×©×”×•×–× ×•. ×× × ×‘×“×•×§ ××ª ×”×¤×¨×˜×™× ×”××™×©×™×™×.":c.message.includes("not found")?y="×”×ª×œ××™×“ ×œ× × ××¦× ×‘××¢×¨×›×ª.":c.message.includes("Network")&&(y="×©×’×™××ª ×¨×©×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜."),alert(y)}finally{x(!1)}},g=()=>{f({fullName:a.fullName||"",phone:a.phone||"",age:a.age||"",address:a.address||"",parentName:a.parentName||"",parentPhone:a.parentPhone||"",parentEmail:a.parentEmail||"",studentEmail:a.studentEmail||""}),i(!1)};return r?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:[1,2,3,4,5,6,7,8].map(c=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-32"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-full"})]},c))})}):e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"flex justify-end",children:l?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:h,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:[e.jsx(ms,{className:"w-4 h-4"}),o?"×©×•××¨...":"×©××•×¨"]}),e.jsxs("button",{onClick:g,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:[e.jsx(pt,{className:"w-4 h-4"}),"×‘×˜×œ"]})]}):e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[e.jsx(us,{className:"w-4 h-4"}),"×¢×¨×•×š"]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"×¤×¨×˜×™ ×ª×œ××™×“"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×©× ××œ×"}),l?e.jsx("input",{type:"text",value:m.fullName,onChange:c=>f({...m,fullName:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×©× ××œ×"}):e.jsx("div",{className:"text-gray-900 text-lg font-medium",children:a.fullName||"×œ× ×¦×•×™×Ÿ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×˜×œ×¤×•×Ÿ"}),l?e.jsx("input",{type:"tel",value:m.phone,onChange:c=>f({...m,phone:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4 text-gray-500"}),a.phone||"×œ× ×¦×•×™×Ÿ"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×’×™×œ"}),l?e.jsx("input",{type:"number",value:m.age,onChange:c=>f({...m,age:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×’×™×œ",min:"1",max:"99"}):e.jsx("div",{className:"text-gray-900",children:a.age||"×œ× ×¦×•×™×Ÿ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××™××™×™×œ ×ª×œ××™×“"}),l?e.jsx("input",{type:"email",value:m.studentEmail,onChange:c=>f({...m,studentEmail:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×›×ª×•×‘×ª ×“×•××´×œ ×ª×œ××™×“"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-gray-500"}),a.studentEmail||"×œ× ×¦×•×™×Ÿ"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×›×ª×•×‘×ª"}),l?e.jsx("textarea",{value:m.address,onChange:c=>f({...m,address:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×›×ª×•×‘×ª ××’×•×¨×™×",rows:2}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-gray-500"}),a.address||"×œ× ×¦×•×™×Ÿ"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"×¤×¨×˜×™ ×”×•×¨×”"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×©× ×”×•×¨×”"}),l?e.jsx("input",{type:"text",value:m.parentName,onChange:c=>f({...m,parentName:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×©× ×”×•×¨×”"}):e.jsx("div",{className:"text-gray-900",children:a.parentName||"×œ× ×¦×•×™×Ÿ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×˜×œ×¤×•×Ÿ ×”×•×¨×”"}),l?e.jsx("input",{type:"tel",value:m.parentPhone,onChange:c=>f({...m,parentPhone:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×”×•×¨×”"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4 text-gray-500"}),a.parentPhone||"×œ× ×¦×•×™×Ÿ"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××™××™×™×œ ×”×•×¨×”"}),l?e.jsx("input",{type:"email",value:m.parentEmail,onChange:c=>f({...m,parentEmail:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×›×ª×•×‘×ª ×“×•××´×œ ×”×•×¨×”"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-gray-500"}),a.parentEmail||"×œ× ×¦×•×™×Ÿ"]})]})]})]})]})},Os=["×œ× × ×‘×—×Ÿ","×¢×‘×¨/×”","×œ× ×¢×‘×¨/×”","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”"],Ls=["×¢×‘×¨/×”","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”"],xa=({student:t,studentId:s,isLoading:r,onStudentUpdate:n})=>{console.log("ğŸ“ AcademicInfoTabSimple - Full student object:",t),console.log("ğŸ“š Student enrollments:",t?.enrollments),console.log("ğŸ‘¨â€ğŸ« Student teacherAssignments:",t?.teacherAssignments);const a=t?.academicInfo||{},l=t?.teacherAssignments||[];t?.enrollments;const i=t?.teacherIds||t?.enrollments?.teacherIds||[];console.log("ğŸ“š AcademicInfoTabSimple data:",{teacherAssignments:l,teacherIds:i,"student.teacherIds":t?.teacherIds,"enrollments.teacherIds":t?.enrollments?.teacherIds});const[o,x]=d.useState(!1),[m,f]=d.useState(!1),[h,g]=d.useState([]),[c,y]=d.useState(!1),u=d.useMemo(()=>{if(console.log("ğŸ” Finding primary teacher:",{teacherAssignments:l,teachersData:h}),l&&l.length>0){const N=l.find(S=>S.isActive)||l[0];if(N?.teacherName)return console.log("âœ… Found teacherName in assignment:",N.teacherName),N.teacherName;if(N?.teacherId&&h.length>0){const S=h.find(P=>P._id===N.teacherId);if(S?.personalInfo?.fullName)return console.log("âœ… Found teacher name from teachersData:",S.personalInfo.fullName),S.personalInfo.fullName}}return h.length>0&&h[0]?.personalInfo?.fullName?(console.log("âœ… Using first teacher from teachersData:",h[0].personalInfo.fullName),h[0].personalInfo.fullName):(console.log("âš ï¸ No teacher name found"),null)},[l,h]),v=d.useMemo(()=>a.instrumentProgress&&a.instrumentProgress.length>0?a.instrumentProgress.find(S=>S.isPrimary)||a.instrumentProgress[0]:null,[a.instrumentProgress]),w=()=>{const N={};return a.instrumentProgress&&a.instrumentProgress.forEach(S=>{N[S.instrumentName]={stageTestStatus:S.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ",technicalTestStatus:S.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ"}}),{class:a.class||"",stage:a.stage||a.level||"",startDate:a.startDate||"",instrumentTests:N}},[j,C]=d.useState(w());d.useEffect(()=>{C(w())},[a]),d.useEffect(()=>{(async()=>{const S=l.map(R=>R.teacherId).filter(Boolean),P=[...new Set([...S,...i])];if(console.log("ğŸ” Teacher IDs to load:",{fromAssignments:S,fromTeacherIds:i,combined:P}),P.length===0){console.log("âš ï¸ No teachers to load");return}y(!0);try{console.log("ğŸ”„ Loading teacher data for IDs:",P);const R=P.map(M=>Q.teachers.getTeacher(M).catch(O=>(console.error(`Failed to load teacher ${M}:`,O),null))),k=(await Promise.all(R)).filter(Boolean);console.log("âœ… Loaded teachers:",k),g(k)}catch(R){console.error("âŒ Failed to load teachers:",R)}finally{y(!1)}})()},[i,l]);const I=d.useMemo(()=>{const N=l?.map(P=>P.teacherId)||[];console.log("ğŸ” Finding teachers without lessons:"),console.log("  - Enrolled teacher IDs:",i),console.log("  - Assigned teacher IDs:",N),console.log("  - Teachers data:",h);const S=h.filter(P=>i.includes(P._id)&&!N.includes(P._id));return console.log("ğŸ“Š Teachers without lessons:",S),S},[h,i,l]),T=async()=>{try{f(!0);const N=a.instrumentProgress?.map(P=>{const R=j.instrumentTests?.[P.instrumentName];if(R){const k=P.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ",M=R.stageTestStatus,O=Ls.includes(M)&&!Ls.includes(k)&&P.currentStage<8;return{...P,currentStage:O?P.currentStage+1:P.currentStage,tests:{...P.tests,stageTest:{...P.tests?.stageTest,status:R.stageTestStatus},technicalTest:{...P.tests?.technicalTest,status:R.technicalTestStatus}}}}return P});await Q.students.updateStudent(s,{academicInfo:{...a,class:j.class,instrumentProgress:N}});const S=await Q.students.getStudentById(s);n&&n(S),x(!1)}catch(N){console.error("Error saving student academic info:",N);let S="×©×’×™××” ×‘×©××™×¨×ª ×”× ×ª×•× ×™× ×”××§×“××™×™×";N.message?.includes("Authentication failed")?S="×¤×’ ×ª×•×§×£ ×”×¤× ×™×™×”. ×× × ×”×ª×—×‘×¨ ××—×“×©.":N.message?.includes("validation")?S="×©×’×™××” ×‘× ×ª×•× ×™× ×©×”×•×–× ×•. ×× × ×‘×“×•×§ ××ª ×”×¤×¨×˜×™× ×”××§×“××™×™×.":N.message?.includes("not found")?S="×”×ª×œ××™×“ ×œ× × ××¦× ×‘××¢×¨×›×ª.":N.message?.includes("Network")&&(S="×©×’×™××ª ×¨×©×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜."),alert(S)}finally{f(!1)}},b=()=>{C(w()),x(!1)},p=(N,S,P)=>{C(R=>({...R,instrumentTests:{...R.instrumentTests,[N]:{...R.instrumentTests?.[N],[`${S}Status`]:P}}}))};if(r)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:[1,2,3,4].map(N=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-32"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded animate-pulse w-full"})]},N))})});const E=N=>{switch(N){case"×¢×‘×¨/×”":return e.jsx(fe,{className:"w-4 h-4 text-green-500"});case"×œ× ×¢×‘×¨/×”":return e.jsx(Un,{className:"w-4 h-4 text-red-500"});case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª":return e.jsx(et,{className:"w-4 h-4 text-blue-500"});case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”":return e.jsx(et,{className:"w-4 h-4 text-purple-500"});default:return e.jsx(ne,{className:"w-4 h-4 text-gray-500"})}},A=N=>{switch(N){case"×¢×‘×¨/×”":return"bg-green-100 text-green-800";case"×œ× ×¢×‘×¨/×”":return"bg-red-100 text-red-800";case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª":return"bg-blue-100 text-blue-800";case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"××™×“×¢ ××§×“××™"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"×”×ª×§×“××•×ª, ×›×™×©×•×¨×™× ×•×”×™×©×’×™× ××§×“××™×™×"})]}),e.jsx("div",{className:"flex items-center gap-3",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:T,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(ms,{className:"w-4 h-4"}),m?"×©×•××¨...":"×©××•×¨"]}),e.jsxs("button",{onClick:b,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(pt,{className:"w-4 h-4"}),"×‘×˜×œ"]})]}):e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-xl hover:bg-primary-600 transition-colors shadow-md hover:shadow-lg",children:[e.jsx(us,{className:"w-4 h-4"}),"×¢×¨×•×š"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5 pb-4 border-b border-gray-100",children:[e.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:e.jsx(Re,{className:"w-5 h-5 text-primary-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"×¤×¨×˜×™× ××§×“××™×™×"})]}),I.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-700",children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"××•×¨×™× ×œ×œ× ×©×™×¢×•×¨:"}),I.map((N,S)=>e.jsxs("span",{children:[N.personalInfo?.fullName||"××•×¨×”",S<I.length-1?", ":""]},N._id||S))]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 border border-primary-200",children:[e.jsxs("div",{className:"text-sm text-primary-600 mb-1 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),"××•×¨×”"]}),e.jsx("div",{className:"text-base font-semibold text-primary-800",children:c?e.jsx("span",{className:"text-gray-400 animate-pulse",children:"×˜×•×¢×Ÿ..."}):u||(l.length>0||i.length>0?e.jsx("span",{className:"text-orange-500",children:"×˜×•×¢×Ÿ ×©× ××•×¨×”..."}):e.jsx("span",{className:"text-gray-400",children:"×œ× ××©×•×™×š"}))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×›×™×ª×”"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:o?e.jsx("input",{type:"text",value:j.class,onChange:N=>C({...j,class:N.target.value}),className:"w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×›×™×ª×”"}):a.class||e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×›×œ×™ × ×’×™× ×”"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:v?.instrumentName||e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×©×œ×‘"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:v?.currentStage||v?.stage||a.stage||a.level||e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×ª××¨×™×š ×”×ª×—×œ×”"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:o?e.jsx("input",{type:"date",value:j.startDate?new Date(j.startDate).toISOString().split("T")[0]:"",onChange:N=>C({...j,startDate:N.target.value}),className:"w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}):a.startDate?new Date(a.startDate).toLocaleDateString("he-IL"):e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]})]}),a.instrumentProgress&&a.instrumentProgress.length>0&&e.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Yt,{className:"w-5 h-5 text-primary-600"}),e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:"××‘×—× ×™×"})]}),e.jsx("div",{className:"space-y-4",children:a.instrumentProgress.map((N,S)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.instrumentProgress.length>1&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:N.instrumentName}),N.isPrimary&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full",children:"×¨××©×™"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"××‘×—×Ÿ ×˜×›× ×™"}),o?e.jsx("select",{value:j.instrumentTests?.[N.instrumentName]?.technicalTestStatus||"×œ× × ×‘×—×Ÿ",onChange:P=>p(N.instrumentName,"technicalTest",P.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Os.map(P=>e.jsx("option",{value:P,children:P},P))}):e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${A(N.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ")}`,children:[E(N.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ"),N.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"××‘×—×Ÿ ×©×œ×‘"}),o?e.jsx("select",{value:j.instrumentTests?.[N.instrumentName]?.stageTestStatus||"×œ× × ×‘×—×Ÿ",onChange:P=>p(N.instrumentName,"stageTest",P.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Os.map(P=>e.jsx("option",{value:P,children:P},P))}):e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${A(N.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ")}`,children:[E(N.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ"),N.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ"]})]})]})]},S))})]}),a.notes&&e.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ds,{className:"w-4 h-4 text-primary-600"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"×”×¢×¨×•×ª"})]}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:a.notes})]})]})]})},qt=d.memo(({lesson:t,isEnrolled:s=!1,onEnroll:r,onUnenroll:n,isEnrolling:a=!1,isUnenrolling:l=!1,studentGrade:i,canEnroll:o=!0})=>{const x=d.useMemo(()=>{switch(t.level?.toLowerCase()){case"beginner":case"××ª×—×™×œ×™×":return"bg-green-100 text-green-800";case"intermediate":case"×‘×™× ×•× ×™":return"bg-yellow-100 text-yellow-800";case"advanced":case"××ª×§×“××™×":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}},[t.level]),m=d.useMemo(()=>{switch(t.category?.toLowerCase()){case"harmony":case"×”×¨××•× ×™×”":return e.jsx(X,{className:"w-4 h-4"});case"theory":case"×ª×™××•×¨×™×”":return e.jsx(Re,{className:"w-4 h-4"});case"composition":case"×§×•××¤×•×–×™×¦×™×”":return e.jsx(dr,{className:"w-4 h-4"});default:return e.jsx(Re,{className:"w-4 h-4"})}},[t.category]),f=g=>{if(!g)return"";const[c,y]=g.split(":");return`${c}:${y}`},h=d.useMemo(()=>{if(!t.maxStudents)return null;const g=t.studentIds?.length||0,c=g/t.maxStudents*100;return{current:g,total:t.maxStudents,percentage:c}},[t.maxStudents,t.studentIds]);return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m,e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:t.title||t.name||"×©×™×¢×•×¨ ×ª×™××•×¨×™×”"})]}),t.category&&e.jsxs("span",{className:"text-sm text-gray-600",children:["×§×˜×’×•×¨×™×”: ",t.category]}),e.jsx("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:t.level&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x}`,children:t.level})})]}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"×¨×©×•×"]}),e.jsx("button",{onClick:n,disabled:l,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"×‘×˜×œ ×”×¨×©××”",children:l?e.jsx(tt,{className:"w-4 h-4 animate-spin"}):e.jsx(xs,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:r,disabled:!o||a,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${o?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 animate-spin"}),"× ×¨×©×..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4"}),"×”×¨×©×"]})})})]}),e.jsx(na,{lesson:t,className:"mb-3",showIcon:!0}),(t.date||t.startTime)&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[t.date&&new Date(t.date).toLocaleDateString("he-IL"),t.startTime&&t.endTime&&e.jsxs(e.Fragment,{children:[t.date?" â€¢ ":"",f(t.startTime)," - ",f(t.endTime)]})]})]})}),t.location&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:t.location})]}),h&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[h.current," / ",h.total," ×ª×œ××™×“×™×"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${h.percentage}%`}})})]}),!s&&e.jsxs(e.Fragment,{children:[t.isFull&&e.jsx("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×”×©×™×¢×•×¨ ××œ×"})]})}),!t.gradeCompatible&&e.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×œ× ××ª××™× ×œ×›×™×ª×”"})]})}),!t.levelCompatible&&e.jsx("div",{className:"mb-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×¨××” ×œ× ××ª××™××”"})]})})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-3 pt-3 border-t",children:t.description}),t.targetGrades&&t.targetGrades.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gn,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["××™×•×¢×“ ×œ×›×™×ª×•×ª: ",t.targetGrades.join(", ")]})]})})]})});qt.displayName="LessonCard";const Xt=d.memo(({icon:t,title:s,description:r,actionLabel:n,onAction:a})=>e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:s}),e.jsx("p",{className:"text-gray-500 mb-6",children:r}),n&&a&&e.jsx("button",{onClick:a,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:n})]}));Xt.displayName="EmptyState";const ha=({student:t,studentId:s})=>{const[r,n]=d.useState("current"),[a,l]=d.useState(null),{data:i,isLoading:o,error:x}=aa(s),{data:m,isLoading:f}=la(),h=d.useMemo(()=>t?.academicInfo?.class||i?.academicInfo?.class||"×–",[t,i]),g=d.useMemo(()=>t?.theoryLevel||i?.theoryLevel||"beginner",[t,i]),c=oa(s),y=ia(s,h,g),{enroll:u,unenroll:v,isEnrolling:w,isUnenrolling:j,error:C}=ca(s),I=d.useMemo(()=>N=>{u({lessonId:N})},[u]),T=d.useMemo(()=>N=>{v({lessonId:N}),l(null)},[v]),b=o||f,p=x||C;if(b)return e.jsx(mr,{isLoading:!0,skeleton:e.jsx(mt.TabContent,{}),minHeight:"400px",children:e.jsx("div",{})});if(p)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-lg mb-2",children:"âš ï¸ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×"}),e.jsx("div",{className:"text-gray-600 mb-4 text-sm",children:x?.message||C?.message||"××™×¨×¢×” ×©×’×™××” ×œ× ×¦×¤×•×™×”"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors text-sm",children:"× ×¡×” ×©×•×‘"})]});const E=()=>c.length===0?e.jsx(Xt,{icon:e.jsx(Re,{className:"w-8 h-8 text-gray-300"}),title:"××™×Ÿ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×¨×©×•××™×",description:"×”×ª×œ××™×“ ××™× ×• ×¨×©×•× ×›×¨×’×¢ ×œ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”",actionLabel:"×¦×¤×” ×‘×©×™×¢×•×¨×™× ×–××™× ×™×",onAction:()=>n("manage")}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5 text-purple-600"}),"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×¨×©×•××™× (",c.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:c.map(N=>e.jsx(qt,{lesson:N,isEnrolled:!0,onUnenroll:()=>l(N._id),isUnenrolling:j,studentGrade:h},N._id))})]}),A=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-green-600"}),"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×–××™× ×™× ×œ×”×¨×©××”"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["×›×™×ª×”: ",h," â€¢ ×¨××”: ",g]})]}),y.length===0?e.jsx(Xt,{icon:e.jsx(Re,{className:"w-8 h-8 text-gray-300"}),title:"××™×Ÿ ×©×™×¢×•×¨×™× ×–××™× ×™×",description:"×›×œ ×”×©×™×¢×•×¨×™× ×”××ª××™××™× ××œ××™× ××• ×©×›×‘×¨ × ×¨×©××ª ××œ×™×”×"}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.map(N=>e.jsx(qt,{lesson:N,isEnrolled:!1,onEnroll:()=>I(N._id),isEnrolling:w,studentGrade:h,canEnroll:N.isCompatible},N._id))})]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”"})}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>n("current"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r==="current"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"×©×™×¢×•×¨×™× ×¨×©×•××™× (",c.length,")"]})}),e.jsx("button",{onClick:()=>n("manage"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r==="manage"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"×”×¨×©××” ×—×“×©×” (",y.length,")"]})})]})]}),r==="current"?E():A(),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"×‘×˜×œ ×”×¨×©××” ×œ×©×™×¢×•×¨ ×ª×™××•×¨×™×”"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×”×¨×©××” ×œ×©×™×¢×•×¨ ×–×”? ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"×‘×™×˜×•×œ"}),e.jsx("button",{onClick:()=>T(a),disabled:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 animate-spin"}),"××‘×˜×œ..."]}):"×‘×˜×œ ×”×¨×©××”"})]})]})})]})},ga=d.memo(ha),pa=({lessons:t,className:s=""})=>{const r=["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™"],n=t.reduce((o,x)=>(x.dayOfWeek>=0&&x.dayOfWeek<=5&&(o[x.dayOfWeek]||(o[x.dayOfWeek]=[]),o[x.dayOfWeek].push(x)),o),{});Object.keys(n).forEach(o=>{n[parseInt(o)].sort((x,m)=>{const f=x.startTime.split(":").map(Number),h=m.startTime.split(":").map(Number),g=f[0]*60+f[1],c=h[0]*60+h[1];return g-c})});const a=o=>{switch(o){case"individual":return"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-600";case"group":return"bg-gradient-to-r from-green-500 to-green-600 text-white border-green-600";case"orchestra":return"bg-gradient-to-r from-purple-500 to-purple-600 text-white border-purple-600";case"theory":return"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-orange-600";default:return"bg-gradient-to-r from-gray-500 to-gray-600 text-white border-gray-600"}},l=o=>{switch(o){case"individual":return"×©×™×¢×•×¨ ××™×©×™";case"group":return"×©×™×¢×•×¨ ×§×‘×•×¦×ª×™";case"orchestra":return"×ª×–××•×¨×ª";case"theory":return"×ª×™××•×¨×™×”";default:return"×©×™×¢×•×¨"}},i=(o,x)=>{const[m,f]=o.split(":").map(Number),[h,g]=x.split(":").map(Number),c=m*60+f;return h*60+g-c};return e.jsxs("div",{className:`simple-weekly-grid ${s}`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"×œ×•×— ×–×× ×™× ×©×‘×•×¢×™"}),e.jsx("p",{className:"text-xs text-gray-600",children:t.length===0?"××™×Ÿ ×©×™×¢×•×¨×™× ×”×©×‘×•×¢":t.length===1?"×©×™×¢×•×¨ ××—×“ ×”×©×‘×•×¢":`${t.length} ×©×™×¢×•×¨×™× ×”×©×‘×•×¢`})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-4",children:r.map((o,x)=>{const m=n[x]||[];return e.jsxs("div",{className:"day-column",children:[e.jsxs("div",{className:"day-header bg-gray-50 rounded-t-lg px-3 py-2 border-b",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-center text-sm",children:o}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:m.length===0?"×¨×™×§":m.length===1?"1":`${m.length}`})]}),e.jsx("div",{className:"day-content bg-white rounded-b-lg border border-t-0 border-gray-200 min-h-24",children:m.length===0?e.jsxs("div",{className:"p-3 text-center",children:[e.jsx("div",{className:"text-gray-300 mb-1",children:e.jsx(X,{className:"w-5 h-5 mx-auto"})}),e.jsx("p",{className:"text-gray-400 text-xs",children:"××™×Ÿ"})]}):e.jsx("div",{className:"p-2 space-y-2",children:m.map(f=>e.jsxs("div",{className:`lesson-card rounded-md p-2 border shadow-sm hover:shadow-md transition-all duration-200 ${a(f.lessonType)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h5",{className:"font-semibold text-sm truncate",children:f.instrumentName}),e.jsx("span",{className:"text-xs bg-white bg-opacity-20 px-1 py-0.5 rounded",children:l(f.lessonType)})]}),e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-xs font-medium",children:[f.startTime,"-",f.endTime]}),e.jsxs("span",{className:"text-xs bg-white bg-opacity-20 px-1 rounded",children:[i(f.startTime,f.endTime),"×“'"]})]}),e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs truncate",children:f.teacherName})]}),(f.roomNumber||f.location)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs truncate",children:f.roomNumber?`×—×“×¨ ${f.roomNumber}`:f.location})]})]},f.id))})})]},x)})}),e.jsxs("div",{className:"legend bg-gray-50 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"××§×¨×"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"××™×©×™"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-green-500 to-green-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"×§×‘×•×¦×ª×™"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"×ª×–××•×¨×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-orange-500 to-orange-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"×ª×™××•×¨×™×”"})]})]})]})]})},ba=({student:t,studentId:s,isLoading:r})=>{const[n,a]=d.useState({}),[l,i]=d.useState([]),[o,x]=d.useState(!1);d.useEffect(()=>{(async()=>{if(t?.teacherAssignments&&t.teacherAssignments.length>0){const c=[...new Set(t.teacherAssignments.map(u=>u.teacherId).filter(Boolean))],y={};for(const u of c)try{const v=await Q.teachers.getTeacherById(u);y[u]=v,console.log(`Fetched teacher ${u}:`,v.personalInfo?.fullName)}catch(v){console.error(`Failed to fetch teacher ${u}:`,v)}a(y)}})()},[t?.teacherAssignments]),d.useEffect(()=>{(async()=>{if(t)try{x(!0);const y=(await Q.orchestras.getOrchestras()).filter(u=>u.memberIds?.includes(s)||t?.enrollments?.orchestraIds?.includes(u._id));i(y)}catch(c){console.error("Error fetching orchestras:",c),i([])}finally{x(!1)}})()},[t?.enrollments?.orchestraIds,s,t]);const m=d.useMemo(()=>{const g=[];return console.log("Processing student data:",t),t?.teacherAssignments&&t.teacherAssignments.length>0&&t.teacherAssignments.forEach((c,y)=>{console.log(`Processing assignment ${y}:`,c);const v={×¨××©×•×Ÿ:0,×©× ×™:1,×©×œ×™×©×™:2,×¨×‘×™×¢×™:3,×—××™×©×™:4,×©×™×©×™:5,×©×‘×ª:6}[c.day]??0,w=c.time||c.startTime||"14:30",j=(p,E)=>{const[A,N]=p.split(":").map(Number),S=A*60+N+E,P=Math.floor(S/60),R=S%60;return`${P.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`},C=c.scheduleInfo?.endTime||j(w,c.duration||45),I=n[c.teacherId],T=I?.personalInfo?.fullName||c.scheduleInfo?.teacherName||c.teacherName||"××•×¨×”",b=I?.professionalInfo?.instrument||c.instrument||t?.academicInfo?.instrumentProgress?.[0]?.instrumentName||"×›×œ×™ × ×’×™× ×”";g.push({id:c._id||c.teacherId||`lesson-${y}`,instrumentName:b,teacherName:T,teacherId:c.teacherId,startTime:w,endTime:C,dayOfWeek:v,location:c.location||c.scheduleInfo?.location,roomNumber:c.roomNumber||c.room,lessonType:c.lessonType||"individual"})}),t?.lessons&&t.lessons.length>0&&t.lessons.forEach((c,y)=>{console.log(`Processing lesson ${y}:`,c);const v=(c.teacherId?n[c.teacherId]:null)?.personalInfo?.fullName||c.teacherName||c.teacher?.personalInfo?.fullName||"××•×¨×”";g.push({id:c._id||`lesson-direct-${y}`,instrumentName:c.instrument||c.instrumentName||"×›×œ×™ × ×’×™× ×”",teacherName:v,startTime:c.startTime||"14:30",endTime:c.endTime||"15:15",dayOfWeek:c.dayOfWeek??2,location:c.location,roomNumber:c.roomNumber||c.room,lessonType:c.lessonType||"individual"})}),l&&l.length>0&&l.forEach((c,y)=>{const u=(()=>{const T=c.conductor||c.conductorInfo;return T?typeof T=="string"?T:T.personalInfo?.fullName?T.personalInfo.fullName:T.personalInfo?.firstName&&T.personalInfo?.lastName?`${T.personalInfo.firstName} ${T.personalInfo.lastName}`:T.personalInfo?.name?T.personalInfo.name:T.personalInfo?.hebrewName?T.personalInfo.hebrewName:T.fullName?T.fullName:T.name?T.name:T.displayName?T.displayName:"×× ×¦×— ×œ× ××•×’×“":"×× ×¦×— ×œ× ××•×’×“"})();let v=null,w=null,j="17:00",C="18:30",I="××•×œ× ×’×Ÿ";c.rehearsalSchedule&&(c.rehearsalSchedule.dayOfWeek!==void 0||c.rehearsalSchedule.dayName)?v=c.rehearsalSchedule:c.schedule&&(c.schedule.dayOfWeek!==void 0||c.schedule.dayName)?v=c.schedule:c.rehearsals&&c.rehearsals.length>0&&(v=c.rehearsals[0]),v?(w=v.dayOfWeek,w===void 0&&v.dayName&&(w={×¨××©×•×Ÿ:0,×©× ×™:1,×©×œ×™×©×™:2,×¨×‘×™×¢×™:3,×—××™×©×™:4,×©×™×©×™:5,×©×‘×ª:6}[v.dayName]??1),j=v.startTime||j,C=v.endTime||C,I=v.location||c.location||I):w=3,w!==null&&g.push({id:`orchestra-${c._id}`,instrumentName:c.name||"×ª×–××•×¨×ª",teacherName:u,startTime:j,endTime:C,dayOfWeek:w,location:I,roomNumber:null,lessonType:"orchestra"})}),g},[t?.teacherAssignments,t?.lessons,n,l]),f=d.useMemo(()=>l.map(g=>({id:g._id,name:g.name||"×ª×–××•×¨×ª",status:"×¨×©×•×",conductor:g.conductor,rehearsalSchedule:g.rehearsalSchedule,location:g.location})),[l]),h=d.useMemo(()=>m.filter(g=>g.lessonType!=="orchestra"),[m]);return r||o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-48"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"})]})}):e.jsxs("div",{className:"p-4 space-y-4 bg-white min-h-screen w-full max-w-full overflow-hidden student-content-area",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"×œ×•×— ×–×× ×™× ×©×‘×•×¢×™"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:m.length===0?"××™×Ÿ ×©×™×¢×•×¨×™× ××ª×•×›× × ×™×":m.length===1?"×©×™×¢×•×¨ ××—×“ ×‘×©×‘×•×¢":`${m.length} ×©×™×¢×•×¨×™× ×‘×©×‘×•×¢`})]}),m.length>0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 w-full max-w-full overflow-hidden",children:e.jsx(pa,{lessons:m})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(Et,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"××™×Ÿ ×©×™×¢×•×¨×™× ××ª×•×›× × ×™×"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"×”×ª×œ××™×“ ×¢×“×™×™×Ÿ ×œ× ×©×•×™×™×š ×œ××•×¨×™× ××• ×©×œ× ×”×•×’×“×¨×• ×œ×• ×©×™×¢×•×¨×™× ×§×‘×•×¢×™×"}),e.jsx("div",{className:"text-sm text-gray-500",children:"× ×™×ª×Ÿ ×œ×©×™×™×š ××•×¨×™× ×•×œ×”×’×“×™×¨ ×©×™×¢×•×¨×™× ×“×¨×š ×”××¢×¨×›×ª"})]}),(h.length>0||f.length>0)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.length>0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h4",{className:"text-base font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-primary-600"}),"×©×™×¢×•×¨×™× ×”×©×‘×•×¢"]}),e.jsx("div",{className:"space-y-3",children:h.map(g=>{const c=["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™","×©×‘×ª"];return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:g.instrumentName})]}),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:c[g.dayOfWeek]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsxs("span",{children:[g.startTime," - ",g.endTime]})]}),(g.roomNumber||g.location)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"}),e.jsx("span",{children:g.roomNumber?`×—×“×¨ ${g.roomNumber}`:g.location})]})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["××•×¨×”: ",g.teacherName]})]},g.id)})})]}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx(X,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-1",children:"××™×Ÿ ×©×™×¢×•×¨×™× ××™×©×™×™×"}),e.jsx("p",{className:"text-sm text-gray-600",children:"×”×ª×œ××™×“ ×˜×¨× ×©×•×™×™×š ×œ×©×™×¢×•×¨×™× ××™×©×™×™×"})]})}),f.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h4",{className:"text-base font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-600"}),"×ª×–××•×¨×•×ª ×•×¤×¢×™×œ×•×™×•×ª"]}),e.jsx("div",{className:"space-y-4",children:f.map(g=>e.jsxs("div",{className:"p-5 bg-purple-50 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:g.name})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:g.status})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{const c=g.conductor;return c?typeof c=="string"?c:c.personalInfo?.fullName?c.personalInfo.fullName:c.personalInfo?.firstName&&c.personalInfo?.lastName?`${c.personalInfo.firstName} ${c.personalInfo.lastName}`:c.personalInfo?.name?c.personalInfo.name:c.personalInfo?.hebrewName?c.personalInfo.hebrewName:c.fullName?c.fullName:c.name?c.name:c.displayName?c.displayName:"×œ× ××•×’×“":"×œ× ××•×’×“"})()})]})}),g.rehearsalSchedule?e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-600"}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª"]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-900",children:g.rehearsalSchedule.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{className:"font-medium text-blue-800",children:g.rehearsalSchedule.startTime&&g.rehearsalSchedule.endTime?`${g.rehearsalSchedule.startTime} - ${g.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:g.rehearsalSchedule.location||g.location||"××•×œ× ×’×Ÿ"})]})]})})]}):e.jsx("div",{className:"mt-2 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:"×œ×•×— ×–×× ×™× ×™×¤×•×¨×¡× ×‘×”××©×š"})]},g.id))})]}),f.length===0&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"××™×Ÿ ×ª×–××•×¨×•×ª"}),e.jsx("p",{className:"text-gray-600",children:"×œ× × ×¨×©××ª ×¢×“×™×™×Ÿ ×œ×ª×–××•×¨×•×ª ××• ×¤×¢×™×œ×•×™×•×ª ×§×‘×•×¦×ª×™×•×ª"})]})})]}),h.length===0&&f.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-600"}),"×ª×–××•×¨×•×ª ×•×¤×¢×™×œ×•×™×•×ª"]}),e.jsx("div",{className:"space-y-4",children:f.map(g=>e.jsxs("div",{className:"p-5 bg-purple-50 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:g.name})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:g.status})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{const c=g.conductor;return c?typeof c=="string"?c:c.personalInfo?.fullName?c.personalInfo.fullName:c.personalInfo?.firstName&&c.personalInfo?.lastName?`${c.personalInfo.firstName} ${c.personalInfo.lastName}`:c.personalInfo?.name?c.personalInfo.name:c.personalInfo?.hebrewName?c.personalInfo.hebrewName:c.fullName?c.fullName:c.name?c.name:c.displayName?c.displayName:"×œ× ××•×’×“":"×œ× ××•×’×“"})()})]})}),g.rehearsalSchedule?e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-600"}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª"]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-900",children:g.rehearsalSchedule.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{className:"font-medium text-blue-800",children:g.rehearsalSchedule.startTime&&g.rehearsalSchedule.endTime?`${g.rehearsalSchedule.startTime} - ${g.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:g.rehearsalSchedule.location||g.location||"××•×œ× ×’×Ÿ"})]})]})})]}):e.jsx("div",{className:"mt-2 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:"×œ×•×— ×–×× ×™× ×™×¤×•×¨×¡× ×‘×”××©×š"})]},g.id))})]})]})},va=({student:t,studentId:s,isLoading:r})=>{const[n,a]=d.useState("current"),[l,i]=d.useState([]),[o,x]=d.useState([]),[m,f]=d.useState(!1),[h,g]=d.useState(null),[c,y]=d.useState(null),u=t?.teacherAssignments?.[0]?.instrument||"×—×¦×•×¦×¨×”",v=t?.academicInfo?.class||"×–";d.useEffect(()=>{(async()=>{try{f(!0);const E=(await Q.orchestras.getOrchestras()).filter(R=>R.memberIds?.includes(s)),A=t?.enrollments?.orchestraIds||[],N=new Set([...A,...E.map(R=>R._id)]);if(N.size===0){i([]);return}const S=Array.from(N).map(async R=>{try{const k=await Q.orchestras.getOrchestra(R);let M=null;if(k.conductorId||k.teacherId)try{const _=k.conductorId||k.teacherId;M=await Q.teachers.getTeacher(_)}catch(_){console.warn(`Failed to fetch conductor ${k.conductorId||k.teacherId}:`,_)}const O={hasRehearsals:k.rehearsalIds&&k.rehearsalIds.length>0,rehearsalCount:k.rehearsalIds?.length||0,location:k.location||"××•×œ× ×”××•×–×™×§×” ×”×¨××©×™"};return{...k,conductor:M||k.conductor,enrollmentStatus:"enrolled",rehearsalSummary:O}}catch(k){console.warn(`Failed to fetch orchestra ${R}:`,k);const M=E.find(O=>O._id===R);return M?{...M,enrollmentStatus:"enrolled",rehearsalSummary:{hasRehearsals:!1,rehearsalCount:0,location:"×œ× ××•×’×“"}}:{_id:R,name:"×ª×–××•×¨×ª ×œ× ×–××™× ×”",error:!0,enrollmentStatus:"enrolled",rehearsalSummary:{hasRehearsals:!1,rehearsalCount:0,location:"×œ× ××•×’×“"}}}}),P=await Promise.all(S);i(P),console.log(`Found ${P.length} enrolled orchestras for student ${s}`),P.length>0&&(console.log("ğŸ“Š Enrolled orchestra sample:",P[0]),console.log("ğŸ“Š Enrolled orchestra keys:",Object.keys(P[0])),console.log("ğŸ“Š Enrolled rehearsal schedule:",P[0].rehearsalSchedule))}catch(p){console.error("Error fetching enrolled orchestras:",p)}finally{f(!1)}})()},[t?.enrollments?.orchestraIds,s]),d.useEffect(()=>{(async()=>{if(n==="manage")try{f(!0);const p=await Q.orchestras.getOrchestras(),A=(await Promise.all(p.map(async N=>{const S=t?.enrollments?.orchestraIds?.includes(N._id)||N.memberIds?.includes(s);let P=!0;N.requiredInstruments&&N.requiredInstruments.length>0&&(P=N.requiredInstruments.includes(u));let R=!0;N.gradeRequirements&&N.gradeRequirements.length>0&&(R=N.gradeRequirements.includes(v));let k=null;if(N.conductorId||N.teacherId)try{const O=N.conductorId||N.teacherId;k=await Q.teachers.getTeacher(O)}catch(O){console.warn(`Failed to fetch conductor ${N.conductorId||N.teacherId}:`,O)}const M={hasRehearsals:N.rehearsalIds&&N.rehearsalIds.length>0,rehearsalCount:N.rehearsalIds?.length||0,location:N.location||"××•×œ× ×”××•×–×™×§×” ×”×¨××©×™"};return{...N,conductor:k||N.conductor,isEnrolled:S,instrumentCompatible:P,gradeCompatible:R,isCompatible:P&&R,rehearsalSummary:M}}))).filter(N=>!N.isEnrolled);console.log("All orchestras:",p.length,"Available:",A.length),console.log("ğŸ“Š Orchestra data sample:",p[0]),console.log("ğŸ“Š Orchestra keys:",p[0]?Object.keys(p[0]):"No orchestras"),p[0]&&(console.log("ğŸ“Š Rehearsal schedule field:",p[0].rehearsalSchedule),console.log("ğŸ“Š Schedule field:",p[0].schedule),console.log("ğŸ“Š Rehearsals field:",p[0].rehearsals)),x(A)}catch(p){console.error("Error fetching available orchestras:",p),x([])}finally{f(!1)}})()},[n,t?.enrollments?.orchestraIds,u,v,s]);const w=b=>{const p=b?.rehearsalSchedule;if(!p||!t?.teacherAssignments)return!1;const E=2,A="14:30",N="15:15";if(p.dayOfWeek!==E)return!1;const S=p.startTime,P=p.endTime;return S<N&&P>A},j=async b=>{try{g(b),await Q.orchestras.addMember(b,s);const p=o.find(E=>E._id===b);p&&(i(E=>[...E,{...p,enrollmentStatus:"enrolled"}]),x(E=>E.filter(A=>A._id!==b)))}catch(p){console.error("Error enrolling in orchestra:",p)}finally{g(null)}},C=async b=>{try{g(b),await Q.orchestras.removeMember(b,s);const p=l.find(E=>E._id===b);p&&!p.error&&x(E=>[...E,p]),i(E=>E.filter(A=>A._id!==b))}catch(p){console.error("Error unenrolling from orchestra:",p)}finally{g(null),y(null)}};if(r)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-48"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded animate-pulse"})]})});const I=()=>m?e.jsx("div",{className:"space-y-4",children:[1,2].map(b=>e.jsx("div",{className:"bg-gray-200 rounded-lg h-48 animate-pulse"},b))}):l.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8 text-gray-300"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"××™×Ÿ ×”×¨×©××•×ª ×§×™×™××•×ª"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"×”×ª×œ××™×“ ××™× ×• ×¨×©×•× ×›×¨×’×¢ ×œ×ª×–××•×¨×•×ª"}),e.jsx("button",{onClick:()=>a("manage"),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"×¦×¤×” ×‘×ª×–××•×¨×•×ª ×–××™× ×•×ª"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-purple-600"}),"×ª×–××•×¨×•×ª ×¨×©×•××•×ª (",l.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(b=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:b.name}),e.jsx("div",{className:"mt-2 space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{if(console.log("ğŸ­ Debugging conductor for orchestra:",b.name),console.log("ğŸ­ Orchestra object keys:",Object.keys(b)),console.log("ğŸ­ Orchestra.conductor:",b.conductor),console.log("ğŸ­ Orchestra.conductorId:",b.conductorId),console.log("ğŸ­ Orchestra.teacherId:",b.teacherId),b.conductor){if(console.log("ğŸ­ Conductor object:",b.conductor),console.log("ğŸ­ Conductor type:",typeof b.conductor),console.log("ğŸ­ Conductor keys:",typeof b.conductor=="object"?Object.keys(b.conductor):"N/A"),console.log("ğŸ­ Conductor.personalInfo:",b.conductor.personalInfo),console.log("ğŸ­ Conductor.personalInfo keys:",b.conductor.personalInfo?Object.keys(b.conductor.personalInfo):"No personalInfo"),typeof b.conductor=="string")return console.log("ğŸ­ Using string conductor name:",b.conductor),b.conductor;if(b.conductor.fullName)return console.log("ğŸ­ Using fullName:",b.conductor.fullName),b.conductor.fullName;if(b.conductor.personalInfo?.fullName)return console.log("ğŸ­ Using personalInfo.fullName:",b.conductor.personalInfo.fullName),b.conductor.personalInfo.fullName;if(b.conductor.personalInfo?.firstName&&b.conductor.personalInfo?.lastName){const p=`${b.conductor.personalInfo.firstName} ${b.conductor.personalInfo.lastName}`;return console.log("ğŸ­ Using personalInfo firstName + lastName:",p),p}if(b.conductor.personalInfo?.name)return console.log("ğŸ­ Using personalInfo.name:",b.conductor.personalInfo.name),b.conductor.personalInfo.name;if(b.conductor.name)return console.log("ğŸ­ Using name:",b.conductor.name),b.conductor.name;if(b.conductor.personalInfo?.hebrewName)return console.log("ğŸ­ Using personalInfo.hebrewName:",b.conductor.personalInfo.hebrewName),b.conductor.personalInfo.hebrewName;if(b.conductor.displayName)return console.log("ğŸ­ Using displayName:",b.conductor.displayName),b.conductor.displayName}return console.log("ğŸ­ No conductor data found, returning default"),"×œ× ××•×’×“"})()})]})}),b.error&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×˜×™ ×”×ª×–××•×¨×ª"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"×¨×©×•×"]}),e.jsx("button",{onClick:()=>y(b._id),disabled:h===b._id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"×‘×˜×œ ×”×¨×©××”",children:e.jsx(xs,{className:"w-4 h-4"})})]})]}),b.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:b.description}),e.jsxs("div",{className:"mb-4 bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª"]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-900",children:b.rehearsalSchedule?.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{className:"font-medium text-blue-800",children:b.rehearsalSchedule?`${b.rehearsalSchedule.startTime} - ${b.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:b.rehearsalSchedule?.location||b.location||"××•×œ× ×’×Ÿ"})]})]})})]}),b.capacity&&e.jsxs("div",{className:"text-sm text-gray-600",children:["×§×™×‘×•×œ×ª: ",b.currentMembers||0," / ",b.capacity," ×—×‘×¨×™×"]})]},b._id))})]}),T=()=>m?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(b=>e.jsx("div",{className:"bg-gray-200 rounded-lg h-32 animate-pulse"},b))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-green-600"}),"×ª×–××•×¨×•×ª ×–××™× ×•×ª ×œ×”×¨×©××”"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["××¦×™×’ ×ª×–××•×¨×•×ª ×”×ª×•×××•×ª ×œ×›×œ×™: ",u]})]}),o.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8 text-gray-300"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-600 mb-2",children:"××™×Ÿ ×ª×–××•×¨×•×ª ×–××™× ×•×ª"}),e.jsx("p",{className:"text-gray-500",children:"×›×œ ×”×ª×–××•×¨×•×ª ×”×ª×•×××•×ª ×œ×›×œ×™ ×©×œ×š ××œ××•×ª ××• ×©×›×‘×¨ × ×¨×©××ª ××œ×™×”×Ÿ"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o.map(b=>{const p=w(b),E=b.capacity&&b.currentMembers>=b.capacity,A=!p&&!E&&b.isCompatible;return e.jsxs("div",{className:`bg-white rounded-xl border p-6 hover:shadow-md transition-shadow ${A?"border-gray-200":"border-gray-200 opacity-75"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:b.name}),e.jsx("div",{className:"mt-2 space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{if(console.log("ğŸª Debugging conductor for available orchestra:",b.name),console.log("ğŸª Available orchestra.conductor:",b.conductor),console.log("ğŸª Available orchestra.conductorId:",b.conductorId),b.conductor){if(console.log("ğŸª Available conductor object:",b.conductor),console.log("ğŸª Available conductor type:",typeof b.conductor),console.log("ğŸª Available conductor keys:",Object.keys(b.conductor)),console.log("ğŸª Available conductor.personalInfo:",b.conductor.personalInfo),console.log("ğŸª Available conductor.personalInfo keys:",b.conductor.personalInfo?Object.keys(b.conductor.personalInfo):"No personalInfo"),typeof b.conductor=="string")return console.log("ğŸª Using string conductor name:",b.conductor),b.conductor;if(b.conductor.fullName)return console.log("ğŸª Using fullName:",b.conductor.fullName),b.conductor.fullName;if(b.conductor.personalInfo?.fullName)return console.log("ğŸª Using personalInfo.fullName:",b.conductor.personalInfo.fullName),b.conductor.personalInfo.fullName;if(b.conductor.personalInfo?.firstName&&b.conductor.personalInfo?.lastName){const N=`${b.conductor.personalInfo.firstName} ${b.conductor.personalInfo.lastName}`;return console.log("ğŸª Using personalInfo firstName + lastName:",N),N}if(b.conductor.personalInfo?.name)return console.log("ğŸª Using personalInfo.name:",b.conductor.personalInfo.name),b.conductor.personalInfo.name;if(b.conductor.name)return console.log("ğŸª Using name:",b.conductor.name),b.conductor.name;if(b.conductor.personalInfo?.hebrewName)return console.log("ğŸª Using personalInfo.hebrewName:",b.conductor.personalInfo.hebrewName),b.conductor.personalInfo.hebrewName;if(b.conductor.displayName)return console.log("ğŸª Using displayName:",b.conductor.displayName),b.conductor.displayName}return console.log("ğŸª No conductor data found for available orchestra, returning default"),"×œ× ××•×’×“"})()})]})}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[b.level&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.level==="beginner"?"bg-green-100 text-green-800":b.level==="intermediate"?"bg-yellow-100 text-yellow-800":b.level==="advanced"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:b.level==="beginner"?"××ª×—×™×œ×™×":b.level==="intermediate"?"×‘×™× ×•× ×™":b.level==="advanced"?"××ª×§×“××™×":"××¢×•×¨×‘"}),b.gradeRequirements&&b.gradeRequirements.includes(v)&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:["××ª××™× ×œ×›×™×ª×” ",v]})]})]}),e.jsx("button",{onClick:()=>j(b._id),disabled:!A||h===b._id,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${A?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:h===b._id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"× ×¨×©×..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4"}),"×”×¨×©×"]})})]}),b.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:b.description}),p&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×”×ª× ×’×©×•×ª ×‘×œ×•×— ×–×× ×™×"})]}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:"×–×× ×™ ×”×—×–×¨×•×ª ××ª× ×’×©×™× ×¢× ×”×©×™×¢×•×¨ ×©×œ×š ×‘×™××™ ×©×œ×™×©×™ 14:30-15:15"})]}),E&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×”×ª×–××•×¨×ª ××œ××”"})]}),e.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"×›×œ ×”××§×•××•×ª ×‘×ª×–××•×¨×ª ×ª×¤×•×¡×™×"})]}),e.jsxs("div",{className:`mb-4 rounded-lg p-4 border ${p?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("h5",{className:`font-semibold mb-3 flex items-center gap-2 ${p?"text-red-900":"text-blue-900"}`,children:[e.jsx(ne,{className:`w-5 h-5 ${p?"text-red-600":"text-blue-600"}`}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª",p&&e.jsx("span",{className:"text-xs bg-red-200 text-red-800 px-2 py-1 rounded-full",children:"×”×ª× ×’×©×•×ª!"})]}),e.jsx("div",{className:`p-3 rounded-lg border shadow-sm ${p?"bg-red-100 border-red-200":"bg-white border-blue-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-medium ${p?"text-red-900":"text-blue-900"}`,children:b.rehearsalSchedule?.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:p?"text-red-600":"text-blue-600",children:"â€¢"}),e.jsx("span",{className:`font-medium ${p?"text-red-800":"text-blue-800"}`,children:b.rehearsalSchedule?`${b.rehearsalSchedule.startTime} - ${b.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:`flex items-center gap-1 ${p?"text-red-700":"text-blue-700"}`,children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:b.rehearsalSchedule?.location||b.location||"××•×œ× ×’×Ÿ"})]})]})})]}),b.requiredInstruments&&b.requiredInstruments.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"×›×œ×™× × ×“×¨×©×™×"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:b.requiredInstruments.map((N,S)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N===u?"bg-green-100 text-green-800 ring-1 ring-green-300":"bg-gray-100 text-gray-700"}`,children:N},S))})]}),b.capacity&&e.jsxs("div",{className:"text-sm text-gray-600",children:["×§×™×‘×•×œ×ª: ",b.currentMembers||0," / ",b.capacity," ×—×‘×¨×™×"]})]},b._id)})})]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"×ª×–××•×¨×•×ª ×•×”×¨×›×‘×™×"})}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>a("current"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="current"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"×”×¨×©××•×ª ×§×™×™××•×ª"]})}),e.jsx("button",{onClick:()=>a("manage"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="manage"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"×”×¨×©××” ×—×“×©×”"]})})]})]}),n==="current"?I():T(),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"×‘×˜×œ ×”×¨×©××” ×œ×ª×–××•×¨×ª"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×”×¨×©××” ×œ×ª×–××•×¨×ª ×–×•? ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"×‘×™×˜×•×œ"}),e.jsx("button",{onClick:()=>C(c),disabled:h===c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center gap-2",children:h===c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"××‘×˜×œ..."]}):"×‘×˜×œ ×”×¨×©××”"})]})]})})]})};function Ds(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function fr(...t){return s=>{let r=!1;const n=t.map(a=>{const l=Ds(a,s);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let a=0;a<n.length;a++){const l=n[a];typeof l=="function"?l():Ds(t[a],null)}}}}function K(...t){return d.useCallback(fr(...t),t)}function st(t){const s=Na(t),r=d.forwardRef((n,a)=>{const{children:l,...i}=n,o=d.Children.toArray(l),x=o.find(wa);if(x){const m=x.props.children,f=o.map(h=>h===x?d.Children.count(m)>1?d.Children.only(null):d.isValidElement(m)?m.props.children:null:h);return e.jsx(s,{...i,ref:a,children:d.isValidElement(m)?d.cloneElement(m,void 0,f):null})}return e.jsx(s,{...i,ref:a,children:l})});return r.displayName=`${t}.Slot`,r}var ya=st("Slot");function Na(t){const s=d.forwardRef((r,n)=>{const{children:a,...l}=r;if(d.isValidElement(a)){const i=Ca(a),o=Sa(l,a.props);return a.type!==d.Fragment&&(o.ref=n?fr(n,i):i),d.cloneElement(a,o)}return d.Children.count(a)>1?d.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var ja=Symbol("radix.slottable");function wa(t){return d.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ja}function Sa(t,s){const r={...s};for(const n in s){const a=t[n],l=s[n];/^on[A-Z]/.test(n)?a&&l?r[n]=(...o)=>{const x=l(...o);return a(...o),x}:a&&(r[n]=a):n==="style"?r[n]={...a,...l}:n==="className"&&(r[n]=[a,l].filter(Boolean).join(" "))}return{...t,...r}}function Ca(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const Ms=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,_s=da,Tt=(t,s)=>r=>{var n;if(s?.variants==null)return _s(t,r?.class,r?.className);const{variants:a,defaultVariants:l}=s,i=Object.keys(a).map(m=>{const f=r?.[m],h=l?.[m];if(f===null)return null;const g=Ms(f)||Ms(h);return a[m][g]}),o=r&&Object.entries(r).reduce((m,f)=>{let[h,g]=f;return g===void 0||(m[h]=g),m},{}),x=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((m,f)=>{let{class:h,className:g,...c}=f;return Object.entries(c).every(y=>{let[u,v]=y;return Array.isArray(v)?v.includes({...l,...o}[u]):{...l,...o}[u]===v})?[...m,h,g]:m},[]);return _s(t,i,x,r?.class,r?.className)},Ea=Tt("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),hs=d.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},l)=>{const i=n?ya:"button";return e.jsx(i,{className:Y(Ea({variant:s,size:r,className:t})),ref:l,...a})});hs.displayName="Button";const H=d.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:Y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));H.displayName="Input";var Ta=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],V=Ta.reduce((t,s)=>{const r=st(`Primitive.${s}`),n=d.forwardRef((a,l)=>{const{asChild:i,...o}=a,x=i?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(x,{...o,ref:l})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function Ia(t,s){t&&Ct.flushSync(()=>t.dispatchEvent(s))}var Pa="Label",xr=d.forwardRef((t,s)=>e.jsx(V.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));xr.displayName=Pa;var hr=xr;const Aa=Tt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),z=d.forwardRef(({className:t,...s},r)=>e.jsx(hr,{ref:r,className:Y(Aa(),t),...s}));z.displayName=hr.displayName;function Fs(t,[s,r]){return Math.min(r,Math.max(s,t))}function G(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return s?.(a)}}function gs(t,s=[]){let r=[];function n(l,i){const o=d.createContext(i),x=r.length;r=[...r,i];const m=h=>{const{scope:g,children:c,...y}=h,u=g?.[t]?.[x]||o,v=d.useMemo(()=>y,Object.values(y));return e.jsx(u.Provider,{value:v,children:c})};m.displayName=l+"Provider";function f(h,g){const c=g?.[t]?.[x]||o,y=d.useContext(c);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${l}\``)}return[m,f]}const a=()=>{const l=r.map(i=>d.createContext(i));return function(o){const x=o?.[t]||l;return d.useMemo(()=>({[`__scope${t}`]:{...o,[t]:x}}),[o,x])}};return a.scopeName=t,[n,Ra(a,...s)]}function Ra(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const i=n.reduce((o,{useScope:x,scopeName:m})=>{const h=x(l)[`__scope${m}`];return{...o,...h}},{});return d.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return r.scopeName=s.scopeName,r}function ka(t){const s=t+"CollectionProvider",[r,n]=gs(s),[a,l]=r(s,{collectionRef:{current:null},itemMap:new Map}),i=u=>{const{scope:v,children:w}=u,j=ve.useRef(null),C=ve.useRef(new Map).current;return e.jsx(a,{scope:v,itemMap:C,collectionRef:j,children:w})};i.displayName=s;const o=t+"CollectionSlot",x=st(o),m=ve.forwardRef((u,v)=>{const{scope:w,children:j}=u,C=l(o,w),I=K(v,C.collectionRef);return e.jsx(x,{ref:I,children:j})});m.displayName=o;const f=t+"CollectionItemSlot",h="data-radix-collection-item",g=st(f),c=ve.forwardRef((u,v)=>{const{scope:w,children:j,...C}=u,I=ve.useRef(null),T=K(v,I),b=l(f,w);return ve.useEffect(()=>(b.itemMap.set(I,{ref:I,...C}),()=>void b.itemMap.delete(I))),e.jsx(g,{[h]:"",ref:T,children:j})});c.displayName=f;function y(u){const v=l(t+"CollectionConsumer",u);return ve.useCallback(()=>{const j=v.collectionRef.current;if(!j)return[];const C=Array.from(j.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((b,p)=>C.indexOf(b.ref.current)-C.indexOf(p.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:m,ItemSlot:c},y,n]}var Oa=d.createContext(void 0);function La(t){const s=d.useContext(Oa);return t||s||"ltr"}function ke(t){const s=d.useRef(t);return d.useEffect(()=>{s.current=t}),d.useMemo(()=>(...r)=>s.current?.(...r),[])}function Da(t,s=globalThis?.document){const r=ke(t);d.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var Ma="DismissableLayer",Zt="dismissableLayer.update",_a="dismissableLayer.pointerDownOutside",Fa="dismissableLayer.focusOutside",$s,gr=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pr=d.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:i,onDismiss:o,...x}=t,m=d.useContext(gr),[f,h]=d.useState(null),g=f?.ownerDocument??globalThis?.document,[,c]=d.useState({}),y=K(s,p=>h(p)),u=Array.from(m.layers),[v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),w=u.indexOf(v),j=f?u.indexOf(f):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,I=j>=w,T=Wa(p=>{const E=p.target,A=[...m.branches].some(N=>N.contains(E));!I||A||(a?.(p),i?.(p),p.defaultPrevented||o?.())},g),b=Ha(p=>{const E=p.target;[...m.branches].some(N=>N.contains(E))||(l?.(p),i?.(p),p.defaultPrevented||o?.())},g);return Da(p=>{j===m.layers.size-1&&(n?.(p),!p.defaultPrevented&&o&&(p.preventDefault(),o()))},g),d.useEffect(()=>{if(f)return r&&(m.layersWithOutsidePointerEventsDisabled.size===0&&($s=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(f)),m.layers.add(f),Bs(),()=>{r&&m.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=$s)}},[f,g,r,m]),d.useEffect(()=>()=>{f&&(m.layers.delete(f),m.layersWithOutsidePointerEventsDisabled.delete(f),Bs())},[f,m]),d.useEffect(()=>{const p=()=>c({});return document.addEventListener(Zt,p),()=>document.removeEventListener(Zt,p)},[]),e.jsx(V.div,{...x,ref:y,style:{pointerEvents:C?I?"auto":"none":void 0,...t.style},onFocusCapture:G(t.onFocusCapture,b.onFocusCapture),onBlurCapture:G(t.onBlurCapture,b.onBlurCapture),onPointerDownCapture:G(t.onPointerDownCapture,T.onPointerDownCapture)})});pr.displayName=Ma;var $a="DismissableLayerBranch",Ba=d.forwardRef((t,s)=>{const r=d.useContext(gr),n=d.useRef(null),a=K(s,n);return d.useEffect(()=>{const l=n.current;if(l)return r.branches.add(l),()=>{r.branches.delete(l)}},[r.branches]),e.jsx(V.div,{...t,ref:a})});Ba.displayName=$a;function Wa(t,s=globalThis?.document){const r=ke(t),n=d.useRef(!1),a=d.useRef(()=>{});return d.useEffect(()=>{const l=o=>{if(o.target&&!n.current){let x=function(){br(_a,r,m,{discrete:!0})};const m={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=x,s.addEventListener("click",a.current,{once:!0})):x()}else s.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{s.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(i),s.removeEventListener("pointerdown",l),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function Ha(t,s=globalThis?.document){const r=ke(t),n=d.useRef(!1);return d.useEffect(()=>{const a=l=>{l.target&&!n.current&&br(Fa,r,{originalEvent:l},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Bs(){const t=new CustomEvent(Zt);document.dispatchEvent(t)}function br(t,s,r,{discrete:n}){const a=r.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?Ia(a,l):a.dispatchEvent(l)}var $t=0;function Va(){d.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Ws()),document.body.insertAdjacentElement("beforeend",t[1]??Ws()),$t++,()=>{$t===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),$t--}},[])}function Ws(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Bt="focusScope.autoFocusOnMount",Wt="focusScope.autoFocusOnUnmount",Hs={bubbles:!1,cancelable:!0},Ua="FocusScope",vr=d.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...i}=t,[o,x]=d.useState(null),m=ke(a),f=ke(l),h=d.useRef(null),g=K(s,u=>x(u)),c=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(n){let u=function(C){if(c.paused||!o)return;const I=C.target;o.contains(I)?h.current=I:ye(h.current,{select:!0})},v=function(C){if(c.paused||!o)return;const I=C.relatedTarget;I!==null&&(o.contains(I)||ye(h.current,{select:!0}))},w=function(C){if(document.activeElement===document.body)for(const T of C)T.removedNodes.length>0&&ye(o)};document.addEventListener("focusin",u),document.addEventListener("focusout",v);const j=new MutationObserver(w);return o&&j.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",u),document.removeEventListener("focusout",v),j.disconnect()}}},[n,o,c.paused]),d.useEffect(()=>{if(o){Us.add(c);const u=document.activeElement;if(!o.contains(u)){const w=new CustomEvent(Bt,Hs);o.addEventListener(Bt,m),o.dispatchEvent(w),w.defaultPrevented||(Ga(Xa(yr(o)),{select:!0}),document.activeElement===u&&ye(o))}return()=>{o.removeEventListener(Bt,m),setTimeout(()=>{const w=new CustomEvent(Wt,Hs);o.addEventListener(Wt,f),o.dispatchEvent(w),w.defaultPrevented||ye(u??document.body,{select:!0}),o.removeEventListener(Wt,f),Us.remove(c)},0)}}},[o,m,f,c]);const y=d.useCallback(u=>{if(!r&&!n||c.paused)return;const v=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,w=document.activeElement;if(v&&w){const j=u.currentTarget,[C,I]=za(j);C&&I?!u.shiftKey&&w===I?(u.preventDefault(),r&&ye(C,{select:!0})):u.shiftKey&&w===C&&(u.preventDefault(),r&&ye(I,{select:!0})):w===j&&u.preventDefault()}},[r,n,c.paused]);return e.jsx(V.div,{tabIndex:-1,...i,ref:g,onKeyDown:y})});vr.displayName=Ua;function Ga(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(ye(n,{select:s}),document.activeElement!==r)return}function za(t){const s=yr(t),r=Vs(s,t),n=Vs(s.reverse(),t);return[r,n]}function yr(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Vs(t,s){for(const r of t)if(!Ka(r,{upTo:s}))return r}function Ka(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Ya(t){return t instanceof HTMLInputElement&&"select"in t}function ye(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Ya(t)&&s&&t.select()}}var Us=qa();function qa(){let t=[];return{add(s){const r=t[0];s!==r&&r?.pause(),t=Gs(t,s),t.unshift(s)},remove(s){t=Gs(t,s),t[0]?.resume()}}}function Gs(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function Xa(t){return t.filter(s=>s.tagName!=="A")}var ee=globalThis?.document?d.useLayoutEffect:()=>{},Za=cr[" useId ".trim().toString()]||(()=>{}),Qa=0;function ps(t){const[s,r]=d.useState(Za());return ee(()=>{r(n=>n??String(Qa++))},[t]),s?`radix-${s}`:""}const Ja=["top","right","bottom","left"],rt=Math.min,Pe=Math.max,el={left:"right",right:"left",bottom:"top",top:"bottom"},tl={start:"end",end:"start"};function Qt(t,s,r){return Pe(t,rt(s,r))}function xe(t,s){return typeof t=="function"?t(s):t}function he(t){return t.split("-")[0]}function Ge(t){return t.split("-")[1]}function bs(t){return t==="x"?"y":"x"}function vs(t){return t==="y"?"height":"width"}const sl=new Set(["top","bottom"]);function ie(t){return sl.has(he(t))?"y":"x"}function ys(t){return bs(ie(t))}function rl(t,s,r){r===void 0&&(r=!1);const n=Ge(t),a=ys(t),l=vs(a);let i=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[l]>s.floating[l]&&(i=bt(i)),[i,bt(i)]}function nl(t){const s=bt(t);return[Jt(t),s,Jt(s)]}function Jt(t){return t.replace(/start|end/g,s=>tl[s])}const zs=["left","right"],Ks=["right","left"],al=["top","bottom"],ll=["bottom","top"];function ol(t,s,r){switch(t){case"top":case"bottom":return r?s?Ks:zs:s?zs:Ks;case"left":case"right":return s?al:ll;default:return[]}}function il(t,s,r,n){const a=Ge(t);let l=ol(he(t),r==="start",n);return a&&(l=l.map(i=>i+"-"+a),s&&(l=l.concat(l.map(Jt)))),l}function bt(t){return t.replace(/left|right|bottom|top/g,s=>el[s])}function cl(t){return{top:0,right:0,bottom:0,left:0,...t}}function Nr(t){return typeof t!="number"?cl(t):{top:t,right:t,bottom:t,left:t}}function vt(t){const{x:s,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function Ys(t,s,r){let{reference:n,floating:a}=t;const l=ie(s),i=ys(s),o=vs(i),x=he(s),m=l==="y",f=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,g=n[o]/2-a[o]/2;let c;switch(x){case"top":c={x:f,y:n.y-a.height};break;case"bottom":c={x:f,y:n.y+n.height};break;case"right":c={x:n.x+n.width,y:h};break;case"left":c={x:n.x-a.width,y:h};break;default:c={x:n.x,y:n.y}}switch(Ge(s)){case"start":c[i]-=g*(r&&m?-1:1);break;case"end":c[i]+=g*(r&&m?-1:1);break}return c}const dl=async(t,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:l=[],platform:i}=r,o=l.filter(Boolean),x=await(i.isRTL==null?void 0:i.isRTL(s));let m=await i.getElementRects({reference:t,floating:s,strategy:a}),{x:f,y:h}=Ys(m,n,x),g=n,c={},y=0;for(let u=0;u<o.length;u++){const{name:v,fn:w}=o[u],{x:j,y:C,data:I,reset:T}=await w({x:f,y:h,initialPlacement:n,placement:g,strategy:a,middlewareData:c,rects:m,platform:i,elements:{reference:t,floating:s}});f=j??f,h=C??h,c={...c,[v]:{...c[v],...I}},T&&y<=50&&(y++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(m=T.rects===!0?await i.getElementRects({reference:t,floating:s,strategy:a}):T.rects),{x:f,y:h}=Ys(m,g,x)),u=-1)}return{x:f,y:h,placement:g,strategy:a,middlewareData:c}};async function nt(t,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:l,rects:i,elements:o,strategy:x}=t,{boundary:m="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:g=!1,padding:c=0}=xe(s,t),y=Nr(c),v=o[g?h==="floating"?"reference":"floating":h],w=vt(await l.getClippingRect({element:(r=await(l.isElement==null?void 0:l.isElement(v)))==null||r?v:v.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(o.floating)),boundary:m,rootBoundary:f,strategy:x})),j=h==="floating"?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(o.floating)),I=await(l.isElement==null?void 0:l.isElement(C))?await(l.getScale==null?void 0:l.getScale(C))||{x:1,y:1}:{x:1,y:1},T=vt(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:j,offsetParent:C,strategy:x}):j);return{top:(w.top-T.top+y.top)/I.y,bottom:(T.bottom-w.bottom+y.bottom)/I.y,left:(w.left-T.left+y.left)/I.x,right:(T.right-w.right+y.right)/I.x}}const ul=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:n,placement:a,rects:l,platform:i,elements:o,middlewareData:x}=s,{element:m,padding:f=0}=xe(t,s)||{};if(m==null)return{};const h=Nr(f),g={x:r,y:n},c=ys(a),y=vs(c),u=await i.getDimensions(m),v=c==="y",w=v?"top":"left",j=v?"bottom":"right",C=v?"clientHeight":"clientWidth",I=l.reference[y]+l.reference[c]-g[c]-l.floating[y],T=g[c]-l.reference[c],b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(m));let p=b?b[C]:0;(!p||!await(i.isElement==null?void 0:i.isElement(b)))&&(p=o.floating[C]||l.floating[y]);const E=I/2-T/2,A=p/2-u[y]/2-1,N=rt(h[w],A),S=rt(h[j],A),P=N,R=p-u[y]-S,k=p/2-u[y]/2+E,M=Qt(P,k,R),O=!x.arrow&&Ge(a)!=null&&k!==M&&l.reference[y]/2-(k<P?N:S)-u[y]/2<0,_=O?k<P?k-P:k-R:0;return{[c]:g[c]+_,data:{[c]:M,centerOffset:k-M-_,...O&&{alignmentOffset:_}},reset:O}}}),ml=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,n;const{placement:a,middlewareData:l,rects:i,initialPlacement:o,platform:x,elements:m}=s,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:c="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:u=!0,...v}=xe(t,s);if((r=l.arrow)!=null&&r.alignmentOffset)return{};const w=he(a),j=ie(o),C=he(o)===o,I=await(x.isRTL==null?void 0:x.isRTL(m.floating)),T=g||(C||!u?[bt(o)]:nl(o)),b=y!=="none";!g&&b&&T.push(...il(o,u,y,I));const p=[o,...T],E=await nt(s,v),A=[];let N=((n=l.flip)==null?void 0:n.overflows)||[];if(f&&A.push(E[w]),h){const k=rl(a,i,I);A.push(E[k[0]],E[k[1]])}if(N=[...N,{placement:a,overflows:A}],!A.every(k=>k<=0)){var S,P;const k=(((S=l.flip)==null?void 0:S.index)||0)+1,M=p[k];if(M&&(!(h==="alignment"?j!==ie(M):!1)||N.every(D=>ie(D.placement)===j?D.overflows[0]>0:!0)))return{data:{index:k,overflows:N},reset:{placement:M}};let O=(P=N.filter(_=>_.overflows[0]<=0).sort((_,D)=>_.overflows[1]-D.overflows[1])[0])==null?void 0:P.placement;if(!O)switch(c){case"bestFit":{var R;const _=(R=N.filter(D=>{if(b){const F=ie(D.placement);return F===j||F==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(F=>F>0).reduce((F,Z)=>F+Z,0)]).sort((D,F)=>D[1]-F[1])[0])==null?void 0:R[0];_&&(O=_);break}case"initialPlacement":O=o;break}if(a!==O)return{reset:{placement:O}}}return{}}}};function qs(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function Xs(t){return Ja.some(s=>t[s]>=0)}const fl=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=xe(t,s);switch(n){case"referenceHidden":{const l=await nt(s,{...a,elementContext:"reference"}),i=qs(l,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Xs(i)}}}case"escaped":{const l=await nt(s,{...a,altBoundary:!0}),i=qs(l,r.floating);return{data:{escapedOffsets:i,escaped:Xs(i)}}}default:return{}}}}},jr=new Set(["left","top"]);async function xl(t,s){const{placement:r,platform:n,elements:a}=t,l=await(n.isRTL==null?void 0:n.isRTL(a.floating)),i=he(r),o=Ge(r),x=ie(r)==="y",m=jr.has(i)?-1:1,f=l&&x?-1:1,h=xe(s,t);let{mainAxis:g,crossAxis:c,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof y=="number"&&(c=o==="end"?y*-1:y),x?{x:c*f,y:g*m}:{x:g*m,y:c*f}}const hl=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,n;const{x:a,y:l,placement:i,middlewareData:o}=s,x=await xl(s,t);return i===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+x.x,y:l+x.y,data:{...x,placement:i}}}}},gl=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:l=!0,crossAxis:i=!1,limiter:o={fn:v=>{let{x:w,y:j}=v;return{x:w,y:j}}},...x}=xe(t,s),m={x:r,y:n},f=await nt(s,x),h=ie(he(a)),g=bs(h);let c=m[g],y=m[h];if(l){const v=g==="y"?"top":"left",w=g==="y"?"bottom":"right",j=c+f[v],C=c-f[w];c=Qt(j,c,C)}if(i){const v=h==="y"?"top":"left",w=h==="y"?"bottom":"right",j=y+f[v],C=y-f[w];y=Qt(j,y,C)}const u=o.fn({...s,[g]:c,[h]:y});return{...u,data:{x:u.x-r,y:u.y-n,enabled:{[g]:l,[h]:i}}}}}},pl=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:n,placement:a,rects:l,middlewareData:i}=s,{offset:o=0,mainAxis:x=!0,crossAxis:m=!0}=xe(t,s),f={x:r,y:n},h=ie(a),g=bs(h);let c=f[g],y=f[h];const u=xe(o,s),v=typeof u=="number"?{mainAxis:u,crossAxis:0}:{mainAxis:0,crossAxis:0,...u};if(x){const C=g==="y"?"height":"width",I=l.reference[g]-l.floating[C]+v.mainAxis,T=l.reference[g]+l.reference[C]-v.mainAxis;c<I?c=I:c>T&&(c=T)}if(m){var w,j;const C=g==="y"?"width":"height",I=jr.has(he(a)),T=l.reference[h]-l.floating[C]+(I&&((w=i.offset)==null?void 0:w[h])||0)+(I?0:v.crossAxis),b=l.reference[h]+l.reference[C]+(I?0:((j=i.offset)==null?void 0:j[h])||0)-(I?v.crossAxis:0);y<T?y=T:y>b&&(y=b)}return{[g]:c,[h]:y}}}},bl=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,n;const{placement:a,rects:l,platform:i,elements:o}=s,{apply:x=()=>{},...m}=xe(t,s),f=await nt(s,m),h=he(a),g=Ge(a),c=ie(a)==="y",{width:y,height:u}=l.floating;let v,w;h==="top"||h==="bottom"?(v=h,w=g===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(w=h,v=g==="end"?"top":"bottom");const j=u-f.top-f.bottom,C=y-f.left-f.right,I=rt(u-f[v],j),T=rt(y-f[w],C),b=!s.middlewareData.shift;let p=I,E=T;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(E=C),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(p=j),b&&!g){const N=Pe(f.left,0),S=Pe(f.right,0),P=Pe(f.top,0),R=Pe(f.bottom,0);c?E=y-2*(N!==0||S!==0?N+S:Pe(f.left,f.right)):p=u-2*(P!==0||R!==0?P+R:Pe(f.top,f.bottom))}await x({...s,availableWidth:E,availableHeight:p});const A=await i.getDimensions(o.floating);return y!==A.width||u!==A.height?{reset:{rects:!0}}:{}}}},es=Math.min,Be=Math.max,yt=Math.round,ot=Math.floor,ce=t=>({x:t,y:t});function It(){return typeof window<"u"}function ze(t){return wr(t)?(t.nodeName||"").toLowerCase():"#document"}function te(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function ue(t){var s;return(s=(wr(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function wr(t){return It()?t instanceof Node||t instanceof te(t).Node:!1}function ae(t){return It()?t instanceof Element||t instanceof te(t).Element:!1}function de(t){return It()?t instanceof HTMLElement||t instanceof te(t).HTMLElement:!1}function Zs(t){return!It()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof te(t).ShadowRoot}const vl=new Set(["inline","contents"]);function lt(t){const{overflow:s,overflowX:r,overflowY:n,display:a}=le(t);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!vl.has(a)}const yl=new Set(["table","td","th"]);function Nl(t){return yl.has(ze(t))}const jl=[":popover-open",":modal"];function Pt(t){return jl.some(s=>{try{return t.matches(s)}catch{return!1}})}const wl=["transform","translate","scale","rotate","perspective"],Sl=["transform","translate","scale","rotate","perspective","filter"],Cl=["paint","layout","strict","content"];function Ns(t){const s=js(),r=ae(t)?le(t):t;return wl.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||Sl.some(n=>(r.willChange||"").includes(n))||Cl.some(n=>(r.contain||"").includes(n))}function El(t){let s=we(t);for(;de(s)&&!Ue(s);){if(Ns(s))return s;if(Pt(s))return null;s=we(s)}return null}function js(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tl=new Set(["html","body","#document"]);function Ue(t){return Tl.has(ze(t))}function le(t){return te(t).getComputedStyle(t)}function At(t){return ae(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function we(t){if(ze(t)==="html")return t;const s=t.assignedSlot||t.parentNode||Zs(t)&&t.host||ue(t);return Zs(s)?s.host:s}function Sr(t){const s=we(t);return Ue(s)?t.ownerDocument?t.ownerDocument.body:t.body:de(s)&&lt(s)?s:Sr(s)}function at(t,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=Sr(t),l=a===((n=t.ownerDocument)==null?void 0:n.body),i=te(a);if(l){const o=ts(i);return s.concat(i,i.visualViewport||[],lt(a)?a:[],o&&r?at(o):[])}return s.concat(a,at(a,[],r))}function ts(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Cr(t){const s=le(t);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=de(t),l=a?t.offsetWidth:r,i=a?t.offsetHeight:n,o=yt(r)!==l||yt(n)!==i;return o&&(r=l,n=i),{width:r,height:n,$:o}}function ws(t){return ae(t)?t:t.contextElement}function We(t){const s=ws(t);if(!de(s))return ce(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:l}=Cr(s);let i=(l?yt(r.width):r.width)/n,o=(l?yt(r.height):r.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!o||!Number.isFinite(o))&&(o=1),{x:i,y:o}}const Il=ce(0);function Er(t){const s=te(t);return!js()||!s.visualViewport?Il:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function Pl(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==te(t)?!1:s}function Oe(t,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),l=ws(t);let i=ce(1);s&&(n?ae(n)&&(i=We(n)):i=We(t));const o=Pl(l,r,n)?Er(l):ce(0);let x=(a.left+o.x)/i.x,m=(a.top+o.y)/i.y,f=a.width/i.x,h=a.height/i.y;if(l){const g=te(l),c=n&&ae(n)?te(n):n;let y=g,u=ts(y);for(;u&&n&&c!==y;){const v=We(u),w=u.getBoundingClientRect(),j=le(u),C=w.left+(u.clientLeft+parseFloat(j.paddingLeft))*v.x,I=w.top+(u.clientTop+parseFloat(j.paddingTop))*v.y;x*=v.x,m*=v.y,f*=v.x,h*=v.y,x+=C,m+=I,y=te(u),u=ts(y)}}return vt({width:f,height:h,x,y:m})}function Rt(t,s){const r=At(t).scrollLeft;return s?s.left+r:Oe(ue(t)).left+r}function Tr(t,s){const r=t.getBoundingClientRect(),n=r.left+s.scrollLeft-Rt(t,r),a=r.top+s.scrollTop;return{x:n,y:a}}function Al(t){let{elements:s,rect:r,offsetParent:n,strategy:a}=t;const l=a==="fixed",i=ue(n),o=s?Pt(s.floating):!1;if(n===i||o&&l)return r;let x={scrollLeft:0,scrollTop:0},m=ce(1);const f=ce(0),h=de(n);if((h||!h&&!l)&&((ze(n)!=="body"||lt(i))&&(x=At(n)),de(n))){const c=Oe(n);m=We(n),f.x=c.x+n.clientLeft,f.y=c.y+n.clientTop}const g=i&&!h&&!l?Tr(i,x):ce(0);return{width:r.width*m.x,height:r.height*m.y,x:r.x*m.x-x.scrollLeft*m.x+f.x+g.x,y:r.y*m.y-x.scrollTop*m.y+f.y+g.y}}function Rl(t){return Array.from(t.getClientRects())}function kl(t){const s=ue(t),r=At(t),n=t.ownerDocument.body,a=Be(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),l=Be(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Rt(t);const o=-r.scrollTop;return le(n).direction==="rtl"&&(i+=Be(s.clientWidth,n.clientWidth)-a),{width:a,height:l,x:i,y:o}}const Qs=25;function Ol(t,s){const r=te(t),n=ue(t),a=r.visualViewport;let l=n.clientWidth,i=n.clientHeight,o=0,x=0;if(a){l=a.width,i=a.height;const f=js();(!f||f&&s==="fixed")&&(o=a.offsetLeft,x=a.offsetTop)}const m=Rt(n);if(m<=0){const f=n.ownerDocument,h=f.body,g=getComputedStyle(h),c=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(n.clientWidth-h.clientWidth-c);y<=Qs&&(l-=y)}else m<=Qs&&(l+=m);return{width:l,height:i,x:o,y:x}}const Ll=new Set(["absolute","fixed"]);function Dl(t,s){const r=Oe(t,!0,s==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,l=de(t)?We(t):ce(1),i=t.clientWidth*l.x,o=t.clientHeight*l.y,x=a*l.x,m=n*l.y;return{width:i,height:o,x,y:m}}function Js(t,s,r){let n;if(s==="viewport")n=Ol(t,r);else if(s==="document")n=kl(ue(t));else if(ae(s))n=Dl(s,r);else{const a=Er(t);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return vt(n)}function Ir(t,s){const r=we(t);return r===s||!ae(r)||Ue(r)?!1:le(r).position==="fixed"||Ir(r,s)}function Ml(t,s){const r=s.get(t);if(r)return r;let n=at(t,[],!1).filter(o=>ae(o)&&ze(o)!=="body"),a=null;const l=le(t).position==="fixed";let i=l?we(t):t;for(;ae(i)&&!Ue(i);){const o=le(i),x=Ns(i);!x&&o.position==="fixed"&&(a=null),(l?!x&&!a:!x&&o.position==="static"&&!!a&&Ll.has(a.position)||lt(i)&&!x&&Ir(t,i))?n=n.filter(f=>f!==i):a=o,i=we(i)}return s.set(t,n),n}function _l(t){let{element:s,boundary:r,rootBoundary:n,strategy:a}=t;const i=[...r==="clippingAncestors"?Pt(s)?[]:Ml(s,this._c):[].concat(r),n],o=i[0],x=i.reduce((m,f)=>{const h=Js(s,f,a);return m.top=Be(h.top,m.top),m.right=es(h.right,m.right),m.bottom=es(h.bottom,m.bottom),m.left=Be(h.left,m.left),m},Js(s,o,a));return{width:x.right-x.left,height:x.bottom-x.top,x:x.left,y:x.top}}function Fl(t){const{width:s,height:r}=Cr(t);return{width:s,height:r}}function $l(t,s,r){const n=de(s),a=ue(s),l=r==="fixed",i=Oe(t,!0,l,s);let o={scrollLeft:0,scrollTop:0};const x=ce(0);function m(){x.x=Rt(a)}if(n||!n&&!l)if((ze(s)!=="body"||lt(a))&&(o=At(s)),n){const c=Oe(s,!0,l,s);x.x=c.x+s.clientLeft,x.y=c.y+s.clientTop}else a&&m();l&&!n&&a&&m();const f=a&&!n&&!l?Tr(a,o):ce(0),h=i.left+o.scrollLeft-x.x-f.x,g=i.top+o.scrollTop-x.y-f.y;return{x:h,y:g,width:i.width,height:i.height}}function Ht(t){return le(t).position==="static"}function er(t,s){if(!de(t)||le(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return ue(t)===r&&(r=r.ownerDocument.body),r}function Pr(t,s){const r=te(t);if(Pt(t))return r;if(!de(t)){let a=we(t);for(;a&&!Ue(a);){if(ae(a)&&!Ht(a))return a;a=we(a)}return r}let n=er(t,s);for(;n&&Nl(n)&&Ht(n);)n=er(n,s);return n&&Ue(n)&&Ht(n)&&!Ns(n)?r:n||El(t)||r}const Bl=async function(t){const s=this.getOffsetParent||Pr,r=this.getDimensions,n=await r(t.floating);return{reference:$l(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Wl(t){return le(t).direction==="rtl"}const Hl={convertOffsetParentRelativeRectToViewportRelativeRect:Al,getDocumentElement:ue,getClippingRect:_l,getOffsetParent:Pr,getElementRects:Bl,getClientRects:Rl,getDimensions:Fl,getScale:We,isElement:ae,isRTL:Wl};function Ar(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function Vl(t,s){let r=null,n;const a=ue(t);function l(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function i(o,x){o===void 0&&(o=!1),x===void 0&&(x=1),l();const m=t.getBoundingClientRect(),{left:f,top:h,width:g,height:c}=m;if(o||s(),!g||!c)return;const y=ot(h),u=ot(a.clientWidth-(f+g)),v=ot(a.clientHeight-(h+c)),w=ot(f),C={rootMargin:-y+"px "+-u+"px "+-v+"px "+-w+"px",threshold:Be(0,es(1,x))||1};let I=!0;function T(b){const p=b[0].intersectionRatio;if(p!==x){if(!I)return i();p?i(!1,p):n=setTimeout(()=>{i(!1,1e-7)},1e3)}p===1&&!Ar(m,t.getBoundingClientRect())&&i(),I=!1}try{r=new IntersectionObserver(T,{...C,root:a.ownerDocument})}catch{r=new IntersectionObserver(T,C)}r.observe(t)}return i(!0),l}function Ul(t,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:x=!1}=n,m=ws(t),f=a||l?[...m?at(m):[],...at(s)]:[];f.forEach(w=>{a&&w.addEventListener("scroll",r,{passive:!0}),l&&w.addEventListener("resize",r)});const h=m&&o?Vl(m,r):null;let g=-1,c=null;i&&(c=new ResizeObserver(w=>{let[j]=w;j&&j.target===m&&c&&(c.unobserve(s),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=c)==null||C.observe(s)})),r()}),m&&!x&&c.observe(m),c.observe(s));let y,u=x?Oe(t):null;x&&v();function v(){const w=Oe(t);u&&!Ar(u,w)&&r(),u=w,y=requestAnimationFrame(v)}return r(),()=>{var w;f.forEach(j=>{a&&j.removeEventListener("scroll",r),l&&j.removeEventListener("resize",r)}),h?.(),(w=c)==null||w.disconnect(),c=null,x&&cancelAnimationFrame(y)}}const Gl=hl,zl=gl,Kl=ml,Yl=bl,ql=fl,tr=ul,Xl=pl,Zl=(t,s,r)=>{const n=new Map,a={platform:Hl,...r},l={...a.platform,_c:n};return dl(t,s,{...a,platform:l})};var Ql=typeof document<"u",Jl=function(){},ft=Ql?d.useLayoutEffect:Jl;function Nt(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,n,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!Nt(t[n],s[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const l=a[n];if(!(l==="_owner"&&t.$$typeof)&&!Nt(t[l],s[l]))return!1}return!0}return t!==t&&s!==s}function Rr(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function sr(t,s){const r=Rr(t);return Math.round(s*r)/r}function Vt(t){const s=d.useRef(t);return ft(()=>{s.current=t}),s}function eo(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:l,floating:i}={},transform:o=!0,whileElementsMounted:x,open:m}=t,[f,h]=d.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[g,c]=d.useState(n);Nt(g,n)||c(n);const[y,u]=d.useState(null),[v,w]=d.useState(null),j=d.useCallback(D=>{D!==b.current&&(b.current=D,u(D))},[]),C=d.useCallback(D=>{D!==p.current&&(p.current=D,w(D))},[]),I=l||y,T=i||v,b=d.useRef(null),p=d.useRef(null),E=d.useRef(f),A=x!=null,N=Vt(x),S=Vt(a),P=Vt(m),R=d.useCallback(()=>{if(!b.current||!p.current)return;const D={placement:s,strategy:r,middleware:g};S.current&&(D.platform=S.current),Zl(b.current,p.current,D).then(F=>{const Z={...F,isPositioned:P.current!==!1};k.current&&!Nt(E.current,Z)&&(E.current=Z,Ct.flushSync(()=>{h(Z)}))})},[g,s,r,S,P]);ft(()=>{m===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[m]);const k=d.useRef(!1);ft(()=>(k.current=!0,()=>{k.current=!1}),[]),ft(()=>{if(I&&(b.current=I),T&&(p.current=T),I&&T){if(N.current)return N.current(I,T,R);R()}},[I,T,R,N,A]);const M=d.useMemo(()=>({reference:b,floating:p,setReference:j,setFloating:C}),[j,C]),O=d.useMemo(()=>({reference:I,floating:T}),[I,T]),_=d.useMemo(()=>{const D={position:r,left:0,top:0};if(!O.floating)return D;const F=sr(O.floating,f.x),Z=sr(O.floating,f.y);return o?{...D,transform:"translate("+F+"px, "+Z+"px)",...Rr(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:F,top:Z}},[r,o,O.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:R,refs:M,elements:O,floatingStyles:_}),[f,R,M,O,_])}const to=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&s(n)?n.current!=null?tr({element:n.current,padding:a}).fn(r):{}:n?tr({element:n,padding:a}).fn(r):{}}}},so=(t,s)=>({...Gl(t),options:[t,s]}),ro=(t,s)=>({...zl(t),options:[t,s]}),no=(t,s)=>({...Xl(t),options:[t,s]}),ao=(t,s)=>({...Kl(t),options:[t,s]}),lo=(t,s)=>({...Yl(t),options:[t,s]}),oo=(t,s)=>({...ql(t),options:[t,s]}),io=(t,s)=>({...to(t),options:[t,s]});var co="Arrow",kr=d.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...l}=t;return e.jsx(V.svg,{...l,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});kr.displayName=co;var uo=kr;function mo(t){const[s,r]=d.useState(void 0);return ee(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let i,o;if("borderBoxSize"in l){const x=l.borderBoxSize,m=Array.isArray(x)?x[0]:x;i=m.inlineSize,o=m.blockSize}else i=t.offsetWidth,o=t.offsetHeight;r({width:i,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var Ss="Popper",[Or,Lr]=gs(Ss),[fo,Dr]=Or(Ss),Mr=t=>{const{__scopePopper:s,children:r}=t,[n,a]=d.useState(null);return e.jsx(fo,{scope:s,anchor:n,onAnchorChange:a,children:r})};Mr.displayName=Ss;var _r="PopperAnchor",Fr=d.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,l=Dr(_r,r),i=d.useRef(null),o=K(s,i),x=d.useRef(null);return d.useEffect(()=>{const m=x.current;x.current=n?.current||i.current,m!==x.current&&l.onAnchorChange(x.current)}),n?null:e.jsx(V.div,{...a,ref:o})});Fr.displayName=_r;var Cs="PopperContent",[xo,ho]=Or(Cs),$r=d.forwardRef((t,s)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:l="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:x=!0,collisionBoundary:m=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:g=!1,updatePositionStrategy:c="optimized",onPlaced:y,...u}=t,v=Dr(Cs,r),[w,j]=d.useState(null),C=K(s,L=>j(L)),[I,T]=d.useState(null),b=mo(I),p=b?.width??0,E=b?.height??0,A=n+(l!=="center"?"-"+l:""),N=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},S=Array.isArray(m)?m:[m],P=S.length>0,R={padding:N,boundary:S.filter(po),altBoundary:P},{refs:k,floatingStyles:M,placement:O,isPositioned:_,middlewareData:D}=eo({strategy:"fixed",placement:A,whileElementsMounted:(...L)=>Ul(...L,{animationFrame:c==="always"}),elements:{reference:v.anchor},middleware:[so({mainAxis:a+E,alignmentAxis:i}),x&&ro({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?no():void 0,...R}),x&&ao({...R}),lo({...R,apply:({elements:L,rects:W,availableWidth:q,availableHeight:$})=>{const{width:B,height:U}=W.reference,se=L.floating.style;se.setProperty("--radix-popper-available-width",`${q}px`),se.setProperty("--radix-popper-available-height",`${$}px`),se.setProperty("--radix-popper-anchor-width",`${B}px`),se.setProperty("--radix-popper-anchor-height",`${U}px`)}}),I&&io({element:I,padding:o}),bo({arrowWidth:p,arrowHeight:E}),g&&oo({strategy:"referenceHidden",...R})]}),[F,Z]=Hr(O),Ee=ke(y);ee(()=>{_&&Ee?.()},[_,Ee]);const Ye=D.arrow?.x,qe=D.arrow?.y,ge=D.arrow?.centerOffset!==0,[Me,Te]=d.useState();return ee(()=>{w&&Te(window.getComputedStyle(w).zIndex)},[w]),e.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:_?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[D.transformOrigin?.x,D.transformOrigin?.y].join(" "),...D.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(xo,{scope:r,placedSide:F,onArrowChange:T,arrowX:Ye,arrowY:qe,shouldHideArrow:ge,children:e.jsx(V.div,{"data-side":F,"data-align":Z,...u,ref:C,style:{...u.style,animation:_?void 0:"none"}})})})});$r.displayName=Cs;var Br="PopperArrow",go={top:"bottom",right:"left",bottom:"top",left:"right"},Wr=d.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,l=ho(Br,n),i=go[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(uo,{...a,ref:r,style:{...a.style,display:"block"}})})});Wr.displayName=Br;function po(t){return t!==null}var bo=t=>({name:"transformOrigin",options:t,fn(s){const{placement:r,rects:n,middlewareData:a}=s,i=a.arrow?.centerOffset!==0,o=i?0:t.arrowWidth,x=i?0:t.arrowHeight,[m,f]=Hr(r),h={start:"0%",center:"50%",end:"100%"}[f],g=(a.arrow?.x??0)+o/2,c=(a.arrow?.y??0)+x/2;let y="",u="";return m==="bottom"?(y=i?h:`${g}px`,u=`${-x}px`):m==="top"?(y=i?h:`${g}px`,u=`${n.floating.height+x}px`):m==="right"?(y=`${-x}px`,u=i?h:`${c}px`):m==="left"&&(y=`${n.floating.width+x}px`,u=i?h:`${c}px`),{data:{x:y,y:u}}}});function Hr(t){const[s,r="center"]=t.split("-");return[s,r]}var vo=Mr,yo=Fr,No=$r,jo=Wr,wo="Portal",Vr=d.forwardRef((t,s)=>{const{container:r,...n}=t,[a,l]=d.useState(!1);ee(()=>l(!0),[]);const i=r||a&&globalThis?.document?.body;return i?Bn.createPortal(e.jsx(V.div,{...n,ref:s}),i):null});Vr.displayName=wo;var So=cr[" useInsertionEffect ".trim().toString()]||ee;function rr({prop:t,defaultProp:s,onChange:r=()=>{},caller:n}){const[a,l,i]=Co({defaultProp:s,onChange:r}),o=t!==void 0,x=o?t:a;{const f=d.useRef(t!==void 0);d.useEffect(()=>{const h=f.current;h!==o&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=o},[o,n])}const m=d.useCallback(f=>{if(o){const h=Eo(f)?f(t):f;h!==t&&i.current?.(h)}else l(f)},[o,t,l,i]);return[x,m]}function Co({defaultProp:t,onChange:s}){const[r,n]=d.useState(t),a=d.useRef(r),l=d.useRef(s);return So(()=>{l.current=s},[s]),d.useEffect(()=>{a.current!==r&&(l.current?.(r),a.current=r)},[r,a]),[r,n,l]}function Eo(t){return typeof t=="function"}function To(t){const s=d.useRef({value:t,previous:t});return d.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Ur=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Io="VisuallyHidden",Po=d.forwardRef((t,s)=>e.jsx(V.span,{...t,ref:s,style:{...Ur,...t.style}}));Po.displayName=Io;var Ao=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},_e=new WeakMap,it=new WeakMap,ct={},Ut=0,Gr=function(t){return t&&(t.host||Gr(t.parentNode))},Ro=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=Gr(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},ko=function(t,s,r,n){var a=Ro(s,Array.isArray(t)?t:[t]);ct[r]||(ct[r]=new WeakMap);var l=ct[r],i=[],o=new Set,x=new Set(a),m=function(h){!h||o.has(h)||(o.add(h),m(h.parentNode))};a.forEach(m);var f=function(h){!h||x.has(h)||Array.prototype.forEach.call(h.children,function(g){if(o.has(g))f(g);else try{var c=g.getAttribute(n),y=c!==null&&c!=="false",u=(_e.get(g)||0)+1,v=(l.get(g)||0)+1;_e.set(g,u),l.set(g,v),i.push(g),u===1&&y&&it.set(g,!0),v===1&&g.setAttribute(r,"true"),y||g.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return f(s),o.clear(),Ut++,function(){i.forEach(function(h){var g=_e.get(h)-1,c=l.get(h)-1;_e.set(h,g),l.set(h,c),g||(it.has(h)||h.removeAttribute(n),it.delete(h)),c||h.removeAttribute(r)}),Ut--,Ut||(_e=new WeakMap,_e=new WeakMap,it=new WeakMap,ct={})}},Oo=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=Ao(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),ko(n,a,r,"aria-hidden")):function(){return null}},oe=function(){return oe=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},oe.apply(this,arguments)};function zr(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function Lo(t,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,l;n<a;n++)(l||!(n in s))&&(l||(l=Array.prototype.slice.call(s,0,n)),l[n]=s[n]);return t.concat(l||Array.prototype.slice.call(s))}var xt="right-scroll-bar-position",ht="width-before-scroll-bar",Do="with-scroll-bars-hidden",Mo="--removed-body-scroll-bar-size";function Gt(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function _o(t,s){var r=d.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var Fo=typeof window<"u"?d.useLayoutEffect:d.useEffect,nr=new WeakMap;function $o(t,s){var r=_o(null,function(n){return t.forEach(function(a){return Gt(a,n)})});return Fo(function(){var n=nr.get(r);if(n){var a=new Set(n),l=new Set(t),i=r.current;a.forEach(function(o){l.has(o)||Gt(o,null)}),l.forEach(function(o){a.has(o)||Gt(o,i)})}nr.set(r,t)},[t]),r}function Bo(t){return t}function Wo(t,s){s===void 0&&(s=Bo);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(l){var i=s(l,n);return r.push(i),function(){r=r.filter(function(o){return o!==i})}},assignSyncMedium:function(l){for(n=!0;r.length;){var i=r;r=[],i.forEach(l)}r={push:function(o){return l(o)},filter:function(){return r}}},assignMedium:function(l){n=!0;var i=[];if(r.length){var o=r;r=[],o.forEach(l),i=r}var x=function(){var f=i;i=[],f.forEach(l)},m=function(){return Promise.resolve().then(x)};m(),r={push:function(f){i.push(f),m()},filter:function(f){return i=i.filter(f),r}}}};return a}function Ho(t){t===void 0&&(t={});var s=Wo(null);return s.options=oe({async:!0,ssr:!1},t),s}var Kr=function(t){var s=t.sideCar,r=zr(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return d.createElement(n,oe({},r))};Kr.isSideCarExport=!0;function Vo(t,s){return t.useMedium(s),Kr}var Yr=Ho(),zt=function(){},kt=d.forwardRef(function(t,s){var r=d.useRef(null),n=d.useState({onScrollCapture:zt,onWheelCapture:zt,onTouchMoveCapture:zt}),a=n[0],l=n[1],i=t.forwardProps,o=t.children,x=t.className,m=t.removeScrollBar,f=t.enabled,h=t.shards,g=t.sideCar,c=t.noRelative,y=t.noIsolation,u=t.inert,v=t.allowPinchZoom,w=t.as,j=w===void 0?"div":w,C=t.gapMode,I=zr(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=g,b=$o([r,s]),p=oe(oe({},I),a);return d.createElement(d.Fragment,null,f&&d.createElement(T,{sideCar:Yr,removeScrollBar:m,shards:h,noRelative:c,noIsolation:y,inert:u,setCallbacks:l,allowPinchZoom:!!v,lockRef:r,gapMode:C}),i?d.cloneElement(d.Children.only(o),oe(oe({},p),{ref:b})):d.createElement(j,oe({},p,{className:x,ref:b}),o))});kt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kt.classNames={fullWidth:ht,zeroRight:xt};var Uo=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Go(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=Uo();return s&&t.setAttribute("nonce",s),t}function zo(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function Ko(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var Yo=function(){var t=0,s=null;return{add:function(r){t==0&&(s=Go())&&(zo(s,r),Ko(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},qo=function(){var t=Yo();return function(s,r){d.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},qr=function(){var t=qo(),s=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return s},Xo={left:0,top:0,right:0,gap:0},Kt=function(t){return parseInt(t||"",10)||0},Zo=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[Kt(r),Kt(n),Kt(a)]},Qo=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Xo;var s=Zo(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},Jo=qr(),He="data-scroll-locked",ei=function(t,s,r,n){var a=t.left,l=t.top,i=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(Do,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(He,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xt,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(ht,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(xt," .").concat(xt,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ht," .").concat(ht,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(He,`] {
    `).concat(Mo,": ").concat(o,`px;
  }
`)},ar=function(){var t=parseInt(document.body.getAttribute(He)||"0",10);return isFinite(t)?t:0},ti=function(){d.useEffect(function(){return document.body.setAttribute(He,(ar()+1).toString()),function(){var t=ar()-1;t<=0?document.body.removeAttribute(He):document.body.setAttribute(He,t.toString())}},[])},si=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;ti();var l=d.useMemo(function(){return Qo(a)},[a]);return d.createElement(Jo,{styles:ei(l,!s,a,r?"":"!important")})},ss=!1;if(typeof window<"u")try{var dt=Object.defineProperty({},"passive",{get:function(){return ss=!0,!0}});window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{ss=!1}var Fe=ss?{passive:!1}:!1,ri=function(t){return t.tagName==="TEXTAREA"},Xr=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!ri(t)&&r[s]==="visible")},ni=function(t){return Xr(t,"overflowY")},ai=function(t){return Xr(t,"overflowX")},lr=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=Zr(t,n);if(a){var l=Qr(t,n),i=l[1],o=l[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},li=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},oi=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},Zr=function(t,s){return t==="v"?ni(s):ai(s)},Qr=function(t,s){return t==="v"?li(s):oi(s)},ii=function(t,s){return t==="h"&&s==="rtl"?-1:1},ci=function(t,s,r,n,a){var l=ii(t,window.getComputedStyle(s).direction),i=l*n,o=r.target,x=s.contains(o),m=!1,f=i>0,h=0,g=0;do{if(!o)break;var c=Qr(t,o),y=c[0],u=c[1],v=c[2],w=u-v-l*y;(y||w)&&Zr(t,o)&&(h+=w,g+=y);var j=o.parentNode;o=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!x&&o!==document.body||x&&(s.contains(o)||s===o));return(f&&(Math.abs(h)<1||!a)||!f&&(Math.abs(g)<1||!a))&&(m=!0),m},ut=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},or=function(t){return[t.deltaX,t.deltaY]},ir=function(t){return t&&"current"in t?t.current:t},di=function(t,s){return t[0]===s[0]&&t[1]===s[1]},ui=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},mi=0,$e=[];function fi(t){var s=d.useRef([]),r=d.useRef([0,0]),n=d.useRef(),a=d.useState(mi++)[0],l=d.useState(qr)[0],i=d.useRef(t);d.useEffect(function(){i.current=t},[t]),d.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var u=Lo([t.lockRef.current],(t.shards||[]).map(ir),!0).filter(Boolean);return u.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),u.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=d.useCallback(function(u,v){if("touches"in u&&u.touches.length===2||u.type==="wheel"&&u.ctrlKey)return!i.current.allowPinchZoom;var w=ut(u),j=r.current,C="deltaX"in u?u.deltaX:j[0]-w[0],I="deltaY"in u?u.deltaY:j[1]-w[1],T,b=u.target,p=Math.abs(C)>Math.abs(I)?"h":"v";if("touches"in u&&p==="h"&&b.type==="range")return!1;var E=lr(p,b);if(!E)return!0;if(E?T=p:(T=p==="v"?"h":"v",E=lr(p,b)),!E)return!1;if(!n.current&&"changedTouches"in u&&(C||I)&&(n.current=T),!T)return!0;var A=n.current||T;return ci(A,v,u,A==="h"?C:I,!0)},[]),x=d.useCallback(function(u){var v=u;if(!(!$e.length||$e[$e.length-1]!==l)){var w="deltaY"in v?or(v):ut(v),j=s.current.filter(function(T){return T.name===v.type&&(T.target===v.target||v.target===T.shadowParent)&&di(T.delta,w)})[0];if(j&&j.should){v.cancelable&&v.preventDefault();return}if(!j){var C=(i.current.shards||[]).map(ir).filter(Boolean).filter(function(T){return T.contains(v.target)}),I=C.length>0?o(v,C[0]):!i.current.noIsolation;I&&v.cancelable&&v.preventDefault()}}},[]),m=d.useCallback(function(u,v,w,j){var C={name:u,delta:v,target:w,should:j,shadowParent:xi(w)};s.current.push(C),setTimeout(function(){s.current=s.current.filter(function(I){return I!==C})},1)},[]),f=d.useCallback(function(u){r.current=ut(u),n.current=void 0},[]),h=d.useCallback(function(u){m(u.type,or(u),u.target,o(u,t.lockRef.current))},[]),g=d.useCallback(function(u){m(u.type,ut(u),u.target,o(u,t.lockRef.current))},[]);d.useEffect(function(){return $e.push(l),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",x,Fe),document.addEventListener("touchmove",x,Fe),document.addEventListener("touchstart",f,Fe),function(){$e=$e.filter(function(u){return u!==l}),document.removeEventListener("wheel",x,Fe),document.removeEventListener("touchmove",x,Fe),document.removeEventListener("touchstart",f,Fe)}},[]);var c=t.removeScrollBar,y=t.inert;return d.createElement(d.Fragment,null,y?d.createElement(l,{styles:ui(a)}):null,c?d.createElement(si,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function xi(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const hi=Vo(Yr,fi);var Jr=d.forwardRef(function(t,s){return d.createElement(kt,oe({},t,{ref:s,sideCar:hi}))});Jr.classNames=kt.classNames;var gi=[" ","Enter","ArrowUp","ArrowDown"],pi=[" ","Enter"],Le="Select",[Ot,Lt,bi]=ka(Le),[Ke,xc]=gs(Le,[bi,Lr]),Dt=Lr(),[vi,Se]=Ke(Le),[yi,Ni]=Ke(Le),en=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:l,value:i,defaultValue:o,onValueChange:x,dir:m,name:f,autoComplete:h,disabled:g,required:c,form:y}=t,u=Dt(s),[v,w]=d.useState(null),[j,C]=d.useState(null),[I,T]=d.useState(!1),b=La(m),[p,E]=rr({prop:n,defaultProp:a??!1,onChange:l,caller:Le}),[A,N]=rr({prop:i,defaultProp:o,onChange:x,caller:Le}),S=d.useRef(null),P=v?y||!!v.closest("form"):!0,[R,k]=d.useState(new Set),M=Array.from(R).map(O=>O.props.value).join(";");return e.jsx(vo,{...u,children:e.jsxs(vi,{required:c,scope:s,trigger:v,onTriggerChange:w,valueNode:j,onValueNodeChange:C,valueNodeHasChildren:I,onValueNodeHasChildrenChange:T,contentId:ps(),value:A,onValueChange:N,open:p,onOpenChange:E,dir:b,triggerPointerDownPosRef:S,disabled:g,children:[e.jsx(Ot.Provider,{scope:s,children:e.jsx(yi,{scope:t.__scopeSelect,onNativeOptionAdd:d.useCallback(O=>{k(_=>new Set(_).add(O))},[]),onNativeOptionRemove:d.useCallback(O=>{k(_=>{const D=new Set(_);return D.delete(O),D})},[]),children:r})}),P?e.jsxs(Cn,{"aria-hidden":!0,required:c,tabIndex:-1,name:f,autoComplete:h,value:A,onChange:O=>N(O.target.value),disabled:g,form:y,children:[A===void 0?e.jsx("option",{value:""}):null,Array.from(R)]},M):null]})})};en.displayName=Le;var tn="SelectTrigger",sn=d.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,l=Dt(r),i=Se(tn,r),o=i.disabled||n,x=K(s,i.onTriggerChange),m=Lt(r),f=d.useRef("touch"),[h,g,c]=Tn(u=>{const v=m().filter(C=>!C.disabled),w=v.find(C=>C.value===i.value),j=In(v,u,w);j!==void 0&&i.onValueChange(j.value)}),y=u=>{o||(i.onOpenChange(!0),c()),u&&(i.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(yo,{asChild:!0,...l,children:e.jsx(V.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":En(i.value)?"":void 0,...a,ref:x,onClick:G(a.onClick,u=>{u.currentTarget.focus(),f.current!=="mouse"&&y(u)}),onPointerDown:G(a.onPointerDown,u=>{f.current=u.pointerType;const v=u.target;v.hasPointerCapture(u.pointerId)&&v.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(y(u),u.preventDefault())}),onKeyDown:G(a.onKeyDown,u=>{const v=h.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&g(u.key),!(v&&u.key===" ")&&gi.includes(u.key)&&(y(),u.preventDefault())})})})});sn.displayName=tn;var rn="SelectValue",nn=d.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,children:l,placeholder:i="",...o}=t,x=Se(rn,r),{onValueNodeHasChildrenChange:m}=x,f=l!==void 0,h=K(s,x.onValueNodeChange);return ee(()=>{m(f)},[m,f]),e.jsx(V.span,{...o,ref:h,style:{pointerEvents:"none"},children:En(x.value)?e.jsx(e.Fragment,{children:i}):l})});nn.displayName=rn;var ji="SelectIcon",an=d.forwardRef((t,s)=>{const{__scopeSelect:r,children:n,...a}=t;return e.jsx(V.span,{"aria-hidden":!0,...a,ref:s,children:n||"â–¼"})});an.displayName=ji;var wi="SelectPortal",ln=t=>e.jsx(Vr,{asChild:!0,...t});ln.displayName=wi;var De="SelectContent",on=d.forwardRef((t,s)=>{const r=Se(De,t.__scopeSelect),[n,a]=d.useState();if(ee(()=>{a(new DocumentFragment)},[]),!r.open){const l=n;return l?Ct.createPortal(e.jsx(cn,{scope:t.__scopeSelect,children:e.jsx(Ot.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(dn,{...t,ref:s})});on.displayName=De;var re=10,[cn,Ce]=Ke(De),Si="SelectContentImpl",Ci=st("SelectContent.RemoveScroll"),dn=d.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:l,onPointerDownOutside:i,side:o,sideOffset:x,align:m,alignOffset:f,arrowPadding:h,collisionBoundary:g,collisionPadding:c,sticky:y,hideWhenDetached:u,avoidCollisions:v,...w}=t,j=Se(De,r),[C,I]=d.useState(null),[T,b]=d.useState(null),p=K(s,L=>I(L)),[E,A]=d.useState(null),[N,S]=d.useState(null),P=Lt(r),[R,k]=d.useState(!1),M=d.useRef(!1);d.useEffect(()=>{if(C)return Oo(C)},[C]),Va();const O=d.useCallback(L=>{const[W,...q]=P().map(U=>U.ref.current),[$]=q.slice(-1),B=document.activeElement;for(const U of L)if(U===B||(U?.scrollIntoView({block:"nearest"}),U===W&&T&&(T.scrollTop=0),U===$&&T&&(T.scrollTop=T.scrollHeight),U?.focus(),document.activeElement!==B))return},[P,T]),_=d.useCallback(()=>O([E,C]),[O,E,C]);d.useEffect(()=>{R&&_()},[R,_]);const{onOpenChange:D,triggerPointerDownPosRef:F}=j;d.useEffect(()=>{if(C){let L={x:0,y:0};const W=$=>{L={x:Math.abs(Math.round($.pageX)-(F.current?.x??0)),y:Math.abs(Math.round($.pageY)-(F.current?.y??0))}},q=$=>{L.x<=10&&L.y<=10?$.preventDefault():C.contains($.target)||D(!1),document.removeEventListener("pointermove",W),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",q,{capture:!0})}}},[C,D,F]),d.useEffect(()=>{const L=()=>D(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[D]);const[Z,Ee]=Tn(L=>{const W=P().filter(B=>!B.disabled),q=W.find(B=>B.ref.current===document.activeElement),$=In(W,L,q);$&&setTimeout(()=>$.ref.current.focus())}),Ye=d.useCallback((L,W,q)=>{const $=!M.current&&!q;(j.value!==void 0&&j.value===W||$)&&(A(L),$&&(M.current=!0))},[j.value]),qe=d.useCallback(()=>C?.focus(),[C]),ge=d.useCallback((L,W,q)=>{const $=!M.current&&!q;(j.value!==void 0&&j.value===W||$)&&S(L)},[j.value]),Me=n==="popper"?rs:un,Te=Me===rs?{side:o,sideOffset:x,align:m,alignOffset:f,arrowPadding:h,collisionBoundary:g,collisionPadding:c,sticky:y,hideWhenDetached:u,avoidCollisions:v}:{};return e.jsx(cn,{scope:r,content:C,viewport:T,onViewportChange:b,itemRefCallback:Ye,selectedItem:E,onItemLeave:qe,itemTextRefCallback:ge,focusSelectedItem:_,selectedItemText:N,position:n,isPositioned:R,searchRef:Z,children:e.jsx(Jr,{as:Ci,allowPinchZoom:!0,children:e.jsx(vr,{asChild:!0,trapped:j.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:G(a,L=>{j.trigger?.focus({preventScroll:!0}),L.preventDefault()}),children:e.jsx(pr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:i,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:e.jsx(Me,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:L=>L.preventDefault(),...w,...Te,onPlaced:()=>k(!0),ref:p,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:G(w.onKeyDown,L=>{const W=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!W&&L.key.length===1&&Ee(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let $=P().filter(B=>!B.disabled).map(B=>B.ref.current);if(["ArrowUp","End"].includes(L.key)&&($=$.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const B=L.target,U=$.indexOf(B);$=$.slice(U+1)}setTimeout(()=>O($)),L.preventDefault()}})})})})})})});dn.displayName=Si;var Ei="SelectItemAlignedPosition",un=d.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,l=Se(De,r),i=Ce(De,r),[o,x]=d.useState(null),[m,f]=d.useState(null),h=K(s,p=>f(p)),g=Lt(r),c=d.useRef(!1),y=d.useRef(!0),{viewport:u,selectedItem:v,selectedItemText:w,focusSelectedItem:j}=i,C=d.useCallback(()=>{if(l.trigger&&l.valueNode&&o&&m&&u&&v&&w){const p=l.trigger.getBoundingClientRect(),E=m.getBoundingClientRect(),A=l.valueNode.getBoundingClientRect(),N=w.getBoundingClientRect();if(l.dir!=="rtl"){const B=N.left-E.left,U=A.left-B,se=p.left-U,Ie=p.width+se,Mt=Math.max(Ie,E.width),_t=window.innerWidth-re,Ft=Fs(U,[re,Math.max(re,_t-Mt)]);o.style.minWidth=Ie+"px",o.style.left=Ft+"px"}else{const B=E.right-N.right,U=window.innerWidth-A.right-B,se=window.innerWidth-p.right-U,Ie=p.width+se,Mt=Math.max(Ie,E.width),_t=window.innerWidth-re,Ft=Fs(U,[re,Math.max(re,_t-Mt)]);o.style.minWidth=Ie+"px",o.style.right=Ft+"px"}const S=g(),P=window.innerHeight-re*2,R=u.scrollHeight,k=window.getComputedStyle(m),M=parseInt(k.borderTopWidth,10),O=parseInt(k.paddingTop,10),_=parseInt(k.borderBottomWidth,10),D=parseInt(k.paddingBottom,10),F=M+O+R+D+_,Z=Math.min(v.offsetHeight*5,F),Ee=window.getComputedStyle(u),Ye=parseInt(Ee.paddingTop,10),qe=parseInt(Ee.paddingBottom,10),ge=p.top+p.height/2-re,Me=P-ge,Te=v.offsetHeight/2,L=v.offsetTop+Te,W=M+O+L,q=F-W;if(W<=ge){const B=S.length>0&&v===S[S.length-1].ref.current;o.style.bottom="0px";const U=m.clientHeight-u.offsetTop-u.offsetHeight,se=Math.max(Me,Te+(B?qe:0)+U+_),Ie=W+se;o.style.height=Ie+"px"}else{const B=S.length>0&&v===S[0].ref.current;o.style.top="0px";const se=Math.max(ge,M+u.offsetTop+(B?Ye:0)+Te)+q;o.style.height=se+"px",u.scrollTop=W-ge+u.offsetTop}o.style.margin=`${re}px 0`,o.style.minHeight=Z+"px",o.style.maxHeight=P+"px",n?.(),requestAnimationFrame(()=>c.current=!0)}},[g,l.trigger,l.valueNode,o,m,u,v,w,l.dir,n]);ee(()=>C(),[C]);const[I,T]=d.useState();ee(()=>{m&&T(window.getComputedStyle(m).zIndex)},[m]);const b=d.useCallback(p=>{p&&y.current===!0&&(C(),j?.(),y.current=!1)},[C,j]);return e.jsx(Ii,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:c,onScrollButtonChange:b,children:e.jsx("div",{ref:x,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:e.jsx(V.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});un.displayName=Ei;var Ti="SelectPopperPosition",rs=d.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=re,...l}=t,i=Dt(r);return e.jsx(No,{...i,...l,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rs.displayName=Ti;var[Ii,Es]=Ke(De,{}),ns="SelectViewport",mn=d.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:n,...a}=t,l=Ce(ns,r),i=Es(ns,r),o=K(s,l.onViewportChange),x=d.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Ot.Slot,{scope:r,children:e.jsx(V.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:G(a.onScroll,m=>{const f=m.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=i;if(g?.current&&h){const c=Math.abs(x.current-f.scrollTop);if(c>0){const y=window.innerHeight-re*2,u=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),w=Math.max(u,v);if(w<y){const j=w+c,C=Math.min(y,j),I=j-C;h.style.height=C+"px",h.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,h.style.justifyContent="flex-end")}}}x.current=f.scrollTop})})})]})});mn.displayName=ns;var fn="SelectGroup",[Pi,Ai]=Ke(fn),Ri=d.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=ps();return e.jsx(Pi,{scope:r,id:a,children:e.jsx(V.div,{role:"group","aria-labelledby":a,...n,ref:s})})});Ri.displayName=fn;var xn="SelectLabel",hn=d.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Ai(xn,r);return e.jsx(V.div,{id:a.id,...n,ref:s})});hn.displayName=xn;var jt="SelectItem",[ki,gn]=Ke(jt),pn=d.forwardRef((t,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:l,...i}=t,o=Se(jt,r),x=Ce(jt,r),m=o.value===n,[f,h]=d.useState(l??""),[g,c]=d.useState(!1),y=K(s,j=>x.itemRefCallback?.(j,n,a)),u=ps(),v=d.useRef("touch"),w=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(ki,{scope:r,value:n,disabled:a,textId:u,isSelected:m,onItemTextChange:d.useCallback(j=>{h(C=>C||(j?.textContent??"").trim())},[]),children:e.jsx(Ot.ItemSlot,{scope:r,value:n,disabled:a,textValue:f,children:e.jsx(V.div,{role:"option","aria-labelledby":u,"data-highlighted":g?"":void 0,"aria-selected":m&&g,"data-state":m?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:y,onFocus:G(i.onFocus,()=>c(!0)),onBlur:G(i.onBlur,()=>c(!1)),onClick:G(i.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:G(i.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:G(i.onPointerDown,j=>{v.current=j.pointerType}),onPointerMove:G(i.onPointerMove,j=>{v.current=j.pointerType,a?x.onItemLeave?.():v.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:G(i.onPointerLeave,j=>{j.currentTarget===document.activeElement&&x.onItemLeave?.()}),onKeyDown:G(i.onKeyDown,j=>{x.searchRef?.current!==""&&j.key===" "||(pi.includes(j.key)&&w(),j.key===" "&&j.preventDefault())})})})})});pn.displayName=jt;var Xe="SelectItemText",bn=d.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,...l}=t,i=Se(Xe,r),o=Ce(Xe,r),x=gn(Xe,r),m=Ni(Xe,r),[f,h]=d.useState(null),g=K(s,w=>h(w),x.onItemTextChange,w=>o.itemTextRefCallback?.(w,x.value,x.disabled)),c=f?.textContent,y=d.useMemo(()=>e.jsx("option",{value:x.value,disabled:x.disabled,children:c},x.value),[x.disabled,x.value,c]),{onNativeOptionAdd:u,onNativeOptionRemove:v}=m;return ee(()=>(u(y),()=>v(y)),[u,v,y]),e.jsxs(e.Fragment,{children:[e.jsx(V.span,{id:x.textId,...l,ref:g}),x.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ct.createPortal(l.children,i.valueNode):null]})});bn.displayName=Xe;var vn="SelectItemIndicator",yn=d.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return gn(vn,r).isSelected?e.jsx(V.span,{"aria-hidden":!0,...n,ref:s}):null});yn.displayName=vn;var as="SelectScrollUpButton",Nn=d.forwardRef((t,s)=>{const r=Ce(as,t.__scopeSelect),n=Es(as,t.__scopeSelect),[a,l]=d.useState(!1),i=K(s,n.onScrollButtonChange);return ee(()=>{if(r.viewport&&r.isPositioned){let o=function(){const m=x.scrollTop>0;l(m)};const x=r.viewport;return o(),x.addEventListener("scroll",o),()=>x.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?e.jsx(wn,{...t,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:x}=r;o&&x&&(o.scrollTop=o.scrollTop-x.offsetHeight)}}):null});Nn.displayName=as;var ls="SelectScrollDownButton",jn=d.forwardRef((t,s)=>{const r=Ce(ls,t.__scopeSelect),n=Es(ls,t.__scopeSelect),[a,l]=d.useState(!1),i=K(s,n.onScrollButtonChange);return ee(()=>{if(r.viewport&&r.isPositioned){let o=function(){const m=x.scrollHeight-x.clientHeight,f=Math.ceil(x.scrollTop)<m;l(f)};const x=r.viewport;return o(),x.addEventListener("scroll",o),()=>x.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?e.jsx(wn,{...t,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:x}=r;o&&x&&(o.scrollTop=o.scrollTop+x.offsetHeight)}}):null});jn.displayName=ls;var wn=d.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,l=Ce("SelectScrollButton",r),i=d.useRef(null),o=Lt(r),x=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>x(),[x]),ee(()=>{o().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),e.jsx(V.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:G(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:G(a.onPointerMove,()=>{l.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:G(a.onPointerLeave,()=>{x()})})}),Oi="SelectSeparator",Sn=d.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return e.jsx(V.div,{"aria-hidden":!0,...n,ref:s})});Sn.displayName=Oi;var os="SelectArrow",Li=d.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Dt(r),l=Se(os,r),i=Ce(os,r);return l.open&&i.position==="popper"?e.jsx(jo,{...a,...n,ref:s}):null});Li.displayName=os;var Di="SelectBubbleInput",Cn=d.forwardRef(({__scopeSelect:t,value:s,...r},n)=>{const a=d.useRef(null),l=K(n,a),i=To(s);return d.useEffect(()=>{const o=a.current;if(!o)return;const x=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(x,"value").set;if(i!==s&&f){const h=new Event("change",{bubbles:!0});f.call(o,s),o.dispatchEvent(h)}},[i,s]),e.jsx(V.select,{...r,style:{...Ur,...r.style},ref:l,defaultValue:s})});Cn.displayName=Di;function En(t){return t===""||t===void 0}function Tn(t){const s=ke(t),r=d.useRef(""),n=d.useRef(0),a=d.useCallback(i=>{const o=r.current+i;s(o),function x(m){r.current=m,window.clearTimeout(n.current),m!==""&&(n.current=window.setTimeout(()=>x(""),1e3))}(o)},[s]),l=d.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,l]}function In(t,s,r){const a=s.length>1&&Array.from(s).every(m=>m===s[0])?s[0]:s,l=r?t.indexOf(r):-1;let i=Mi(t,Math.max(l,0));a.length===1&&(i=i.filter(m=>m!==r));const x=i.find(m=>m.textValue.toLowerCase().startsWith(a.toLowerCase()));return x!==r?x:void 0}function Mi(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var _i=en,Pn=sn,Fi=nn,$i=an,Bi=ln,An=on,Wi=mn,Rn=hn,kn=pn,Hi=bn,Vi=yn,On=Nn,Ln=jn,Dn=Sn;const is=_i,cs=Fi,wt=d.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Pn,{ref:n,className:Y("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx($i,{asChild:!0,children:e.jsx(ur,{className:"h-4 w-4 opacity-50"})})]}));wt.displayName=Pn.displayName;const Mn=d.forwardRef(({className:t,...s},r)=>e.jsx(On,{ref:r,className:Y("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(zn,{className:"h-4 w-4"})}));Mn.displayName=On.displayName;const _n=d.forwardRef(({className:t,...s},r)=>e.jsx(Ln,{ref:r,className:Y("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ur,{className:"h-4 w-4"})}));_n.displayName=Ln.displayName;const St=d.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(Bi,{children:e.jsxs(An,{ref:a,className:Y("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(Mn,{}),e.jsx(Wi,{className:Y("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(_n,{})]})}));St.displayName=An.displayName;const Ui=d.forwardRef(({className:t,...s},r)=>e.jsx(Rn,{ref:r,className:Y("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Ui.displayName=Rn.displayName;const me=d.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(kn,{ref:n,className:Y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Vi,{children:e.jsx(Kn,{className:"h-4 w-4"})})}),e.jsx(Hi,{children:s})]}));me.displayName=kn.displayName;const Gi=d.forwardRef(({className:t,...s},r)=>e.jsx(Dn,{ref:r,className:Y("-mx-1 my-1 h-px bg-muted",t),...s}));Gi.displayName=Dn.displayName;const Ze=d.forwardRef(({className:t,value:s=0,max:r=100,...n},a)=>e.jsx("div",{ref:a,className:Y("relative h-2 w-full overflow-hidden rounded-full bg-gray-200",t),...n,children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary-600 transition-all duration-300 ease-in-out",style:{transform:`translateX(-${100-s/r*100}%)`}})}));Ze.displayName="Progress";const zi=Tt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function Qe({className:t,variant:s,...r}){return e.jsx("div",{className:Y(zi({variant:s}),t),...r})}const Ki=Tt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-red-200 bg-red-50 text-red-800 [&>svg]:text-red-600"}},defaultVariants:{variant:"default"}}),Fn=d.forwardRef(({className:t,variant:s,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:Y(Ki({variant:s}),t),...r}));Fn.displayName="Alert";const $n=d.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Y("text-sm [&_p]:leading-relaxed",t),...s}));$n.displayName="AlertDescription";const Yi=({conservatoryName:t="××¨×›×– ×”××•×¡×™×§×” ×¨×¢× × ×”",directorName:s="×œ×™××•×¨ ××§×˜×¢",recitalField:r,recitalUnits:n,studentName:a,studentId:l,onRecitalFieldChange:i,onRecitalUnitsChange:o,onStudentNameChange:x,onStudentIdChange:m})=>e.jsxs(J,{className:"p-6 mb-6 border-2 border-blue-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-800 mb-2",children:"××©×¨×“ ×”×—×™× ×•×š"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-1",children:"××’×Ÿ ×‘×’×¨×•×ª - ××•×¡×™×§×”"}),e.jsx("div",{className:"text-lg text-gray-700",children:t}),e.jsxs("div",{className:"text-md text-gray-600 mt-2",children:["×× ×”×œ/×ª: ",s]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"recital-field",className:"text-right block mb-2 font-semibold",children:"×ª×—×•× ×”×¨×¡×™×˜×œ"}),e.jsxs(is,{value:r,onValueChange:i,children:[e.jsx(wt,{id:"recital-field",className:"text-right",children:e.jsx(cs,{placeholder:"×‘×—×¨ ×ª×—×•× ×¨×¡×™×˜×œ"})}),e.jsxs(St,{children:[e.jsx(me,{value:"×§×œ××¡×™",children:"×§×œ××¡×™"}),e.jsx(me,{value:"×’'××–",children:"×’'××–"}),e.jsx(me,{value:"×©×™×¨×”",children:"×©×™×¨×”"})]})]})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"recital-units",className:"text-right block mb-2 font-semibold",children:"×™×—×™×“×•×ª ×œ×™××•×“"}),e.jsxs(is,{value:n?.toString(),onValueChange:f=>o?.(parseInt(f)),children:[e.jsx(wt,{id:"recital-units",className:"text-right",children:e.jsx(cs,{placeholder:"×‘×—×¨ ××¡×¤×¨ ×™×—×™×“×•×ª"})}),e.jsxs(St,{children:[e.jsx(me,{value:"3",children:"3 ×™×—×™×“×•×ª"}),e.jsx(me,{value:"5",children:"5 ×™×—×™×“×•×ª"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"student-name",className:"text-right block mb-2 font-semibold",children:"×©× ×”×ª×œ××™×“/×”"}),e.jsx(H,{id:"student-name",value:a||"",onChange:f=>x?.(f.target.value),placeholder:"×”×›× ×¡ ×©× ×”×ª×œ××™×“",className:"text-right",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"student-id",className:"text-right block mb-2 font-semibold",children:"×ª×¢×•×“×ª ×–×”×•×ª"}),e.jsx(H,{id:"student-id",value:l||"",onChange:f=>m?.(f.target.value),placeholder:"×”×›× ×¡ ××¡×¤×¨ ×ª×¢×•×“×ª ×–×”×•×ª",className:"text-right",dir:"rtl"})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[e.jsx("p",{className:"font-semibold mb-1",children:"×”×¢×¨×•×ª ×—×©×•×‘×•×ª:"}),e.jsx("p",{children:"â€¢ ×”×¨×¡×™×˜×œ ×™×›×œ×•×œ 5 ×™×¦×™×¨×•×ª ××ª×§×•×¤×•×ª ×©×•× ×•×ª"}),e.jsx("p",{children:"â€¢ ×ª×œ××™×“×™ 5 ×™×—×™×“×•×ª × ×“×¨×©×™× ×œ×‘×¦×¢ ×™×¦×™×¨×” ××—×ª ×œ×¤×—×•×ª ×‘×¢×œ ×¤×”"}),e.jsx("p",{children:"â€¢ ×”×”×©××¢×•×ª 1-3 ×”×Ÿ ×”×©××¢×•×ª ×”×›× ×”, ×”×”×©××¢×” ×”×¨×‘×™×¢×™×ª ×”×™× ××’×Ÿ ×”×‘×’×¨×•×ª ×”×¡×•×¤×™"})]})})]});function qi({program:t,onChange:s,requiredPieces:r,readonly:n=!1}){const[a,l]=d.useState(null),[i,o]=d.useState(null),[x,m]=d.useState(!1),[f,h]=d.useState({pieceTitle:"",composer:"",duration:"",movement:"",youtubeLink:null}),g=p=>{l(p),o({...t[p]})},c=()=>{l(null),o(null)},y=()=>{if(a!==null&&i){const p=[...t];p[a]=i,s(p),l(null),o(null)}},u=p=>{if(window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ×™×¦×™×¨×” ×–×•?")){const E=t.filter((A,N)=>N!==p);s(E)}},v=()=>{if(f.pieceTitle&&f.composer&&f.duration){const p=[...t,f];s(p),h({pieceTitle:"",composer:"",duration:"",movement:"",youtubeLink:null}),m(!1)}},w=()=>{h({pieceTitle:"",composer:"",duration:"",movement:"",youtubeLink:null}),m(!1)},j=p=>{const E=p.split(":");return E.length===2?parseInt(E[0])*60+parseInt(E[1]):0},C=p=>{const E=Math.floor(p/60),A=p%60;return`${E}:${A.toString().padStart(2,"0")}`},I=()=>{const p=t.reduce((E,A)=>E+j(A.duration),0);return C(p)},T=p=>p?/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/).+/.test(p):!0,b=(p,E)=>{const A=a===E;return e.jsx(J,{padding:"md",className:"relative",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"flex-1",children:A?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×©× ×”×™×¦×™×¨×” *"}),e.jsx("input",{type:"text",value:i?.pieceTitle||"",onChange:N=>o(S=>S?{...S,pieceTitle:N.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”×™×¦×™×¨×”"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××œ×—×™×Ÿ *"}),e.jsx("input",{type:"text",value:i?.composer||"",onChange:N=>o(S=>S?{...S,composer:N.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”××œ×—×™×Ÿ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××©×š ×–××Ÿ *"}),e.jsx("input",{type:"text",value:i?.duration||"",onChange:N=>o(S=>S?{...S,duration:N.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"5:30",pattern:"[0-9]+:[0-9]{2}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×¤×¨×§ (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"text",value:i?.movement||"",onChange:N=>o(S=>S?{...S,movement:N.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×¤×¨×§ ×¨××©×•×Ÿ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×§×™×©×•×¨ YouTube (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"url",value:i?.youtubeLink||"",onChange:N=>o(S=>S?{...S,youtubeLink:N.target.value||null}:null),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${i?.youtubeLink&&!T(i.youtubeLink)?"border-red-300 focus:ring-red-500":"border-gray-300"}`,placeholder:"https://www.youtube.com/watch?v=..."}),i?.youtubeLink&&!T(i.youtubeLink)&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"×§×™×©×•×¨ YouTube ×œ× ×ª×§×™×Ÿ"})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:p.pieceTitle}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:p.composer}),p.movement&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{className:"text-sm",children:p.movement})]})]}),e.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),p.duration]}),p.youtubeLink&&e.jsxs("a",{href:p.youtubeLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-red-600 hover:text-red-800 text-sm",children:[e.jsx(Yn,{className:"w-4 h-4 mr-1"}),"×¦×¤×” ×‘-YouTube",e.jsx(qn,{className:"w-3 h-3 mr-1"})]})]})}),!n&&e.jsx("div",{className:"flex items-center gap-2 mr-4",children:A?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:y,disabled:!i?.pieceTitle||!i?.composer||!i?.duration,className:"p-2 text-green-600 hover:text-green-800 disabled:text-gray-400",children:e.jsx(ms,{className:"w-4 h-4"})}),e.jsx("button",{onClick:c,className:"p-2 text-gray-600 hover:text-gray-800",children:e.jsx(pt,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g(E),className:"p-2 text-primary-600 hover:text-primary-800",children:e.jsx(us,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(E),className:"p-2 text-red-600 hover:text-red-800",children:e.jsx(xs,{className:"w-4 h-4"})})]})})]})},E)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-6 h-6 mr-3 text-primary-600"}),"×ª×•×›× ×™×ª ×”×‘×’×¨×•×ª"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:'×¡×”"×› ×–××Ÿ:'})," ",I()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"×™×¦×™×¨×•×ª:"})," ",t.length]}),!n&&e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"×”×•×¡×£ ×™×¦×™×¨×”"]})]})]}),e.jsx(J,{padding:"md",className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(X,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"×“×¨×™×©×•×ª ×”×ª×•×›× ×™×ª"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ ×œ×¤×—×•×ª 3 ×™×¦×™×¨×•×ª ×©×•× ×•×ª"}),e.jsx("li",{children:"â€¢ ××©×š ×–××Ÿ ××™× ×™××œ×™: 15 ×“×§×•×ª"}),e.jsx("li",{children:"â€¢ ×œ×›×œ ×™×¦×™×¨×” ×—×™×™×‘ ×œ×”×™×•×ª ×§×™×©×•×¨ ×œ×”×©××¢×” (××•××œ×¥ YouTube)"}),e.jsx("li",{children:"â€¢ ×™×© ×œ×¦×™×™×Ÿ ×¤×¨×§ ×¡×¤×¦×™×¤×™ ×× ×”×™×¦×™×¨×” ××•×¨×›×‘×ª ××›××” ×¤×¨×§×™×"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-6",children:[e.jsxs("div",{className:`flex items-center text-sm ${t.length>=3?"text-green-700":"text-red-700"}`,children:[e.jsx("span",{className:"font-medium",children:"×™×¦×™×¨×•×ª:"}),e.jsxs("span",{className:"mr-1",children:[t.length,"/3 (××™× ×™××•×)"]}),t.length>=3?" âœ“":" âš ï¸"]}),e.jsxs("div",{className:`flex items-center text-sm ${j(I())>=900?"text-green-700":"text-red-700"}`,children:[e.jsx("span",{className:"font-medium",children:"×–××Ÿ ×›×•×œ×œ:"}),e.jsxs("span",{className:"mr-1",children:[I()," (××™× ×™××•× 15:00)"]}),j(I())>=900?" âœ“":" âš ï¸"]})]})]})]})}),x&&!n&&e.jsxs(J,{padding:"md",className:"border-2 border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"×”×•×¡×¤×ª ×™×¦×™×¨×” ×—×“×©×”"}),e.jsx("button",{onClick:w,className:"text-gray-500 hover:text-gray-700",children:e.jsx(pt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×©× ×”×™×¦×™×¨×” *"}),e.jsx("input",{type:"text",value:f.pieceTitle,onChange:p=>h(E=>({...E,pieceTitle:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”×™×¦×™×¨×”"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××œ×—×™×Ÿ *"}),e.jsx("input",{type:"text",value:f.composer,onChange:p=>h(E=>({...E,composer:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”××œ×—×™×Ÿ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××©×š ×–××Ÿ * (×“×§:×©× )"}),e.jsx("input",{type:"text",value:f.duration,onChange:p=>h(E=>({...E,duration:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"5:30",pattern:"[0-9]+:[0-9]{2}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×¤×¨×§ (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"text",value:f.movement||"",onChange:p=>h(E=>({...E,movement:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×¤×¨×§ ×¨××©×•×Ÿ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×§×™×©×•×¨ YouTube (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"url",value:f.youtubeLink||"",onChange:p=>h(E=>({...E,youtubeLink:p.target.value||null})),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${f.youtubeLink&&!T(f.youtubeLink)?"border-red-300 focus:ring-red-500":"border-gray-300"}`,placeholder:"https://www.youtube.com/watch?v=..."}),f.youtubeLink&&!T(f.youtubeLink)&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"×§×™×©×•×¨ YouTube ×œ× ×ª×§×™×Ÿ"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"×‘×™×˜×•×œ"}),e.jsx("button",{onClick:v,disabled:!f.pieceTitle||!f.composer||!f.duration,className:"px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"×”×•×¡×£ ×™×¦×™×¨×”"})]})]})]}),t.length>0?e.jsx("div",{className:"space-y-4",children:t.map((p,E)=>b(p,E))}):e.jsx(J,{padding:"md",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"××™×Ÿ ×™×¦×™×¨×•×ª ×‘×ª×•×›× ×™×ª"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"×”×•×¡×£ ×™×¦×™×¨×•×ª ×œ×ª×•×›× ×™×ª ×”×‘×’×¨×•×ª ×©×œ×š"}),!n&&e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"×”×•×¡×£ ×™×¦×™×¨×” ×¨××©×•× ×”"]})]})})]})}const Ts=d.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:Y("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));Ts.displayName="Textarea";const Xi=({magenBagrut:t={},onUpdate:s,readonly:r=!1})=>{const[n,a]=d.useState({date:t.date,review:t.review||"",reviewedBy:t.reviewedBy||"",recordingLinks:t.recordingLinks||[""],completed:t.completed||!1,status:t.status||"pending",grade:t.grade,gradeLevel:t.gradeLevel,detailedGrading:{playingSkills:{points:t?.detailedGrading?.playingSkills?.points||void 0,maxPoints:40,comments:t?.detailedGrading?.playingSkills?.comments||""},musicalUnderstanding:{points:t?.detailedGrading?.musicalUnderstanding?.points||void 0,maxPoints:30,comments:t?.detailedGrading?.musicalUnderstanding?.comments||""},textKnowledge:{points:t?.detailedGrading?.textKnowledge?.points||void 0,maxPoints:20,comments:t?.detailedGrading?.textKnowledge?.comments||""},playingByHeart:{points:t?.detailedGrading?.playingByHeart?.points||void 0,maxPoints:10,comments:t?.detailedGrading?.playingByHeart?.comments||""}}}),[l,i]=d.useState({examiner1:"",examiner2:"",examiner3:""});d.useEffect(()=>{const u=o(),v={...n,grade:u,gradeLevel:x(u)};a(v),s(v)},[n.detailedGrading?.playingSkills.points,n.detailedGrading?.musicalUnderstanding.points,n.detailedGrading?.textKnowledge.points,n.detailedGrading?.playingByHeart.points]);const o=()=>{const{playingSkills:u,musicalUnderstanding:v,textKnowledge:w,playingByHeart:j}=n.detailedGrading;return(u.points||0)+(v.points||0)+(w.points||0)+(j.points||0)},x=u=>u>=95?"××¦×•×™×Ÿ (95-100)":u>=85?"×˜×•×‘ ×××•×“ (85-94)":u>=75?"×˜×•×‘ (75-84)":u>=65?"×›××¢×˜ ×˜×•×‘ (65-74)":u>=55?"××¡×¤×§ (55-64)":u>=45?"×›××¢×˜ ××¡×¤×§ (45-54)":u>=35?"×œ× ××¡×¤×§ (35-44)":"×’×¨×•×¢ (0-34)",m=(u,v)=>{const w={...n,[u]:v};a(w),s(w)},f=(u,v,w)=>{const j={...n,detailedGrading:{...n.detailedGrading,[u]:{...n.detailedGrading[u],[v]:w}}};a(j),s(j)},h=(u,v)=>{const w=[...n.recordingLinks||[""]];w[u]=v,u===w.length-1&&v&&w.push(""),m("recordingLinks",w.filter((j,C)=>j||C===w.length-1))},g=u=>u?new Date(u).toISOString().split("T")[0]:"",c=u=>u?new Date(u):void 0,y=()=>{const{playingSkills:u,musicalUnderstanding:v,textKnowledge:w,playingByHeart:j}=n.detailedGrading;return u.points!==void 0&&v.points!==void 0&&w.points!==void 0&&j.points!==void 0&&n.date&&n.reviewedBy};return e.jsxs(J,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(gt,{className:"w-6 h-6 ml-3 text-gold-600"}),"××’×Ÿ ×‘×’×¨×•×ª - ×”×©××¢×” ×¡×•×¤×™×ª"]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.completed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.completed?"×”×•×©×œ××”":"×˜×¨× ×”×•×©×œ××”"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs(z,{htmlFor:"magen-date",className:"text-right block mb-2 font-semibold",children:[e.jsx(Et,{className:"w-4 h-4 inline ml-2"}),"×ª××¨×™×š ××’×Ÿ ×”×‘×’×¨×•×ª"]}),e.jsx(H,{id:"magen-date",type:"date",value:g(n.date),onChange:u=>m("date",c(u.target.value)),disabled:r,className:"text-right"})]}),e.jsxs("div",{children:[e.jsxs(z,{htmlFor:"magen-reviewedBy",className:"text-right block mb-2 font-semibold",children:[e.jsx(Ae,{className:"w-4 h-4 inline ml-2"}),"×•×¢×“×ª ×”×‘×•×—× ×™×"]}),e.jsx(H,{id:"magen-reviewedBy",value:n.reviewedBy||"",onChange:u=>m("reviewedBy",u.target.value),placeholder:"×©××•×ª ×”×‘×•×—× ×™× ×‘×•×•×¢×“×”",disabled:r,className:"text-right",dir:"rtl"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"×˜×‘×œ×ª ×¦×™×•× ×™× - ××’×Ÿ ×‘×’×¨×•×ª ×‘××•×¡×™×§×”"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border-2 border-gray-400",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-100",children:[e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-right font-bold text-gray-900",children:"×§×¨×™×˜×¨×™×•×Ÿ ×”×¢×¨×›×”"}),e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-gray-900",children:"× ×™×§×•×“ ××§×¡×™××œ×™"}),e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-gray-900",children:"× ×™×§×•×“ ×©×”×ª×§×‘×œ"}),e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-right font-bold text-gray-900",children:"×”×¢×¨×•×ª"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:"××™×•×× ×•×ª × ×’×™× ×”"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"40"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(H,{type:"number",min:"0",max:"40",value:n.detailedGrading?.playingSkills.points||"",onChange:u=>f("playingSkills","points",parseInt(u.target.value)||0),disabled:r,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(H,{value:n.detailedGrading?.playingSkills.comments||"",onChange:u=>f("playingSkills","comments",u.target.value),disabled:r,placeholder:"×”×¢×¨×•×ª ×¢×œ ××™×•×× ×•×ª ×”× ×’×™× ×”",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:"×”×‘× ×” ××•×¡×™×§×œ×™×ª"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"30"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(H,{type:"number",min:"0",max:"30",value:n.detailedGrading?.musicalUnderstanding.points||"",onChange:u=>f("musicalUnderstanding","points",parseInt(u.target.value)||0),disabled:r,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(H,{value:n.detailedGrading?.musicalUnderstanding.comments||"",onChange:u=>f("musicalUnderstanding","comments",u.target.value),disabled:r,placeholder:"×”×¢×¨×•×ª ×¢×œ ×”×‘× ×” ××•×¡×™×§×œ×™×ª",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:"×™×“×™×¢×ª ×”×˜×§×¡×˜"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"20"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(H,{type:"number",min:"0",max:"20",value:n.detailedGrading?.textKnowledge.points||"",onChange:u=>f("textKnowledge","points",parseInt(u.target.value)||0),disabled:r,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(H,{value:n.detailedGrading?.textKnowledge.comments||"",onChange:u=>f("textKnowledge","comments",u.target.value),disabled:r,placeholder:"×”×¢×¨×•×ª ×¢×œ ×™×“×™×¢×ª ×”×˜×§×¡×˜",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:'× ×’×™× ×” ×‘×¢"×¤'}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"10"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(H,{type:"number",min:"0",max:"10",value:n.detailedGrading?.playingByHeart.points||"",onChange:u=>f("playingByHeart","points",parseInt(u.target.value)||0),disabled:r,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(H,{value:n.detailedGrading?.playingByHeart.comments||"",onChange:u=>f("playingByHeart","comments",u.target.value),disabled:r,placeholder:"×”×¢×¨×•×ª ×¢×œ × ×’×™× ×” ×‘×¢×œ ×¤×”",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{className:"bg-blue-200",children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-bold text-right text-lg",children:'×¡×”"×› ×¦×™×•×Ÿ'}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-xl",children:"100"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center",children:e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:o()})}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-right",children:e.jsx("div",{className:"font-semibold text-blue-800",children:x(o())})})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs(z,{className:"text-right block mb-2 font-semibold",children:[e.jsx(Xn,{className:"w-4 h-4 inline ml-2"}),"×§×™×©×•×¨×™ ×”×§×œ×˜×•×ª ×œ××’×Ÿ"]}),e.jsx("div",{className:"space-y-2",children:(n.recordingLinks||[""]).map((u,v)=>e.jsx(H,{value:u,onChange:w=>h(v,w.target.value),placeholder:`×§×™×©×•×¨ ×”×§×œ×˜×” ${v+1}`,disabled:r,className:"text-left",dir:"ltr"},v))})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"magen-review",className:"text-right block mb-2 font-semibold",children:"×”×¢×¨×•×ª ×›×œ×œ×™×•×ª ×©×œ ×”×•×•×¢×“×”"}),e.jsx(Ts,{id:"magen-review",value:n.review||"",onChange:u=>m("review",u.target.value),placeholder:"×”×¢×¨×•×ª ×›×œ×œ×™×•×ª ×¢×œ ×”×‘×™×¦×•×¢ ×•×”×¨××” ×”×›×œ×œ×™×ª...",disabled:r,className:"text-right min-h-[120px]",dir:"rtl"})]})]}),e.jsxs("div",{className:"mb-6 p-4 border-2 border-gray-300 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"×—×ª×™××•×ª ×•×¢×“×ª ×”×‘×•×—× ×™×"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-right block mb-2",children:"×‘×•×—×Ÿ ×¨××©×™"}),e.jsx(H,{value:l.examiner1,onChange:u=>i(v=>({...v,examiner1:u.target.value})),placeholder:"×—×ª×™××”",disabled:r,className:"text-right",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right block mb-2",children:"×‘×•×—×Ÿ ×©× ×™"}),e.jsx(H,{value:l.examiner2,onChange:u=>i(v=>({...v,examiner2:u.target.value})),placeholder:"×—×ª×™××”",disabled:r,className:"text-right",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right block mb-2",children:"×‘×•×—×Ÿ ×©×œ×™×©×™"}),e.jsx(H,{value:l.examiner3,onChange:u=>i(v=>({...v,examiner3:u.target.value})),placeholder:"×—×ª×™××”",disabled:r,className:"text-right",dir:"rtl"})]})]})]}),!r&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(hs,{onClick:()=>m("completed",!n.completed),disabled:!y(),variant:n.completed?"destructive":"default",className:"flex items-center",children:n.completed?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 ml-2"}),"×‘×˜×œ ×”×©×œ××ª ××’×Ÿ"]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"w-4 h-4 ml-2"}),"×”×©×œ× ××’×Ÿ ×‘×’×¨×•×ª"]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-800",children:["×¦×™×•×Ÿ ×¡×•×¤×™: ",o(),"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:x(o())})]})]})]})},Zi=({directorEvaluation:t={},directorName:s="×œ×™××•×¨ ××§×˜×¢",onUpdate:r,readonly:n=!1})=>{const[a,l]=d.useState({points:t.points,percentage:t.percentage,comments:t.comments||""}),[i,o]=d.useState(""),[x,m]=d.useState("");d.useEffect(()=>{const c=a.points!==void 0?a.points/10*100:void 0,y={...a,percentage:c};l(y),r(y)},[a.points]);const f=(c,y)=>{const u={...a,[c]:y};l(u),r(u)},h=c=>c>=9?"××¦×•×™×Ÿ":c>=8?"×˜×•×‘ ×××•×“":c>=7?"×˜×•×‘":c>=6?"××¡×¤×§":c>=5?"×›××¢×˜ ××¡×¤×§":"×œ× ××¡×¤×§",g=c=>c>=8?"text-green-700":c>=6?"text-blue-700":c>=5?"text-yellow-700":"text-red-700";return e.jsxs(J,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Zn,{className:"w-6 h-6 ml-3 text-blue-600"}),"×”×¢×¨×›×ª ×”×× ×”×œ/×ª"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"××©×§×œ:"})," 10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"]})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(et,{className:"w-5 h-5 text-blue-600 ml-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"×¢×œ ×”×¢×¨×›×ª ×”×× ×”×œ/×ª"}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"×”×¢×¨×›×ª ×”×× ×”×œ/×ª ××”×•×•×” 10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™ ×‘×‘×’×¨×•×ª ×”××•×¡×™×§×” ×•××‘×•×¡×¡×ª ×¢×œ:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ ××¢×•×¨×‘×•×ª ×•×”×©×ª×ª×¤×•×ª ×‘×—×™×™ ×‘×™×ª ×”×¡×¤×¨ ×”××•×¡×™×§×œ×™"}),e.jsx("li",{children:"â€¢ ×”×ª×§×“××•×ª ×•×”×ª×¤×ª×—×•×ª ×œ××•×¨×š ×”×©× ×™×"}),e.jsx("li",{children:"â€¢ ×™×—×¡ ×•×”×ª× ×”×’×•×ª ×›×œ×¤×™ ×”×œ××™×“×” ×•×”×—×‘×¨×™×"}),e.jsx("li",{children:"â€¢ ×ª×¨×•××” ×œ×§×”×™×œ×” ×”××•×¡×™×§×œ×™×ª"}),e.jsx("li",{children:"â€¢ ××•×›× ×•×ª ×•×”×§×¤×“×” ×¢×œ ××©×™××•×ª"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"director-points",className:"text-right block mb-3 font-semibold text-lg",children:"×¦×™×•×Ÿ ×”×× ×”×œ/×ª (0-10 × ×§×•×“×•×ª)"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{id:"director-points",type:"number",min:"0",max:"10",step:"0.1",value:a.points||"",onChange:c=>f("points",parseFloat(c.target.value)||void 0),disabled:n,className:"text-center text-2xl font-bold h-16 border-2 focus:border-blue-500",placeholder:"0.0"}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"/10"})]}),a.points!==void 0&&e.jsxs("div",{className:`text-center mt-2 font-semibold ${g(a.points)}`,children:[h(a.points),a.percentage!==void 0&&e.jsxs("span",{className:"block text-sm text-gray-600 mt-1",children:["(",a.percentage.toFixed(1),"%)"]})]})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"evaluation-date",className:"text-right block mb-2 font-semibold",children:"×ª××¨×™×š ×”×¢×¨×›×”"}),e.jsx(H,{id:"evaluation-date",type:"date",value:x,onChange:c=>m(c.target.value),disabled:n,className:"text-right"})]}),e.jsxs("div",{children:[e.jsxs(z,{htmlFor:"director-signature",className:"text-right block mb-2 font-semibold",children:[e.jsx(Qn,{className:"w-4 h-4 inline ml-2"}),"×—×ª×™××ª ×”×× ×”×œ/×ª"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2 text-right",children:s}),e.jsx(H,{id:"director-signature",value:i,onChange:c=>o(c.target.value),placeholder:"×—×ª×™××” ×“×™×’×™×˜×œ×™×ª",disabled:n,className:"text-right",dir:"rtl"})]})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"director-comments",className:"text-right block mb-2 font-semibold",children:"×”×¢×¨×•×ª ×•×”×¡×‘×¨ ×œ×”×¢×¨×›×”"}),e.jsx(Ts,{id:"director-comments",value:a.comments||"",onChange:c=>f("comments",c.target.value),placeholder:"×”×¢×¨×•×ª ×”×× ×”×œ/×ª ×¢×œ ×”×ª×œ××™×“/×”: ×”×ª×§×“××•×ª, ××¢×•×¨×‘×•×ª, ×™×—×¡, ×ª×¨×•××” ×œ×§×”×™×œ×”...",disabled:n,className:"text-right min-h-[200px] resize-y",dir:"rtl"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"×—×™×©×•×‘ ×‘××¡×’×¨×ª ×”×¦×™×•×Ÿ ×”×¡×•×¤×™:"}),e.jsxs("div",{className:"text-sm text-yellow-700",children:[e.jsx("p",{children:"â€¢ ×¦×™×•×Ÿ ××’×Ÿ ×”×‘×’×¨×•×ª: 90% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),e.jsx("p",{children:"â€¢ ×”×¢×¨×›×ª ×”×× ×”×œ/×ª: 10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),a.points!==void 0&&e.jsxs("p",{className:"mt-2 font-semibold",children:["×ª×¨×•××” ×œ×¦×™×•×Ÿ ×”×¡×•×¤×™: ",(a.points/10*10).toFixed(1)," × ×§×•×“×•×ª"]})]})]}),e.jsxs("div",{className:"mt-6 p-4 border-2 border-gray-300 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"×¡×•×œ× ×”×¢×¨×›×”"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-green-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"××¦×•×™×Ÿ"}),e.jsx("span",{children:"9.0-10.0"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-blue-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"×˜×•×‘ ×××•×“"}),e.jsx("span",{children:"8.0-8.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium",children:"×˜×•×‘"}),e.jsx("span",{children:"7.0-7.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-yellow-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"××¡×¤×§"}),e.jsx("span",{children:"6.0-6.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-orange-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"×›××¢×˜ ××¡×¤×§"}),e.jsx("span",{children:"5.0-5.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-red-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"×œ× ××¡×¤×§"}),e.jsx("span",{children:"0.0-4.9"})]})]})]}),!n&&a.points!==void 0&&e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["×”×¢×¨×›×ª ×”×× ×”×œ/×ª: ",a.points,"/10"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["××©××¢×•×ª: ",h(a.points)," â€¢ ×ª×¨×•××” ×œ×¦×™×•×Ÿ ×”×¡×•×¤×™: ",(a.points/10*10).toFixed(1)," × ×§×•×“×•×ª"]})]})]})},Qi=({bagrut:t,completionStatus:s,validationErrors:r})=>{const n=()=>{const f=t.presentations?.[3];if(!f?.grade)return 0;const h=f.grade*.9,g=(t.directorEvaluation?.points||0)*.1*10;return Math.round(h+g)},a=f=>{const h=[{level:"××¦×•×™×Ÿ",range:"95-100",description:"×¨××” ×™×•×¦××ª ×“×•×¤×Ÿ",min:95,color:"bg-green-600"},{level:"×˜×•×‘ ×××•×“",range:"85-94",description:"×¨××” ×’×‘×•×”×” ×××•×“",min:85,color:"bg-green-500"},{level:"×˜×•×‘",range:"75-84",description:"×¨××” ×˜×•×‘×”",min:75,color:"bg-blue-500"},{level:"×›××¢×˜ ×˜×•×‘",range:"65-74",description:"×¨××” ××¢×œ ×”×××•×¦×¢",min:65,color:"bg-blue-400"},{level:"××¡×¤×§",range:"55-64",description:"×¨××” ××¡×¤×§×ª",min:55,color:"bg-yellow-500"},{level:"×›××¢×˜ ××¡×¤×§",range:"45-54",description:"×¨××” ××ª×—×ª ×œ×××•×¦×¢",min:45,color:"bg-orange-500"},{level:"×œ× ××¡×¤×§",range:"35-44",description:"×¨××” × ××•×›×”",min:35,color:"bg-red-500"},{level:"×’×¨×•×¢",range:"0-34",description:"×¨××” ×œ× ××ª××™××”",min:0,color:"bg-red-600"}];for(const g of h)if(f>=g.min)return g;return h[h.length-1]},l=n(),i=a(l),o=t.presentations?.[3],x=!!(o?.grade&&t.directorEvaluation?.points);r.filter(f=>f.type==="error").length>0;const m=()=>[{level:"××¦×•×™×Ÿ",range:"95-100",description:"×¨××” ×™×•×¦××ª ×“×•×¤×Ÿ",color:"bg-green-600"},{level:"×˜×•×‘ ×××•×“",range:"85-94",description:"×¨××” ×’×‘×•×”×” ×××•×“",color:"bg-green-500"},{level:"×˜×•×‘",range:"75-84",description:"×¨××” ×˜×•×‘×”",color:"bg-blue-500"},{level:"×›××¢×˜ ×˜×•×‘",range:"65-74",description:"×¨××” ××¢×œ ×”×××•×¦×¢",color:"bg-blue-400"},{level:"××¡×¤×§",range:"55-64",description:"×¨××” ××¡×¤×§×ª",color:"bg-yellow-500"},{level:"×›××¢×˜ ××¡×¤×§",range:"45-54",description:"×¨××” ××ª×—×ª ×œ×××•×¦×¢",color:"bg-orange-500"},{level:"×œ× ××¡×¤×§",range:"35-44",description:"×¨××” × ××•×›×”",color:"bg-red-500"},{level:"×’×¨×•×¢",range:"0-34",description:"×¨××” ×œ× ××ª××™××”",color:"bg-red-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(J,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Jn,{className:"w-7 h-7 ml-3 text-blue-600"}),"×¡×™×›×•× ×¦×™×•× ×™× - ×‘×’×¨×•×ª ×‘××•×¡×™×§×”"]}),x&&e.jsxs(Qe,{variant:"success",className:"text-lg px-4 py-2",children:[e.jsx(Yt,{className:"w-5 h-5 ml-2"}),"×”×•×©×œ×"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[e.jsx(gt,{className:"w-8 h-8 mx-auto text-blue-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"×¦×™×•×Ÿ ××’×Ÿ ×‘×’×¨×•×ª"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-800",children:[o?.grade!==void 0?o.grade:"--","/100"]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"90% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),o?.grade!==void 0&&e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["×ª×¨×•××”: ",(o.grade*.9).toFixed(1)," × ×§×•×“×•×ª"]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:[e.jsx(et,{className:"w-8 h-8 mx-auto text-green-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"×”×¢×¨×›×ª ×”×× ×”×œ/×ª"}),e.jsxs("div",{className:"text-3xl font-bold text-green-800",children:[t.directorEvaluation?.points!==void 0?t.directorEvaluation.points:"--","/10"]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),t.directorEvaluation?.points!==void 0&&e.jsxs("div",{className:"text-xs text-green-700 mt-1",children:["×ª×¨×•××”: ",(t.directorEvaluation.points*.1*10).toFixed(1)," × ×§×•×“×•×ª"]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:`rounded-lg p-4 border-2 ${x?`${i.color} text-white`:"bg-gray-50 border-gray-200"}`,children:[e.jsx(Yt,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"×¦×™×•×Ÿ ×¡×•×¤×™"}),e.jsxs("div",{className:"text-3xl font-bold",children:[x?l.toFixed(1):"--","/100"]}),x&&e.jsx("div",{className:"text-sm mt-1 font-medium",children:i.level})]})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 text-center",children:"× ×•×¡×—×ª ×”×—×™×©×•×‘"}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-4 text-lg",children:[e.jsxs("div",{className:"bg-blue-100 px-3 py-1 rounded",children:[e.jsx("span",{className:"font-semibold",children:"×¦×™×•×Ÿ ××’×Ÿ ×‘×’×¨×•×ª"})," Ã— 90%"]}),e.jsx("span",{className:"text-xl",children:"+"}),e.jsxs("div",{className:"bg-green-100 px-3 py-1 rounded",children:[e.jsx("span",{className:"font-semibold",children:"×”×¢×¨×›×ª ×”×× ×”×œ/×ª"})," Ã— 10%"]}),e.jsx("span",{className:"text-xl",children:"="}),e.jsx("div",{className:`px-3 py-1 rounded font-bold ${x?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:"×¦×™×•×Ÿ ×¡×•×¤×™"})]})}),x&&e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-700",children:[e.jsxs("div",{className:"font-mono",children:[o.grade," Ã— 0.9 + ",t.directorEvaluation.points," Ã— 1.0 = ",l.toFixed(1)]}),e.jsxs("div",{className:"mt-1",children:["(",(o.grade*.9).toFixed(1)," + ",(t.directorEvaluation.points*1).toFixed(1)," = ",l.toFixed(1),")"]})]}),r.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:r.map((f,h)=>e.jsxs("div",{className:`flex items-center p-3 rounded-lg ${f.type==="error"?"bg-red-50 border border-red-200 text-red-800":"bg-yellow-50 border border-yellow-200 text-yellow-800"}`,children:[e.jsx(fs,{className:"w-4 h-4 ml-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:f.message})]},h))}),s&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"×¡×˜×˜×•×¡ ×”×©×œ××”"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"×”×©××¢×•×ª"}),e.jsxs("div",{className:`text-lg ${s.presentations.completed===4?"text-green-600":"text-gray-600"}`,children:[s.presentations.completed,"/4"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"×ª×›× ×™×ª"}),e.jsxs("div",{className:`text-lg ${s.programPieces.percentage===100?"text-green-600":"text-gray-600"}`,children:[s.programPieces.completed,"/",s.programPieces.required]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"×”×¢×¨×›×ª ×× ×”×œ"}),e.jsx("div",{className:`text-lg ${s.directorEvaluation.completed?"text-green-600":"text-gray-600"}`,children:s.directorEvaluation.completed?"âœ“":"âœ—"})]})]})]})]}),x&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-block p-6 rounded-lg border-2 border-blue-200 bg-blue-50",children:[e.jsx("h4",{className:"text-xl font-bold text-blue-900 mb-2",children:"×ª×•×¦××” ×¡×•×¤×™×ª"}),e.jsx("div",{className:"text-4xl font-bold text-blue-800 mb-2",children:l.toFixed(1)}),e.jsxs("div",{className:"text-lg font-semibold mb-1",children:[i.level," (",i.range,")"]}),e.jsx("div",{className:"text-sm text-blue-700",children:i.description})]})})]}),e.jsxs(J,{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"×¡×•×œ× ×”×¦×™×•× ×™× - ××©×¨×“ ×”×—×™× ×•×š"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:m().map((f,h)=>e.jsxs("div",{className:`p-3 rounded-lg border-2 ${x&&l>=f.range.split("-")[0]?`${f.color} text-white border-transparent`:"bg-white border-gray-200 text-gray-700"}`,children:[e.jsx("div",{className:"font-semibold text-sm",children:f.level}),e.jsx("div",{className:"text-xs mt-1",children:f.range}),e.jsx("div",{className:"text-xs mt-1 opacity-90",children:f.description})]},h))})]})]})},Ji=({student:t,studentId:s,onStudentUpdate:r})=>{const[n,a]=d.useState(null),[l,i]=d.useState(!0),[o,x]=d.useState([]),[m,f]=d.useState(null),h=()=>[{completed:!1,status:"pending",notes:"",recordingLinks:[]},{completed:!1,status:"pending",notes:"",recordingLinks:[]},{completed:!1,status:"pending",notes:"",recordingLinks:[]},{completed:!1,status:"pending",notes:"",recordingLinks:[],grade:0,gradeLevel:""}];d.useEffect(()=>{g()},[s]),d.useEffect(()=>{n&&(c(),y())},[n]);const g=async()=>{i(!0);try{const p={_id:`bagrut_${s}`,studentId:s,teacherId:t.teacherId||"",conservatoryName:"××¨×›×– ×”××•×¡×™×§×” ×¨×¢× × ×”",directorName:"×œ×™××•×¨ ××§×˜×¢",recitalField:void 0,recitalUnits:void 0,program:[],accompaniment:{type:"× ×’×Ÿ ××œ×•×•×”",accompanists:[]},presentations:h(),directorEvaluation:{points:void 0,percentage:void 0,comments:""},isCompleted:!1,isActive:!0,createdAt:new Date,updatedAt:new Date};a(p)}catch(p){console.error("Failed to load Bagrut data:",p)}finally{i(!1)}},c=()=>{if(!n)return;const p=[];n.recitalField||p.push({field:"recitalField",message:"×™×© ×œ×‘×—×•×¨ ×ª×—×•× ×¨×¡×™×˜×œ",type:"error"}),n.recitalUnits||p.push({field:"recitalUnits",message:"×™×© ×œ×‘×—×•×¨ ××¡×¤×¨ ×™×—×™×“×•×ª ×œ×™××•×“",type:"error"});const E=n.recitalUnits===5?5:3;n.program.length<E&&p.push({field:"program",message:`× ×“×¨×©×•×ª ${E} ×™×¦×™×¨×•×ª ×œ×ª×›× ×™×ª`,type:"error"});const A=n.presentations||[];for(let S=1;S<A.length;S++)A[S].completed&&!A[S-1].completed&&p.push({field:`presentation_${S}`,message:`×œ× × ×™×ª×Ÿ ×œ×”×©×œ×™× ×”×©××¢×” ${S+1} ×œ×¤× ×™ ×”×©×œ××ª ×”×©××¢×” ${S}`,type:"error"});const N=A[3];if(N?.completed){const S=N?.detailedGrading;if(S){const P=(S.playingSkills.points||0)+(S.musicalUnderstanding.points||0)+(S.textKnowledge.points||0)+(S.playingByHeart.points||0);P>100&&p.push({field:"magenGrading",message:"×¡×š ×”× ×§×•×“×•×ª ×—×•×¨×’ ×-100",type:"warning"}),P<55&&p.push({field:"magenGrading",message:"×¦×™×•×Ÿ × ××•×š ××”××™× ×™××•× ×”× ×“×¨×©",type:"warning"}),(S.playingSkills.points||0)>S.playingSkills.maxPoints&&p.push({field:"playingSkills",message:`× ×§×•×“×•×ª ××™×•×× ×•×ª × ×’×™× ×” ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.playingSkills.maxPoints})`,type:"error"}),(S.musicalUnderstanding.points||0)>S.musicalUnderstanding.maxPoints&&p.push({field:"musicalUnderstanding",message:`× ×§×•×“×•×ª ×”×‘× ×” ××•×¡×™×§×œ×™×ª ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.musicalUnderstanding.maxPoints})`,type:"error"}),(S.textKnowledge.points||0)>S.textKnowledge.maxPoints&&p.push({field:"textKnowledge",message:`× ×§×•×“×•×ª ×™×“×™×¢×ª ×˜×§×¡×˜ ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.textKnowledge.maxPoints})`,type:"error"}),(S.playingByHeart.points||0)>S.playingByHeart.maxPoints&&p.push({field:"playingByHeart",message:`× ×§×•×“×•×ª × ×’×™× ×” ×‘×¢×´×¤ ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.playingByHeart.maxPoints})`,type:"error"})}}A.filter(S=>S.completed).length===4&&(n.directorEvaluation?.points||p.push({field:"directorEvaluation",message:"× ×“×¨×©×ª ×”×¢×¨×›×ª ×× ×”×œ ×œ×¤× ×™ ×¡×™×•× ×”×ª×”×œ×™×š",type:"error"})),n.recitalUnits===5&&!n.program.some(P=>P.movement?.toLowerCase().includes("×‘×¢×œ ×¤×”")||P.pieceTitle?.toLowerCase().includes("×‘×¢×œ ×¤×”"))&&n.program.length>=5&&p.push({field:"program",message:"×ª×œ××™×“×™ 5 ×™×—×™×“×•×ª × ×“×¨×©×™× ×œ×‘×¦×¢ ×™×¦×™×¨×” ××—×ª ×œ×¤×—×•×ª ×‘×¢×œ ×¤×”",type:"warning"}),x(p)},y=()=>{if(!n)return;const E=(n.presentations||[]).filter(O=>O.completed).length,A=n.recitalUnits===5?5:3,N=Math.min(n.program.length/A*100,100),S=!!n.directorEvaluation?.points,P=E/4*100,R=S?100:0,k=P*.6+N*.3+R*.1,M=E===4&&S&&n.program.length>=A&&o.filter(O=>O.type==="error").length===0;f({presentations:{completed:E,total:4,percentage:P},programPieces:{completed:n.program.length,required:A,percentage:N},directorEvaluation:{completed:S,percentage:R},overall:{percentage:k,canComplete:M}})},u=p=>{if(!n)return;const E={...n,...p,updatedAt:new Date};a(E)},v=(p,E)=>{if(!n)return;const A=[...n.presentations||[]];A[p]={...A[p],...E},u({presentations:A})},w=p=>{u({directorEvaluation:p})},j=p=>n?.presentations?p===0?!0:n.presentations[p-1]?.completed||!1:!1,C=()=>e.jsxs(J,{className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(X,{className:"w-6 h-6 ml-3 text-primary-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×’×“×¨×ª ×¨×¡×™×˜×œ"})]}),e.jsx(Yi,{conservatoryName:n?.conservatoryName,directorName:n?.directorName,recitalField:n?.recitalField,recitalUnits:n?.recitalUnits,studentName:t.name,studentId:s,onRecitalFieldChange:p=>u({recitalField:p}),onRecitalUnitsChange:p=>u({recitalUnits:p})})]}),I=()=>m?e.jsxs(J,{className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ta,{className:"w-6 h-6 ml-3 text-green-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×ª×§×“××•×ª ×›×œ×œ×™×ª"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[m.presentations.completed,"/4"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"×”×©××¢×•×ª ×”×•×©×œ××•"}),e.jsx(Ze,{value:m.presentations.percentage,className:"h-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:[m.programPieces.completed,"/",m.programPieces.required]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"×™×¦×™×¨×•×ª ×‘×ª×›× ×™×ª"}),e.jsx(Ze,{value:m.programPieces.percentage,className:"h-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:m.directorEvaluation.completed?"âœ“":"âœ—"}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"×”×¢×¨×›×ª ×× ×”×œ"}),e.jsx(Ze,{value:m.directorEvaluation.percentage,className:"h-2"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:[Math.round(m.overall.percentage),"%"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"×”×©×œ××” ×›×œ×œ×™×ª"}),e.jsx(Ze,{value:m.overall.percentage,className:"h-3 mb-4"}),m.overall.canComplete?e.jsxs(Qe,{variant:"success",className:"text-sm",children:[e.jsx(fe,{className:"w-4 h-4 ml-1"}),"××•×›×Ÿ ×œ×”×©×œ××”"]}):e.jsxs(Qe,{variant:"secondary",className:"text-sm",children:[e.jsx(ne,{className:"w-4 h-4 ml-1"}),"×‘×ª×”×œ×™×š"]})]})]}):null,T=()=>o.length===0?null:e.jsx("div",{className:"mb-6 space-y-2",children:o.map((p,E)=>e.jsxs(Fn,{variant:p.type==="error"?"destructive":"default",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsx($n,{children:p.message})]},E))}),b=()=>n?.presentations?e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Et,{className:"w-6 h-6 ml-3 text-orange-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×©××¢×•×ª"})]}),n.presentations.map((p,E)=>{const A=j(E),N=E===3;return e.jsxs(J,{className:`p-6 relative ${A?"":"opacity-50"}`,children:[!A&&e.jsx("div",{className:"absolute inset-0 bg-gray-100/50 flex items-center justify-center z-10 rounded-lg",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg flex items-center",children:[e.jsx(As,{className:"w-5 h-5 ml-2 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["×”×©×œ× ××ª ×”×©××¢×” ",E," ×ª×—×™×œ×”"]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[N?e.jsx(et,{className:"w-6 h-6 ml-3 text-yellow-500"}):e.jsx(X,{className:"w-6 h-6 ml-3 text-blue-500"}),e.jsx("h4",{className:"text-lg font-bold",children:N?"××’×Ÿ ×‘×’×¨×•×ª":`×”×©××¢×” ${E+1}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[p.completed?e.jsxs(Qe,{variant:"success",children:[e.jsx(fe,{className:"w-4 h-4 ml-1"}),"×”×•×©×œ××”"]}):e.jsxs(Qe,{variant:"secondary",children:[e.jsx(ne,{className:"w-4 h-4 ml-1"}),"×××ª×™× ×”"]}),A?e.jsx(sa,{className:"w-4 h-4 text-green-500"}):e.jsx(As,{className:"w-4 h-4 text-gray-400"})]})]}),N&&A?e.jsx(Xi,{magenBagrut:p,onUpdate:S=>v(E,S),readonly:!A}):A?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-right",children:"×ª××¨×™×š ×”×©××¢×”"}),e.jsx(H,{type:"date",value:p.date?new Date(p.date).toISOString().split("T")[0]:"",onChange:S=>v(E,{date:S.target.value?new Date(S.target.value):void 0,completed:!!S.target.value}),className:"text-right"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right",children:"×¡×˜×˜×•×¡"}),e.jsxs(is,{value:p.status||"pending",onValueChange:S=>v(E,{status:S}),children:[e.jsx(wt,{className:"text-right",children:e.jsx(cs,{})}),e.jsxs(St,{children:[e.jsx(me,{value:"pending",children:"×××ª×™×Ÿ"}),e.jsx(me,{value:"completed",children:"×”×•×©×œ×"}),e.jsx(me,{value:"needs_improvement",children:"×–×§×•×§ ×©×™×¤×•×¨"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right",children:"×”×¢×¨×•×ª ×•××©×•×‘"}),e.jsx(H,{value:p.notes||"",onChange:S=>v(E,{notes:S.target.value}),placeholder:"×”×¢×¨×•×ª ×¢×œ ×”×”×©××¢×”...",className:"text-right",dir:"rtl"})]})]}):null]},E)})]}):null;return l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"w-8 h-8 animate-pulse mx-auto mb-4 text-primary-600"}),e.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:"×˜×•×¢×Ÿ × ×ª×•× ×™ ×‘×’×¨×•×ª..."})]})}):n?e.jsxs("div",{className:"space-y-6",children:[C(),I(),T(),e.jsxs(J,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ds,{className:"w-6 h-6 ml-3 text-purple-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×ª×›× ×™×ª ×”×¨×¡×™×˜×œ"})]}),e.jsx(qi,{program:n.program||[],onChange:p=>u({program:p}),requiredPieces:n.recitalUnits===5?5:3,readonly:!1})]}),b(),e.jsxs(J,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ea,{className:"w-6 h-6 ml-3 text-indigo-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×¢×¨×›×ª ×× ×”×œ"})]}),e.jsx(Zi,{evaluation:n.directorEvaluation||{points:void 0,comments:""},onUpdate:w,readonly:!1})]}),e.jsx(Qi,{bagrut:n,completionStatus:m,validationErrors:o})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-600 text-lg mb-2",children:"âš ï¸ ×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™ ×‘×’×¨×•×ª"}),e.jsx(hs,{onClick:g,variant:"outline",children:"× ×¡×” ×©×•×‘"})]})},ec=({student:t})=>e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âœ…"}),e.jsx("div",{children:"× ×•×›×—×•×ª - ×‘×¤×™×ª×•×—"})]}),tc=({student:t})=>e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ğŸ“„"}),e.jsx("div",{children:"××¡××›×™× - ×‘×¤×™×ª×•×—"})]}),pe=()=>e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ra,{className:"w-6 h-6 animate-spin mx-auto mb-3 text-primary-600"}),e.jsx("div",{className:"text-sm text-gray-600",children:"×˜×•×¢×Ÿ × ×ª×•× ×™×..."})]})}),sc=({error:t,resetError:s,tabName:r})=>e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-red-600 text-lg mb-2",children:["âš ï¸ ×©×’×™××” ×‘×˜×¢×™× ×ª ",r]}),e.jsx("div",{className:"text-gray-600 mb-4 text-sm",children:t.message}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors text-sm",children:"× ×¡×” ×©×•×‘"})]});class be extends ve.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){console.error(`Error in ${this.props.tabName} tab:`,s,r)}render(){return this.state.hasError&&this.state.error?e.jsx(sc,{error:this.state.error,resetError:()=>this.setState({hasError:!1,error:null}),tabName:this.props.tabName}):this.props.children}}const rc=({activeTab:t,studentId:s,student:r,isLoading:n,errors:a={},actions:l={},fileHandling:i={},onStudentUpdate:o})=>{const x=()=>{switch(t){case"documents":return e.jsx(mt.DocumentsList,{});case"schedule":return e.jsx(mt.Schedule,{});default:return e.jsx(mt.TabContent,{})}},m=typeof n=="object"?n[t]||n.student:n;if(m)return e.jsx(mr,{isLoading:!0,skeleton:x(),minHeight:"400px",children:e.jsx("div",{})});if(!r)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"ğŸ“„"}),e.jsx("div",{className:"text-gray-600",children:"××™×Ÿ × ×ª×•× ×™× ×œ×”×¦×’×”"})]})});const f=()=>{switch(t){case"personal":return e.jsx(be,{tabName:"×¤×¨×˜×™× ××™×©×™×™×",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(fa,{student:r,studentId:s,onStudentUpdate:o})})});case"academic":return e.jsx(be,{tabName:"×¤×¨×˜×™× ××§×“××™×™×",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(xa,{student:r,studentId:s,onStudentUpdate:o})})});case"schedule":return e.jsx(be,{tabName:"×œ×•×— ×–×× ×™×",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(ba,{student:r,studentId:s,isLoading:m})})});case"attendance":return e.jsx(be,{tabName:"× ×•×›×—×•×ª",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(ec,{student:r})})});case"orchestra":return e.jsx(be,{tabName:"×ª×–××•×¨×•×ª",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(va,{student:r,studentId:s,isLoading:m})})});case"theory":return e.jsx(be,{tabName:"×ª×™××•×¨×™×”",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(ga,{student:r,studentId:s})})});case"bagrut":return e.jsx(be,{tabName:"×‘×’×¨×•×ª",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(Ji,{student:r,studentId:s,onStudentUpdate:o})})});case"documents":return e.jsx(be,{tabName:"××¡××›×™×",children:e.jsx(d.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(tc,{student:r})})});default:return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"ğŸš§"}),e.jsx("div",{className:"text-gray-600",children:"×ª×•×›×Ÿ ×˜×¨× ×¤×•×ª×—"})]})}};return e.jsx("div",{className:"min-h-96",children:f()})},hc=()=>{console.log("ğŸ” StudentDetailsPage component loading...");const{studentId:t}=Wn();console.log("ğŸ“ Student ID from params:",t);const s=Hn(),[r,n]=d.useState("personal"),[a,l]=d.useState(null),[i,o]=d.useState(!0),[x,m]=d.useState(null),f=g=>{console.log("ğŸ”„ Updating student data in parent component:",g),l(g)},h=[{id:"personal",label:"×¤×¨×˜×™× ××™×©×™×™×",component:()=>null},{id:"academic",label:"××™×“×¢ ××§×“××™",component:()=>null},{id:"schedule",label:"×œ×•×— ×–×× ×™×",component:()=>null},{id:"attendance",label:"× ×•×›×—×•×ª",component:()=>null},{id:"orchestra",label:"×ª×–××•×¨×•×ª",component:()=>null},{id:"theory",label:"×ª××•×¨×™×”",component:()=>null},{id:"documents",label:"××¡××›×™×",component:()=>null}];return!t||t.trim()===""?e.jsx(Vn,{to:"/students",replace:!0}):(d.useEffect(()=>{t&&(async()=>{try{o(!0),m(null),console.log("ğŸŒ Fetching student data for ID:",t);const c=await Q.students.getStudentById(t);console.log("âœ… Student data received:",c),console.log("ğŸ“š Enrollments in response:",c?.enrollments),console.log("ğŸ‘¨â€ğŸ« Teacher assignments in response:",c?.teacherAssignments),l(c)}catch(c){console.error("âŒ Error fetching student:",c),m(c.message||"Failed to load student data")}finally{o(!1)}})()},[t]),i?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tt,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary-600"}),e.jsx("div",{className:"text-lg text-gray-600",children:"×˜×•×¢×Ÿ ×¤×¨×˜×™ ×ª×œ××™×“..."})]})}):x?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âŒ"}),e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:[e.jsx(tt,{className:"w-4 h-4"}),"× ×¡×” ×©×•×‘"]})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("button",{onClick:()=>s("/students"),className:"hover:text-primary-600 transition-colors",children:"×ª×œ××™×“×™×"}),e.jsx(Rs,{className:"w-4 h-4 rotate-180"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"×¤×¨×˜×™ ×ª×œ××™×“"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:a.personalInfo?.fullName?.charAt(0)||"?"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.personalInfo?.fullName||"×©× ×œ× ×–××™×Ÿ"}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.isActive?"×¤×¢×™×œ":"×œ× ×¤×¢×™×œ"})})]})]})}),e.jsx(ua,{activeTab:r,onTabChange:n,tabs:h}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx(rc,{activeTab:r,studentId:t,student:a,isLoading:!1,onStudentUpdate:f})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"×ª×œ××™×“ ×œ× × ××¦×"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"×œ× × ××¦××• ×¤×¨×˜×™× ×¢×‘×•×¨ ×”×ª×œ××™×“ ×”××‘×•×§×©"}),e.jsxs("button",{onClick:()=>s("/students"),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:[e.jsx(Rs,{className:"w-4 h-4"}),"×—×–×•×¨ ×œ×¨×©×™××ª ×”×ª×œ××™×“×™×"]})]}))};export{hc as default};
