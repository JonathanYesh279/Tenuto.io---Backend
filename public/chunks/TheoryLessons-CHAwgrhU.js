import{j as e,M as Me,V as Je,C as _e,T as Xe}from"../assets/index-CoKafZFz.js";import{r as l,b as Ze}from"./vendor-C9PcmKF2.js";import{C as oe}from"./Card-1BAWwzNR.js";import{S as be}from"./StatsCard-DEtP3a5j.js";import{T as et}from"./TeacherNameDisplay-D8jtGwln.js";import{B as de,I as Ae,p as tt,O as st,T as fe,c as je,e as Be,f as Fe,a8 as at,a9 as rt,aa as lt,F as Oe,Y as nt,ab as it,h as ct,s as ot,ac as dt,g as Ne,A as Re,u as xt,i as mt,P as Ie,S as ut,ad as ht,C as gt,b as pt}from"./ui-DsxFGtGk.js";import{t as yt,d as C}from"./cascade-deletion-BvQll6O-.js";import"./query-BdHdBeoH.js";import"./utils-x1PSU_OZ.js";const bt=o=>new Date(o.date).toLocaleDateString("he-IL"),jt=o=>`${o.startTime} - ${o.endTime}`,ft=o=>{if(!o.isActive)return{text:"×œ× ×¤×¢×™×œ",colorClass:"bg-gray-100 text-gray-800"};const i=new Date,x=new Date(`${o.date}T${o.startTime}:00`),f=new Date(`${o.date}T${o.endTime}:00`);return i<x?{text:"×¢×ª×™×“",colorClass:"bg-blue-100 text-blue-800"}:i>=x&&i<=f?{text:"××ª×§×™×™×",colorClass:"bg-green-100 text-green-800"}:i>f?{text:"×”×¡×ª×™×™×",colorClass:"bg-orange-100 text-orange-800"}:{text:"×œ× ×™×“×•×¢",colorClass:"bg-gray-100 text-gray-800"}},Nt=(o,i)=>o.filter(x=>{if(i.searchQuery){const f=i.searchQuery.toLowerCase();if(!(x.title?.toLowerCase().includes(f)||x.teacherName?.toLowerCase().includes(f)||x.category?.toLowerCase().includes(f)||x.description?.toLowerCase().includes(f)))return!1}if(i.category&&x.category!==i.category||i.teacherId&&x.teacherId!==i.teacherId)return!1;if(i.date){const f=new Date(i.date).toDateString(),n=new Date(x.date).toDateString();if(f!==n)return!1}return!(i.isActive!==void 0&&x.isActive!==i.isActive)});function $e({lesson:o,onView:i,onEdit:x,onDelete:f,onViewAttendance:n,selectable:z,selected:w,onSelect:X}){const p=bt(o),B=jt(o),$=ft(o);return e.jsxs("div",{className:`bg-white rounded-lg border shadow-sm hover:shadow-md transition-all duration-200 ${w?"border-primary-400 ring-2 ring-primary-100":"border-gray-200"}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[z&&e.jsx("div",{className:"flex items-center ml-3",children:e.jsx("input",{type:"checkbox",checked:w,onChange:()=>X?.(o._id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded-full",children:o.category}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${$.colorClass}`,children:$.text})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:o.title}),e.jsx(et,{lesson:o,className:"text-sm font-medium text-gray-700 mb-1",showIcon:!0}),o.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:o.description})]}),e.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[i&&e.jsx("button",{onClick:()=>i(o),className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"×¦×¤×” ×‘×¤×¨×˜×™×",children:e.jsx(Ae,{className:"w-4 h-4"})}),n&&e.jsx("button",{onClick:()=>n(o),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"×¦×¤×” ×‘× ×•×›×—×•×ª",children:e.jsx(tt,{className:"w-4 h-4"})}),x&&e.jsx("button",{onClick:()=>x(o),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"×¢×¨×•×š ×©×™×¢×•×¨",children:e.jsx(st,{className:"w-4 h-4"})}),f&&e.jsx("button",{onClick:()=>f(o),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"××—×§ ×©×™×¢×•×¨",children:e.jsx(fe,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(je,{className:"w-4 h-4 ml-2 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 ml-1",children:"×ª××¨×™×š:"}),p]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Be,{className:"w-4 h-4 ml-2 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 ml-1",children:"×©×¢×”:"}),B]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Fe,{className:"w-4 h-4 ml-2 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 ml-1",children:"××™×§×•×:"}),o.location||"×œ× ×¦×•×™×Ÿ"]})]})]})}function vt({lessons:o,onRefresh:i,searchQuery:x,filters:f}){const[n,z]=l.useState(new Set),[w,X]=l.useState(!1),[p,B]=l.useState({category:"",teacherId:"",dateRange:{start:"",end:""},status:"all"}),[$,Z]=l.useState(!1),[N,S]=l.useState({}),[A,E]=l.useState(!1),[xe,k]=l.useState(!1),[V,ee]=l.useState(null),[me,D]=l.useState(!1),[ne,y]=l.useState(""),[te,se]=l.useState(""),[W,M]=l.useState([]),[T,_]=l.useState({isRunning:!1,current:0,total:0,operation:"",details:""}),F=["×ª×œ××™×“×™× ×—×“×©×™× ×‘-×“","××ª×—×™×œ×™×","××ª×—×™×œ×™× ×‘","××ª×—×™×œ×™× ×“","××ª×§×“××™× ×‘","××ª×§×“××™× ×","××ª×§×“××™× ×’","×ª×œ××™×“×™× ×—×“×©×™× ×‘×•×’×¨×™× (×” - ×˜)","×ª×œ××™×“×™× ×—×“×©×™× ×¦×¢×™×¨×™×","×”×›× ×” ×œ×¨×¡×™×˜×œ ×§×œ××¡×™ ×™×","×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×","×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×‘","××’××”","×ª××•×¨×™×” ×›×œ×™"];l.useEffect(()=>{ve()},[]);const ve=async()=>{try{const s=(await yt.getTeachers()).filter(d=>d.roles&&d.roles.includes("××•×¨×” ×ª××•×¨×™×”"));M(s)}catch(t){console.error("Error loading teachers:",t)}},ae=l.useMemo(()=>{let t=Nt(o,{searchQuery:x,category:p.category||f.category,teacherId:p.teacherId||f.teacherId,date:f.date});if(p.dateRange.start&&p.dateRange.end){const s=new Date(p.dateRange.start),d=new Date(p.dateRange.end);t=t.filter(b=>{const j=new Date(b.date);return j>=s&&j<=d})}return p.status!=="all"&&(t=t.filter(s=>p.status==="active"?s.isActive:!s.isActive)),t.sort((s,d)=>new Date(s.date).getTime()-new Date(d.date).getTime())},[o,x,f,p]),Pe=t=>{const s=new Set(n);s.has(t)?s.delete(t):s.add(t),z(s)},ie=()=>{z(w?new Set:new Set(ae.map(t=>t._id))),X(!w)},Q=()=>{z(new Set),X(!1)},O=l.useMemo(()=>o.filter(t=>n.has(t._id)),[o,n]),ue=()=>{if(n.size===0){y("×× × ×‘×—×¨ ×©×™×¢×•×¨×™× ×œ×¢×“×›×•×Ÿ");return}Z(!0)},re=async()=>{if(!A){E(!0);return}D(!0),y("");try{const t=Object.entries(N).reduce((s,[d,b])=>(b!==void 0&&b!==""&&b!==null&&(s[d]=b),s),{});if(Object.keys(t).length===0){y("×× × ×‘×—×¨ ×œ×¤×—×•×ª ×©×“×” ××—×“ ×œ×¢×“×›×•×Ÿ");return}await C.bulkUpdateTheoryLessons(Array.from(n),t),ee({success:!0,affectedCount:n.size,errors:[],summary:`×¢×•×“×›× ×• ${n.size} ×©×™×¢×•×¨×™× ×‘×”×¦×œ×—×”`}),se(`×¢×•×“×›× ×• ${n.size} ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×‘×”×¦×œ×—×”`),Z(!1),E(!1),S({}),Q(),await i()}catch(t){y(t.message||"×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×©×™×¢×•×¨×™×")}finally{D(!1)}},ce=async()=>{if(n.size===0){y("×× × ×‘×—×¨ ×©×™×¢×•×¨×™× ×œ××—×™×§×”");return}k(!0)},he=async()=>{D(!0),y(""),_({isRunning:!0,current:0,total:n.size,operation:"××•×—×§ ×©×™×¢×•×¨×™×",details:"××ª×—×™×œ ××—×™×§×”..."});try{const t=Array.from(n);let s=0;const d=[];for(const b of t)try{await C.deleteTheoryLesson(b),s++,_(j=>({...j,current:s,details:`× ××—×§ ×©×™×¢×•×¨ ${s} ××ª×•×š ${t.length}`}))}catch(j){d.push(`×©×’×™××” ×‘××—×™×§×ª ×©×™×¢×•×¨: ${j.message}`)}ee({success:d.length===0,affectedCount:s,errors:d,summary:`× ××—×§×• ${s} ×©×™×¢×•×¨×™×${d.length>0?` (${d.length} ×©×’×™××•×ª)`:""}`}),d.length===0?se(`× ××—×§×• ${s} ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×‘×”×¦×œ×—×”`):y(`×”×•×©×œ××” ×”××—×™×§×” ×¢× ${d.length} ×©×’×™××•×ª`),k(!1),Q(),await i()}catch(t){y(t.message||"×©×’×™××” ×‘××—×™×§×ª ×”×©×™×¢×•×¨×™×")}finally{D(!1),_(t=>({...t,isRunning:!1}))}},ge=async t=>{if(n.size===0){y("×× × ×‘×—×¨ ×©×™×¢×•×¨×™× ×œ×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡");return}D(!0),y("");try{await C.bulkUpdateTheoryLessons(Array.from(n),{isActive:t}),se(`${t?"×”×•×¤×¢×œ×•":"×”×•×©×‘×ª×•"} ${n.size} ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×‘×”×¦×œ×—×”`),Q(),await i()}catch(s){y(s.message||"×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”×©×™×¢×•×¨×™×")}finally{D(!1)}},le=()=>{if(n.size===0){y("×× × ×‘×—×¨ ×©×™×¢×•×¨×™× ×œ×™×™×¦×•×");return}_({isRunning:!0,current:0,total:n.size,operation:"××™×™×¦× × ×ª×•× ×™×",details:"××›×™×Ÿ ×§×•×‘×¥ CSV..."});try{const t=O.map((u,Y)=>{_(P=>({...P,current:Y+1,details:`××¢×‘×“ ×©×™×¢×•×¨ ${Y+1} ××ª×•×š ${O.length}`}));const K=W.find(P=>P._id===u.teacherId);return{××–×”×”:u._id,×ª××¨×™×š:new Date(u.date).toLocaleDateString("he-IL"),"×™×•× ×‘×©×‘×•×¢":["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™","×©×‘×ª"][new Date(u.date).getDay()],×§×˜×’×•×¨×™×”:u.category,××•×¨×”:K?.personalInfo?.fullName||u.teacherId,"×©×¢×ª ×”×ª×—×œ×”":u.startTime,"×©×¢×ª ×¡×™×•×":u.endTime,"××©×š (×“×§×•×ª)":L(u.startTime,u.endTime),××™×§×•×:u.location,"×ª×œ××™×“×™× ×¨×©×•××™×":u.studentIds?.length||0,"××¡×¤×¨ × ×•×›×—×™×":u.attendanceList?.filter(P=>P.status==="×”×’×™×¢/×”").length||0,"××—×•×– × ×•×›×—×•×ª":u.studentIds?.length>0?Math.round((u.attendanceList?.filter(P=>P.status==="×”×’×™×¢/×”").length||0)/u.studentIds.length*100):0,×¡×˜×˜×•×¡:u.isActive?"×¤×¢×™×œ":"×œ× ×¤×¢×™×œ",×ª×™××•×¨:(u.description||"").replace(/,/g,";").replace(/\n/g," "),×›×•×ª×¨×ª:u.title||"","×©× ×ª ×œ×™××•×“×™×":u.schoolYearId}}),d="\uFEFF"+[Object.keys(t[0]).join(","),...t.map(u=>Object.values(u).map(Y=>`"${Y}"`).join(","))].join(`
`),b=new Blob([d],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a"),R=URL.createObjectURL(b),U=new Date().toISOString().split("T")[0];j.setAttribute("href",R),j.setAttribute("download",`theory-lessons-bulk-export-${U}.csv`),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j),se(`×™×•×¦××• ${n.size} ×©×™×¢×•×¨×™× ×œ×§×•×‘×¥ CSV ×‘×”×¦×œ×—×”`)}catch(t){y("×©×’×™××” ×‘×™×™×¦×•× ×”×§×•×‘×¥: "+t.message)}finally{_(t=>({...t,isRunning:!1}))}},L=(t,s)=>{if(!t||!s)return 0;const[d,b]=t.split(":").map(Number),[j,R]=s.split(":").map(Number),U=d*60+b;return j*60+R-U};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"×¢×“×›×•×Ÿ ×©×™×¢×•×¨×™× ×§×‘×•×¦×ª×™"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"× ×”×œ ××¡×¤×¨ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×‘×• ×–×× ×™×ª"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.size>0&&e.jsxs("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[n.size," × ×‘×—×¨×•"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 max-w-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(at,{className:"w-4 h-4 text-blue-600 ml-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"×”×•×¨××•×ª ×©×™××•×©:"}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"â€¢ ×”×©×ª××© ×‘××¡× × ×™× ×œ××™×ª×•×¨ ×”×©×™×¢×•×¨×™× ×”×¨×œ×•×•× ×˜×™×™×"}),e.jsx("li",{children:"â€¢ ×‘×—×¨ ×©×™×¢×•×¨×™× ×¢×œ ×™×“×™ ×œ×—×™×¦×” ×¢×œ ×ª×™×‘×•×ª ×”×¡×™××•×Ÿ"}),e.jsx("li",{children:"â€¢ ×”×©×ª××© ×‘×¤×¢×•×œ×•×ª ×”×§×‘×•×¦×ª×™×•×ª ×œ×¢×¨×™×›×”, ××—×™×§×” ××• ×™×™×¦×•×"}),e.jsx("li",{children:"â€¢ ×›×œ ×¢×“×›×•×Ÿ ×™×¦×™×’ ×ª×¦×•×’×” ××§×“×™××” ×œ×¤× ×™ ×”×‘×™×¦×•×¢"})]})]})]})})]})]}),ne&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:ne})}),te&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-green-800",children:te}),V&&e.jsxs("button",{onClick:()=>{},className:"text-green-700 hover:text-green-900 text-sm font-medium",children:[e.jsx(rt,{className:"w-4 h-4 inline ml-1"}),"×‘×™×˜×•×œ ×¤×¢×•×œ×”"]})]}),T.isRunning&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600 animate-spin ml-2"}),e.jsx("span",{className:"text-blue-800 font-medium",children:T.operation})]}),e.jsxs("span",{className:"text-blue-600 text-sm",children:[T.current," / ",T.total]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${T.total>0?T.current/T.total*100:0}%`}})}),e.jsx("p",{className:"text-blue-700 text-sm",children:T.details})]}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Oe,{className:"w-5 h-5 ml-2"}),"××¡× × ×™× ××ª×§×“××™×"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×§×˜×’×•×¨×™×”"}),e.jsxs("select",{value:p.category,onChange:t=>B(s=>({...s,category:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"×›×œ ×”×§×˜×’×•×¨×™×•×ª"}),F.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××•×¨×”"}),e.jsxs("select",{value:p.teacherId,onChange:t=>B(s=>({...s,teacherId:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"×›×œ ×”××•×¨×™×"}),W.map(t=>e.jsx("option",{value:t._id,children:t.personalInfo?.fullName},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×¡×˜×˜×•×¡"}),e.jsxs("select",{value:p.status,onChange:t=>B(s=>({...s,status:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"×›×œ ×”×©×™×¢×•×¨×™×"}),e.jsx("option",{value:"active",children:"×¤×¢×™×œ×™×"}),e.jsx("option",{value:"inactive",children:"×œ× ×¤×¢×™×œ×™×"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>B({category:"",teacherId:"",dateRange:{start:"",end:""},status:"all"}),className:"w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"× ×§×” ××¡× × ×™×"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×ª××¨×™×š ×”×ª×—×œ×”"}),e.jsx("input",{type:"date",value:p.dateRange.start,onChange:t=>B(s=>({...s,dateRange:{...s.dateRange,start:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×ª××¨×™×š ×¡×™×•×"}),e.jsx("input",{type:"date",value:p.dateRange.end,onChange:t=>B(s=>({...s,dateRange:{...s.dateRange,end:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]})]})}),n.size>0&&e.jsx(oe,{children:e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx(nt,{className:"w-5 h-5 ml-2"}),"×¡×™×›×•× ×‘×—×™×¨×”"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:n.size}),e.jsx("div",{className:"text-sm text-blue-600",children:"×©×™×¢×•×¨×™× × ×‘×—×¨×•"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:O.reduce((t,s)=>t+(s.studentIds?.length||0),0)}),e.jsx("div",{className:"text-sm text-blue-600",children:"×ª×œ××™×“×™× ××•×©×¤×¢×™×"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:new Set(O.map(t=>t.category)).size}),e.jsx("div",{className:"text-sm text-blue-600",children:"×§×˜×’×•×¨×™×•×ª"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:new Set(O.map(t=>t.teacherId)).size}),e.jsx("div",{className:"text-sm text-blue-600",children:"××•×¨×™×"})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:ie,className:"ml-2 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),"×‘×—×¨ ×”×›×œ (",ae.length," ×©×™×¢×•×¨×™×)"]}),n.size>0&&e.jsx("button",{onClick:Q,className:"text-sm text-gray-500 hover:text-gray-700",children:"×‘×˜×œ ×‘×—×™×¨×”"})]}),e.jsx("div",{className:"flex items-center gap-2",children:n.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:le,className:"flex items-center px-3 py-2 text-green-700 border border-green-300 rounded-lg hover:bg-green-50",children:[e.jsx(it,{className:"w-4 h-4 ml-1"}),"×™×™×¦×•×"]}),e.jsx("button",{onClick:()=>ge(!1),className:"flex items-center px-3 py-2 text-orange-700 border border-orange-300 rounded-lg hover:bg-orange-50",children:"×”×©×‘×ª"}),e.jsx("button",{onClick:()=>ge(!0),className:"flex items-center px-3 py-2 text-blue-700 border border-blue-300 rounded-lg hover:bg-blue-50",children:"×”×¤×¢×œ"}),e.jsxs("button",{onClick:ue,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(ct,{className:"w-4 h-4 ml-1"}),"×¢×“×›×•×Ÿ (",n.size,")"]}),e.jsxs("button",{onClick:ce,className:"flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(fe,{className:"w-4 h-4 ml-1"}),"××—×™×§×” (",n.size,")"]})]})})]}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” (",ae.length,")"]}),ae.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(de,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"×œ× × ××¦××• ×©×™×¢×•×¨×™×"}),e.jsx("p",{className:"text-gray-600",children:"× ×¡×” ×œ×©× ×•×ª ××ª ×”××¡× × ×™× ××• ×”×•×¡×£ ×©×™×¢×•×¨×™× ×—×“×©×™×"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"×‘×—×™×¨×”"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"×ª××¨×™×š"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"×§×˜×’×•×¨×™×”"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"×©×¢×•×ª"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"××™×§×•×"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"×ª×œ××™×“×™×"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"×¡×˜×˜×•×¡"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"×¤×¢×•×œ×•×ª"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ae.map(t=>e.jsxs("tr",{className:`hover:bg-gray-50 ${n.has(t._id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>Pe(t._id),className:"p-1 hover:bg-gray-100 rounded",children:n.has(t._id)?e.jsx(ot,{className:"w-5 h-5 text-blue-600"}):e.jsx(dt,{className:"w-5 h-5 text-gray-400"})})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:new Date(t.date).toLocaleDateString("he-IL")}),e.jsx("div",{className:"text-gray-500 text-xs",children:["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™","×©×‘×ª"][new Date(t.date).getDay()]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"inline-block max-w-32 truncate",children:t.category})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Be,{className:"w-4 h-4 ml-1"}),t.startTime," - ",t.endTime]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Fe,{className:"w-4 h-4 ml-1"}),e.jsx("span",{className:"truncate max-w-20",children:t.location})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ne,{className:"w-4 h-4 ml-1"}),t.studentIds?.length||0]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isActive?"×¤×¢×™×œ":"×œ× ×¤×¢×™×œ"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("button",{onClick:()=>{},className:"p-1 hover:bg-gray-100 rounded text-blue-600",title:"×¦×¤×™×™×” ×‘×¤×¨×˜×™×",children:e.jsx(Ae,{className:"w-4 h-4"})})})]},t._id))})]})})]})}),$&&e.jsx(Me,{isOpen:$,onClose:()=>{Z(!1),E(!1),S({})},title:A?"×ª×¦×•×’×” ××§×“×™××” - ×¢×“×›×•×Ÿ ×§×‘×•×¦×ª×™":"×¢×“×›×•×Ÿ ×§×‘×•×¦×ª×™",maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[A?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"w-5 h-5 text-yellow-600 ml-2"}),e.jsxs("p",{className:"text-yellow-800 font-medium",children:["×ª×¦×•×’×” ××§×“×™××” - ×”×©×™× ×•×™×™× ×™×—×•×œ×• ×¢×œ ",n.size," ×©×™×¢×•×¨×™×"]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"×©×™× ×•×™×™× ×©×™×‘×•×¦×¢×•:"}),Object.entries(N).filter(([,t])=>t!==void 0&&t!==""&&t!==null).length===0?e.jsx("p",{className:"text-gray-600",children:"×œ× × ×‘×—×¨×• ×©×“×•×ª ×œ×¢×“×›×•×Ÿ"}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:Object.entries(N).map(([t,s],d)=>{if(s===void 0||s===""||s===null)return null;const b={category:"×§×˜×’×•×¨×™×”",teacherId:"××•×¨×”",location:"××™×§×•×",startTime:"×©×¢×ª ×”×ª×—×œ×”",endTime:"×©×¢×ª ×¡×™×•×",title:"×›×•×ª×¨×ª ×”×©×™×¢×•×¨",description:"×ª×™××•×¨ ×”×©×™×¢×•×¨",maxStudents:"××§×¡×™××•× ×ª×œ××™×“×™×",isActive:"×¡×˜×˜×•×¡"};let j=s;return t==="teacherId"?j=W.find(U=>U._id===s)?.personalInfo?.fullName||s:t==="isActive"&&(j=s?"×¤×¢×™×œ":"×œ× ×¤×¢×™×œ"),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[b[t]||t,":"]}),e.jsx("span",{children:j})]},`${t}-${d}`)})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"w-5 h-5 text-blue-600 ml-2"}),e.jsxs("p",{className:"text-blue-800",children:["×¢×“×›×•×Ÿ ×§×‘×•×¦×ª×™ ×©×œ ",n.size," ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”"]})]}),e.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"×©×“×•×ª ×¨×™×§×™× ×™×™×©××¨×• ×œ×œ× ×©×™× ×•×™"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×§×˜×’×•×¨×™×”"}),e.jsxs("select",{value:N.category||"",onChange:t=>S(s=>({...s,category:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"×œ×œ× ×©×™× ×•×™"}),F.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××•×¨×”"}),e.jsxs("select",{value:N.teacherId||"",onChange:t=>S(s=>({...s,teacherId:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"×œ×œ× ×©×™× ×•×™"}),W.map(t=>e.jsx("option",{value:t._id,children:t.personalInfo?.fullName},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××™×§×•×"}),e.jsxs("select",{value:N.location||"",onChange:t=>S(s=>({...s,location:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"×œ×œ× ×©×™× ×•×™"}),Je.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×¡×˜×˜×•×¡"}),e.jsxs("select",{value:N.isActive===void 0?"":N.isActive.toString(),onChange:t=>S(s=>({...s,isActive:t.target.value===""?void 0:t.target.value==="true"})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"×œ×œ× ×©×™× ×•×™"}),e.jsx("option",{value:"true",children:"×¤×¢×™×œ"}),e.jsx("option",{value:"false",children:"×œ× ×¤×¢×™×œ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×©×¢×ª ×”×ª×—×œ×”"}),e.jsx("input",{type:"time",value:N.startTime||"",onChange:t=>S(s=>({...s,startTime:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×©×¢×ª ×¡×™×•×"}),e.jsx("input",{type:"time",value:N.endTime||"",onChange:t=>S(s=>({...s,endTime:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×›×•×ª×¨×ª ×”×©×™×¢×•×¨"}),e.jsx("input",{type:"text",value:N.title||"",onChange:t=>S(s=>({...s,title:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"×œ×œ× ×©×™× ×•×™"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××§×¡×™××•× ×ª×œ××™×“×™×"}),e.jsx("input",{type:"number",min:"1",max:"50",value:N.maxStudents||"",onChange:t=>S(s=>({...s,maxStudents:t.target.value?parseInt(t.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"×œ×œ× ×©×™× ×•×™"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×ª×™××•×¨ ×”×©×™×¢×•×¨"}),e.jsx("textarea",{value:N.description||"",onChange:t=>S(s=>({...s,description:t.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"×œ×œ× ×©×™× ×•×™"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t",children:[e.jsx("button",{onClick:()=>{Z(!1),E(!1),S({})},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"×‘×™×˜×•×œ"}),!A&&e.jsxs("button",{onClick:re,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Ae,{className:"w-4 h-4 ml-1 inline"}),"×ª×¦×•×’×” ××§×“×™××”"]}),A&&e.jsxs("button",{onClick:re,disabled:me,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[me?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}):e.jsx(xt,{className:"w-4 h-4 ml-1"}),"××™×©×•×¨ ×¢×“×›×•×Ÿ"]})]})]})}),e.jsx(_e,{isOpen:xe,title:"××—×™×§×” ×§×‘×•×¦×ª×™×ª",message:`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ${n.size} ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”?

×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.`,confirmText:`××—×§ ${n.size} ×©×™×¢×•×¨×™×`,cancelText:"×‘×™×˜×•×œ",onConfirm:he,onCancel:()=>k(!1),variant:"danger"})]})}const wt=`
  .custom-scrollbar::-webkit-scrollbar {
    height: 8px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #555;
  }
`;function Bt(){const o=Ze(),[i,x]=l.useState([]),[f,n]=l.useState(!0),[z,w]=l.useState(null),[X,p]=l.useState(!1),[B,$]=l.useState(null),[Z,N]=l.useState([]),[S,A]=l.useState("create"),[E,xe]=l.useState("lessons"),[k,V]=l.useState(new Set),[ee,me]=l.useState(!1),[D,ne]=l.useState(""),[y,te]=l.useState({category:"",teacherId:"",date:""}),[se,W]=l.useState(!1),[M,T]=l.useState(null),[_,F]=l.useState(1),[ve,ae]=l.useState(20),[Pe,ie]=l.useState(1),[Q,O]=l.useState(0),[ue,re]=l.useState(!1),[ce,he]=l.useState(!1),[ge,le]=l.useState(!1),[L,t]=l.useState("date"),[s,d]=l.useState({startDate:"",endDate:"",category:"",teacherId:""}),[b,j]=l.useState(!1),[R,U]=l.useState([]),[u,Y]=l.useState(!1),[K,P]=l.useState(!1);l.useEffect(()=>{G(!1)},[]),l.useEffect(()=>{F(1),x([]),G(!1)},[y,D]);const G=async(a=!1)=>{try{a?he(!0):n(!0),w(null);const r=new Date;r.setHours(0,0,0,0);const m=r.toISOString().split("T")[0],c={...y,fromDate:y.date?void 0:m,page:a?_+1:_,limit:ve,search:D};console.log("ğŸ“… Loading upcoming theory lessons with pagination:",c);const h=await C.getTheoryLessons(c);h.data&&h.pagination?(a?(x(H=>[...H,...h.data]),F(h.pagination.currentPage)):x(h.data),ie(h.pagination.totalPages),O(h.pagination.totalCount),re(h.pagination.hasNextPage||!1)):Array.isArray(h)?(x(a?H=>[...H,...h]:h),ie(1),O(h.length),re(!1)):(x([]),ie(1),O(0),re(!1))}catch(r){console.error("Error loading theory lessons:",r),w("×©×’×™××” ×‘×˜×¢×™× ×ª ×©×™×¢×•×¨×™ ×”×ª×™××•×¨×™×”")}finally{n(!1),he(!1)}},Ue=()=>{ue&&!ce&&G(!0)},ze=()=>{F(1),x([]),U([]),P(!1),G(!1)},He=async()=>{if(!(K||u))try{Y(!0);const a=new Date;a.setHours(0,0,0,0);const r=new Date(a);r.setDate(r.getDate()-1);const m=r.toISOString().split("T")[0],c={...y,toDate:m,page:1,limit:100,search:D};console.log("ğŸ“… Loading past theory lessons:",c);const h=await C.getTheoryLessons(c);h.data?U(h.data):Array.isArray(h)&&U(h),P(!0)}catch(a){console.error("Error loading past theory lessons:",a)}finally{Y(!1)}},qe=()=>{!b&&!K&&He(),j(!b)},we=a=>{const r=new Date(a),m=new Date;m.setHours(0,0,0,0);const c=new Date(r);c.setHours(0,0,0,0);const h=["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™","×©×‘×ª"],H=["×™× ×•××¨","×¤×‘×¨×•××¨","××¨×¥","××¤×¨×™×œ","×××™","×™×•× ×™","×™×•×œ×™","××•×’×•×¡×˜","×¡×¤×˜××‘×¨","××•×§×˜×•×‘×¨","× ×•×‘××‘×¨","×“×¦××‘×¨"],J=h[r.getDay()],ye=r.getDate(),g=H[r.getMonth()],v=r.getFullYear();let q="";return c.getTime()===m.getTime()?q="×”×™×•× - ":c.getTime()===m.getTime()+864e5&&(q="××—×¨ - "),{prefix:q,main:`×™×•× ${J}, ${ye} ×‘${g} ${v}`,isToday:c.getTime()===m.getTime(),isPast:c<m}},I=l.useMemo(()=>{const a=new Map;i.forEach(g=>{const v=g.date;a.has(v)||a.set(v,[]),a.get(v).push(g)});const r=(g,v)=>{const q=g.startTime||"00:00",Ge=v.startTime||"00:00";return q.localeCompare(Ge)};a.forEach(g=>{g.sort(r)});const m=Array.from(a.entries()).sort((g,v)=>new Date(g[0]).getTime()-new Date(v[0]).getTime()),c=new Date;c.setHours(0,0,0,0);const h=[],H=[];m.forEach(([g,v])=>{const q=new Date(g);q.setHours(0,0,0,0),q.getTime()===c.getTime()?h.push([g,v]):q>c&&H.push([g,v])});const J=new Map;R.forEach(g=>{const v=g.date;J.has(v)||J.set(v,[]),J.get(v).push(g)}),J.forEach(g=>{g.sort(r)});const ye=Array.from(J.entries()).sort((g,v)=>new Date(v[0]).getTime()-new Date(g[0]).getTime());return{today:h,future:H,past:ye,all:[...h,...H,...ye],flatList:[...m.flatMap(([,g])=>g),...R],upcomingCount:i.length,pastCount:R.length}},[i,R]),Se=I.flatList,pe={totalLessons:Q||i.length,upcomingLessons:i.length,totalStudents:i.reduce((a,r)=>a+(r.studentIds?.length||0),0),averageAttendance:i.length>0?Math.round(i.reduce((a,r)=>{const m=r.attendanceList?.filter(c=>c.status==="×”×’×™×¢/×”").length||0;return a+m/(r.maxStudents||1)},0)*100/i.length):0},ke=()=>{$(null),N([]),A("create"),p(!0)},Ce=a=>{o(`/theory-lessons/${a._id}`)},De=a=>{$(a),N([]),A("edit"),p(!0)},Ve=async a=>{try{if(a.mode==="edit"){const{mode:r,lessonId:m,...c}=a;await C.updateTheoryLesson(m,c)}else if(a.mode==="bulk-edit"){const{mode:r,lessonIds:m,updateData:c}=a;await C.bulkUpdateTheoryLessons(m,c)}else if(a.mode==="bulk-create"||a.isBulk){const{isBulk:r,mode:m,...c}=a;await C.bulkCreateTheoryLessons(c)}else{const{mode:r,...m}=a;await C.createTheoryLesson(m)}p(!1),$(null),N([]),A("create"),V(new Set),F(1),x([]),await G(!1)}catch(r){throw console.error("Error saving theory lesson:",r),r}},Te=a=>{T(a),W(!0)},We=async()=>{if(M)try{await C.deleteTheoryLesson(M._id),F(1),x([]),await G(!1),W(!1),T(null)}catch(a){console.error("Error deleting theory lesson:",a),w("×©×’×™××” ×‘××—×™×§×ª ×©×™×¢×•×¨ ×”×ª×™××•×¨×™×”")}},Qe=async()=>{try{let a;switch(L){case"date":if(!s.startDate||!s.endDate){w("× ×“×¨×© ×œ×‘×—×•×¨ ×ª××¨×™×›×™ ×”×ª×—×œ×” ×•×¡×™×•×");return}a=await C.deleteTheoryLessonsByDateRange(s.startDate,s.endDate);break;case"category":if(!s.category){w("× ×“×¨×© ×œ×‘×—×•×¨ ×§×˜×’×•×¨×™×”");return}a=await C.deleteTheoryLessonsByCategory(s.category);break;case"teacher":if(!s.teacherId){w("× ×“×¨×© ×œ×‘×—×•×¨ ××•×¨×”");return}a=await C.deleteTheoryLessonsByTeacher(s.teacherId);break;default:w("×¡×•×’ ××—×™×§×” ×œ× ×ª×§×™×Ÿ");return}F(1),x([]),await G(!1),le(!1),d({startDate:"",endDate:"",category:"",teacherId:""}),w(null),console.log(`âœ… × ××—×§×• ${a.deletedCount} ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×‘×”×¦×œ×—×”`)}catch(a){w(a.message||"×©×’×™××” ×‘××—×™×§×ª ×©×™×¢×•×¨×™ ×”×ª×™××•×¨×™×”"),le(!1)}},Ee=()=>{le(!1),d({startDate:"",endDate:"",category:"",teacherId:""})},Le=a=>{const r=new Set(k);r.has(a)?r.delete(a):r.add(a),V(r)},Ye=()=>{V(ee?new Set:new Set(Se.map(a=>a._id))),me(!ee)},Ke=()=>{const a=i.filter(r=>k.has(r._id));if(a.length===0){w("×× × ×‘×—×¨ ×©×™×¢×•×¨×™× ×œ×¢×¨×™×›×”");return}N(a),$(null),A("bulk-edit"),p(!0)};return f?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("div",{className:"text-gray-600",children:"×˜×•×¢×Ÿ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:wt}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"× ×™×”×•×œ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×•××¢×§×‘ × ×•×›×—×•×ª"}),e.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse mt-4",children:[e.jsxs("button",{onClick:()=>xe("lessons"),className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${E==="lessons"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(de,{className:"w-4 h-4 ml-2"}),"×¨×©×™××ª ×©×™×¢×•×¨×™×"]}),e.jsxs("button",{onClick:()=>xe("bulk"),className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${E==="bulk"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(mt,{className:"w-4 h-4 ml-2"}),"×¢×“×›×•×Ÿ ×©×™×¢×•×¨×™× ×§×‘×•×¦×ª×™"]})]})]}),e.jsx("div",{className:"flex gap-2",children:E==="lessons"&&e.jsxs(e.Fragment,{children:[k.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Ke,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:`×¢×¨×™×›×” ×§×‘×•×¦×ª×™×ª ×©×œ ${k.size} ×©×™×¢×•×¨×™×`,children:[e.jsx(Ne,{className:"w-4 h-4 ml-1"}),"×¢×¨×™×›×” ×§×‘×•×¦×ª×™×ª (",k.size,")"]}),e.jsx("button",{onClick:()=>V(new Set),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"×‘×˜×œ ×‘×—×™×¨×”",children:"×‘×™×˜×•×œ ×‘×—×™×¨×”"})]}),e.jsxs("button",{onClick:()=>le(!0),className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",title:"××—×™×§×” ×§×‘×•×¦×ª×™×ª ×©×œ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”",children:[e.jsx(fe,{className:"w-4 h-4 ml-1"}),"××—×™×§×ª ×©×™×¢×•×¨×™×"]}),e.jsxs("button",{onClick:ke,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(Ie,{className:"w-4 h-4 ml-2"}),"×©×™×¢×•×¨ ×—×“×©"]})]})})]}),z&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:z})}),E==="lessons"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(be,{title:"×¡×”×´×› ×©×™×¢×•×¨×™×",value:pe.totalLessons.toString(),subtitle:"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”",icon:e.jsx(de,{}),color:"blue"}),e.jsx(be,{title:"×©×™×¢×•×¨×™× ×§×¨×•×‘×™×",value:pe.upcomingLessons.toString(),subtitle:"×©×™×¢×•×¨×™× ××”×™×•× ×•×”×œ××”",icon:e.jsx(je,{}),color:"green"}),e.jsx(be,{title:"×¡×”×´×› ×ª×œ××™×“×™×",value:pe.totalStudents.toString(),subtitle:"× ×¨×©××™× ×œ×©×™×¢×•×¨×™×",icon:e.jsx(Ne,{}),color:"purple"}),e.jsx(be,{title:"× ×•×›×—×•×ª ×××•×¦×¢×ª",value:`${pe.averageAttendance}%`,subtitle:"××—×•×– × ×•×›×—×•×ª",icon:e.jsx(Be,{}),color:"orange"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"×—×™×¤×•×© ×©×™×¢×•×¨×™×...",value:D,onChange:a=>ne(a.target.value),className:"w-full pr-10 pl-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsx("div",{className:"md:w-56",children:e.jsxs("select",{value:y.category,onChange:a=>te(r=>({...r,category:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"×›×œ ×”×§×˜×’×•×¨×™×•×ª"}),e.jsx("option",{value:"×ª×œ××™×“×™× ×—×“×©×™× ×‘-×“",children:"×ª×œ××™×“×™× ×—×“×©×™× ×‘-×“"}),e.jsx("option",{value:"×ª×œ××™×“×™× ×—×“×©×™× ×¦×¢×™×¨×™×",children:"×ª×œ××™×“×™× ×—×“×©×™× ×¦×¢×™×¨×™×"}),e.jsx("option",{value:"×ª×œ××™×“×™× ×—×“×©×™× ×‘×•×’×¨×™× (×” - ×˜)",children:"×ª×œ××™×“×™× ×—×“×©×™× ×‘×•×’×¨×™× (×” - ×˜)"}),e.jsx("option",{value:"××ª×—×™×œ×™×",children:"××ª×—×™×œ×™×"}),e.jsx("option",{value:"××ª×—×™×œ×™× ×‘",children:"××ª×—×™×œ×™× ×‘"}),e.jsx("option",{value:"××ª×—×™×œ×™× ×“",children:"××ª×—×™×œ×™× ×“"}),e.jsx("option",{value:"××ª×§×“××™× ×",children:"××ª×§×“××™× ×"}),e.jsx("option",{value:"××ª×§×“××™× ×‘",children:"××ª×§×“××™× ×‘"}),e.jsx("option",{value:"××ª×§×“××™× ×’",children:"××ª×§×“××™× ×’"}),e.jsx("option",{value:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×§×œ××¡×™ ×™×",children:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×§×œ××¡×™ ×™×"}),e.jsx("option",{value:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×",children:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×"}),e.jsx("option",{value:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×‘",children:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×‘"}),e.jsx("option",{value:"××’××”",children:"××’××”"}),e.jsx("option",{value:"×ª××•×¨×™×” ×›×œ×™",children:"×ª××•×¨×™×” ×›×œ×™"})]})}),e.jsx("div",{className:"md:w-48",children:e.jsx("input",{type:"date",value:y.date,onChange:a=>te(r=>({...r,date:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),e.jsx("button",{onClick:()=>{te({category:"",teacherId:"",date:""}),ne("")},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(Oe,{className:"w-4 h-4"})})]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×§×¨×•×‘×™× (",i.length,")"]}),Se.length>0&&e.jsxs("label",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:ee,onChange:Ye,className:"ml-2 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),"×‘×—×¨ ×”×›×œ (",k.size," × ×‘×—×¨×•)"]})]}),e.jsx("button",{onClick:ze,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"×¨×¢× ×Ÿ"})]}),Se.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(de,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"××™×Ÿ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"×”×ª×—×œ ×¢×œ ×™×“×™ ×™×¦×™×¨×ª ×©×™×¢×•×¨ ×”×ª×™××•×¨×™×” ×”×¨××©×•×Ÿ"}),e.jsxs("button",{onClick:ke,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(Ie,{className:"w-4 h-4 ml-2"}),"×¦×•×¨ ×©×™×¢×•×¨ ×¨××©×•×Ÿ"]})]}):e.jsxs("div",{className:"space-y-6",children:[I.today.length===0&&I.future.length===0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center",children:[e.jsx(je,{className:"w-10 h-10 text-blue-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-1",children:"××™×Ÿ ×©×™×¢×•×¨×™× ×§×¨×•×‘×™×"}),e.jsx("p",{className:"text-blue-700 text-sm mb-3",children:"××™×Ÿ ×©×™×¢×•×¨×™× ××ª×•×›× × ×™× ×œ×”×™×•× ××• ×œ×¢×ª×™×“. × ×™×ª×Ÿ ×œ×¦×¤×•×ª ×‘×©×™×¢×•×¨×™× ×©×”×¡×ª×™×™××• ×œ××˜×” ××• ×œ×™×¦×•×¨ ×©×™×¢×•×¨×™× ×—×“×©×™×."}),e.jsxs("button",{onClick:ke,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 ml-2"}),"×¦×•×¨ ×©×™×¢×•×¨ ×—×“×©"]})]}),I.today.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-1 bg-primary-600 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"×œ×”×™×•×"})]}),I.today.map(([a,r])=>{const m=we(a);return e.jsxs("div",{className:"bg-primary-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:m.main}),e.jsxs("span",{className:"text-sm text-primary-700 font-medium",children:[r.length," ×©×™×¢×•×¨×™×",r.length>1&&e.jsx("span",{className:"mr-2 text-xs text-primary-600",children:"â† ×’×œ×œ"})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"overflow-x-auto pb-2 custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 px-1",style:{minWidth:"max-content"},children:r.map(c=>e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsx($e,{lesson:c,onView:Ce,onEdit:De,onDelete:Te,selectable:!0,selected:k.has(c._id),onSelect:Le})},c._id))})})})]},a)})]}),I.future.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-1 bg-blue-600 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"×©×™×¢×•×¨×™× ×¢×ª×™×“×™×™×"})]}),I.future.map(([a,r])=>{const m=we(a);return e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900",children:[e.jsx("span",{className:"text-blue-700",children:m.prefix}),m.main]}),e.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:[r.length," ×©×™×¢×•×¨×™×",r.length>1&&e.jsx("span",{className:"mr-2 text-xs text-blue-600",children:"â† ×’×œ×œ"})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"overflow-x-auto pb-2 custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 px-1",style:{minWidth:"max-content"},children:r.map(c=>e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsx($e,{lesson:c,onView:Ce,onEdit:De,onDelete:Te,selectable:!0,selected:k.has(c._id),onSelect:Le})},c._id))})})})]},a)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:qe,className:"w-full flex items-center justify-between p-4 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-300 rounded-full",children:e.jsx(ht,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-700",children:"×©×™×¢×•×¨×™× ×©×”×¡×ª×™×™××•"}),e.jsx("p",{className:"text-sm text-gray-500",children:K?`${I.pastCount} ×©×™×¢×•×¨×™× ×‘-${I.past.length} ×™××™×`:"×œ×—×¥ ×œ×˜×¢×™× ×”"})]})]}),e.jsx("div",{className:"flex items-center gap-2 text-gray-600",children:u?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-medium",children:b?"×”×¡×ª×¨":"×”×¦×’"}),b?e.jsx(gt,{className:"w-5 h-5"}):e.jsx(pt,{className:"w-5 h-5"})]})})]}),b&&K&&I.past.length>0&&e.jsx("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-200",children:I.past.map(([a,r])=>{const m=we(a);return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:m.main}),e.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:[r.length," ×©×™×¢×•×¨×™×",r.length>1&&e.jsx("span",{className:"mr-2 text-xs text-gray-500",children:"â† ×’×œ×œ"})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"overflow-x-auto pb-2 custom-scrollbar",children:e.jsx("div",{className:"flex gap-4 px-1",style:{minWidth:"max-content"},children:r.map(c=>e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsx($e,{lesson:c,onView:Ce,onEdit:De,onDelete:Te,selectable:!0,selected:k.has(c._id),onSelect:Le})},c._id))})})})]},a)})}),b&&K&&I.past.length===0&&e.jsx("div",{className:"bg-gray-50 rounded-xl p-6 text-center border border-gray-200",children:e.jsx("p",{className:"text-gray-500",children:"××™×Ÿ ×©×™×¢×•×¨×™× ×©×”×¡×ª×™×™××•"})})]})]})]}),ue&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:Ue,disabled:ce,className:"flex items-center gap-2 px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:ce?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"×˜×•×¢×Ÿ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("span",{children:"×˜×¢×Ÿ ×¢×•×“ ×©×™×¢×•×¨×™×"}),Q>i.length&&e.jsxs("span",{className:"text-sm opacity-90",children:["(",i.length," ××ª×•×š ",Q,")"]})]})})})]}):e.jsx(vt,{lessons:i,onRefresh:ze,searchQuery:D,filters:y}),X&&e.jsx(Xe,{theoryLesson:B,theoryLessons:Z,mode:S,onSubmit:Ve,onCancel:()=>{p(!1),$(null),N([]),A("create"),V(new Set)}}),e.jsx(_e,{isOpen:se,title:"××—×™×§×ª ×©×™×¢×•×¨ ×ª×™××•×¨×™×”",message:M?`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×©×™×¢×•×¨ ×”×ª×™××•×¨×™×” "${M.title}"?

×¤×¨×˜×™ ×”×©×™×¢×•×¨:
â€¢ ×ª××¨×™×š: ${new Date(M.date).toLocaleDateString("he-IL")}
â€¢ ××©×š: ${M.duration} ×“×§×•×ª
â€¢ ×ª×œ××™×“×™× ×¨×©×•××™×: ${M.registeredStudents?.length||0}

×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.`:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×©×™×¢×•×¨ ×”×ª×™××•×¨×™×”?",confirmText:"××—×§ ×©×™×¢×•×¨",cancelText:"×‘×™×˜×•×œ",onConfirm:We,onCancel:()=>{W(!1),T(null)},variant:"danger"}),e.jsx(Me,{isOpen:ge,onClose:Ee,title:"××—×™×§×” ×§×‘×•×¦×ª×™×ª ×©×œ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”",maxWidth:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"w-5 h-5 text-yellow-600 ml-2"}),e.jsx("p",{className:"text-yellow-800",children:"âš ï¸ ×¤×¢×•×œ×” ×–×• ×ª××—×§ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×¢×œ ×‘×¡×™×¡ ×”×§×¨×™×˜×¨×™×•× ×™× ×©× ×‘×—×¨×•. ×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ!"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×¡×•×’ ××—×™×§×”"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"date",checked:L==="date",onChange:a=>t(a.target.value),className:"ml-2"}),"×˜×•×•×— ×ª××¨×™×›×™×"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"category",checked:L==="category",onChange:a=>t(a.target.value),className:"ml-2"}),"×œ×¤×™ ×§×˜×’×•×¨×™×”"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"teacher",checked:L==="teacher",onChange:a=>t(a.target.value),className:"ml-2"}),"×œ×¤×™ ××•×¨×”"]})]})]}),L==="date"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×ª××¨×™×š ×”×ª×—×œ×”"}),e.jsx("input",{type:"date",value:s.startDate,onChange:a=>d({...s,startDate:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×ª××¨×™×š ×¡×™×•×"}),e.jsx("input",{type:"date",value:s.endDate,onChange:a=>d({...s,endDate:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]})]}),L==="category"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×§×˜×’×•×¨×™×”"}),e.jsxs("select",{value:s.category,onChange:a=>d({...s,category:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[e.jsx("option",{value:"",children:"×‘×—×¨ ×§×˜×’×•×¨×™×”"}),e.jsx("option",{value:"×ª×œ××™×“×™× ×—×“×©×™× ×‘-×“",children:"×ª×œ××™×“×™× ×—×“×©×™× ×‘-×“"}),e.jsx("option",{value:"××ª×—×™×œ×™×",children:"××ª×—×™×œ×™×"}),e.jsx("option",{value:"××ª×—×™×œ×™× ×‘",children:"××ª×—×™×œ×™× ×‘"}),e.jsx("option",{value:"××ª×—×™×œ×™× ×“",children:"××ª×—×™×œ×™× ×“"}),e.jsx("option",{value:"××ª×§×“××™× ×‘",children:"××ª×§×“××™× ×‘"}),e.jsx("option",{value:"××ª×§×“××™× ×",children:"××ª×§×“××™× ×"}),e.jsx("option",{value:"××ª×§×“××™× ×’",children:"××ª×§×“××™× ×’"}),e.jsx("option",{value:"×ª×œ××™×“×™× ×—×“×©×™× ×‘×•×’×¨×™× (×” - ×˜)",children:"×ª×œ××™×“×™× ×—×“×©×™× ×‘×•×’×¨×™× (×” - ×˜)"}),e.jsx("option",{value:"×ª×œ××™×“×™× ×—×“×©×™× ×¦×¢×™×¨×™×",children:"×ª×œ××™×“×™× ×—×“×©×™× ×¦×¢×™×¨×™×"}),e.jsx("option",{value:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×§×œ××¡×™ ×™×",children:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×§×œ××¡×™ ×™×"}),e.jsx("option",{value:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×",children:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×"}),e.jsx("option",{value:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×‘",children:"×”×›× ×” ×œ×¨×¡×™×˜×œ ×¨×•×§\\×¤×•×¤\\×’'××– ×™×‘"}),e.jsx("option",{value:"××’××”",children:"××’××”"}),e.jsx("option",{value:"×ª××•×¨×™×” ×›×œ×™",children:"×ª××•×¨×™×” ×›×œ×™"})]})]}),L==="teacher"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××•×¨×”"}),e.jsx("input",{type:"text",placeholder:"×”×–×Ÿ ××–×”×” ××•×¨×” ××• ×©×",value:s.teacherId,onChange:a=>d({...s,teacherId:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"× ×™×ª×Ÿ ×œ×”×–×™×Ÿ ××–×”×” ××•×¨×” ××• ×œ×—×¤×© ×œ×¤×™ ×©×"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:Ee,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"×‘×™×˜×•×œ"}),e.jsxs("button",{onClick:Qe,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:L==="date"&&(!s.startDate||!s.endDate)||L==="category"&&!s.category||L==="teacher"&&!s.teacherId,children:[e.jsx(fe,{className:"w-4 h-4 ml-2 inline"}),"××—×§ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”"]})]})]})})]})]})}export{Bt as default};
