import{j as n}from"../assets/index-CoKafZFz.js";import{r as l}from"./vendor-C9PcmKF2.js";import{a as m}from"./cascade-deletion-BvQll6O-.js";import{U as h}from"./ui-DsxFGtGk.js";const u=e=>{const[a,t]=l.useState(null),[c,r]=l.useState(!1),[i,s]=l.useState(null);l.useEffect(()=>{if(!e||typeof e!="string"){t(null),r(!1),s(null);return}(async()=>{r(!0),s(null);try{const o=await m.teachers.getTeacher(e);t(o)}catch(o){console.error("Error fetching teacher data:",o),s(o),t(null)}finally{r(!1)}})()},[e]);const f=a?.personalInfo?.fullName||(a?.personalInfo?.firstName&&a?.personalInfo?.lastName?`${a.personalInfo.firstName} ${a.personalInfo.lastName}`:"")||"מורה לא ידוע";return{teacher:a,isLoading:c,error:i,teacherName:f}},p=e=>{if(e.teacherName&&!N(e.teacherName))return e.teacherName;if(typeof e.teacherId=="object"&&e.teacherId?.personalInfo){const a=e.teacherId;return a.personalInfo.fullName||`${a.personalInfo.firstName||""} ${a.personalInfo.lastName||""}`.trim()||"מורה לא ידוע"}return null},N=e=>/^[0-9a-fA-F]{24}$/.test(e),d=({lesson:e,className:a="text-sm",showIcon:t=!0})=>{const c=p(e),r=!c&&e.teacherId&&typeof e.teacherId=="string",{teacherName:i,isLoading:s}=u(r?e.teacherId:void 0),f=c||i||"מורה לא ידוע";return!e.teacherId&&!e.teacherName?null:n.jsxs("div",{className:`flex items-center gap-2 text-gray-600 ${a}`,children:[t&&n.jsx(h,{className:"w-4 h-4"}),n.jsxs("span",{className:a,children:["מורה: ",s?n.jsx("span",{className:"inline-block",children:n.jsx("span",{className:"inline-block animate-pulse bg-gray-200 rounded h-4 w-24"})}):f]})]})},j=d;export{j as T};
